/**
 * Atomic Component Patterns
 * Version: 1.0
 *
 * Ported from html-guide_org
 * Reusable atomic patterns extracted from components
 * to eliminate duplication and ensure consistency.
 *
 * Patterns included:
 * - Input fields
 * - Interactive items
 * - Common component states
 */

/* ========================================
   PATTERN 1: INPUT BASE FIELD (47 occurrences)

   Used in: input, textarea, autocomplete, select,
   date-picker, cascader, treeselect, transfer, etc.
   ======================================== */

.input-base {
  width: 100%;
  padding: var(--input-padding-y) var(--input-padding-x);
  font-family: var(--font-family-sans);
  font-size: var(--font-size-body-medium);
  line-height: var(--line-height-body-medium);
  color: var(--input-text);
  background-color: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: var(--radius-base);
  transition: all var(--duration-fast) var(--ease-out);
  outline: none;
}

/* Hover state */
.input-base:hover:not(:disabled):not(:focus):not(:read-only) {
  border-color: var(--input-border-hover);
}

/* Focus state */
.input-base:focus {
  border-color: var(--input-border-focus);
  box-shadow: 0 0 0 3px var(--color-primary-100);
}

/* Disabled state */
.input-base:disabled {
  cursor: not-allowed;
  background-color: var(--input-disabled-bg);
  border-color: var(--input-disabled-border);
  color: var(--input-disabled-text);
  opacity: 0.6;
}

/* Read-only state */
.input-base:read-only {
  cursor: default;
  background-color: var(--input-readonly-bg);
  border-color: var(--input-readonly-border);
  color: var(--input-readonly-text);
}

/* Error state */
.input-base.error,
.input-base.input-error {
  border-color: var(--input-error-border);
}

.input-base.error:focus,
.input-base.input-error:focus {
  border-color: var(--input-error-border);
  box-shadow: 0 0 0 3px var(--color-error-100);
}

/* Success state */
.input-base.success,
.input-base.input-success {
  border-color: var(--input-success-border);
}

.input-base.success:focus,
.input-base.input-success:focus {
  border-color: var(--input-success-border);
  box-shadow: 0 0 0 3px var(--color-success-100);
}

/* Warning state */
.input-base.warning,
.input-base.input-warning {
  border-color: var(--input-warning-border);
}

.input-base.warning:focus,
.input-base.input-warning:focus {
  border-color: var(--input-warning-border);
  box-shadow: 0 0 0 3px var(--color-warning-100);
}

/* Info state */
.input-base.info,
.input-base.input-info {
  border-color: var(--input-info-border);
}

.input-base.info:focus,
.input-base.input-info:focus {
  border-color: var(--input-info-border);
  box-shadow: 0 0 0 3px var(--color-info-100);
}

/* Placeholder styling */
.input-base::placeholder {
  color: var(--input-placeholder);
  opacity: 1;
}

.input-base:disabled::placeholder {
  color: var(--input-disabled-text);
}

/* ========================================
   SIZE VARIANTS
   ======================================== */

/* Small size */
.input-base--sm {
  padding: var(--spacing-2) var(--spacing-3);
  font-size: var(--font-size-body-small);
  line-height: var(--line-height-body-small);
}

/* Large size */
.input-base--lg {
  padding: var(--spacing-4) var(--spacing-5);
  font-size: var(--font-size-body-large);
  line-height: var(--line-height-body-large);
}

/* ========================================
   MODIFIERS
   ======================================== */

/* Full width (default, but explicit class available) */
.input-base--full {
  width: 100%;
}

/* Icon spacing - right icon */
.input-base--icon-right {
  padding-right: 40px;
}

.input-base--sm.input-base--icon-right {
  padding-right: 36px;
}

.input-base--lg.input-base--icon-right {
  padding-right: 48px;
}

/* Icon spacing - left icon */
.input-base--icon-left {
  padding-left: 40px;
}

.input-base--sm.input-base--icon-left {
  padding-left: 36px;
}

.input-base--lg.input-base--icon-left {
  padding-left: 48px;
}

/* Both icons */
.input-base--icon-both {
  padding-left: 40px;
  padding-right: 40px;
}

/* Borderless variant */
.input-base--borderless {
  border-color: transparent;
  background-color: transparent;
}

.input-base--borderless:hover:not(:disabled):not(:read-only) {
  border-color: var(--border-default);
  background-color: var(--input-bg);
}

.input-base--borderless:focus {
  border-color: var(--input-border-focus);
  background-color: var(--input-bg);
}

/* ========================================
   TEXTAREA SPECIFIC
   ======================================== */

textarea.input-base {
  min-height: 100px;
  resize: vertical;
  line-height: 1.5;
}

textarea.input-base--sm {
  min-height: 80px;
}

textarea.input-base--lg {
  min-height: 120px;
}

/* Fixed height (non-resizable) */
textarea.input-base--fixed {
  resize: none;
}

/* Auto resize */
textarea.input-base--auto {
  resize: none;
  overflow: hidden;
}

/* ========================================
   DARK MODE SUPPORT
   ======================================== */

body.dark-mode .input-base,
body[class*="theme-dark"] .input-base {
  background-color: var(--input-bg);
  border-color: var(--input-border);
  color: var(--input-text);
}

body.dark-mode .input-base:hover:not(:disabled):not(:focus):not(:read-only),
body[class*="theme-dark"] .input-base:hover:not(:disabled):not(:focus):not(:read-only) {
  border-color: var(--input-border-hover);
}

body.dark-mode .input-base:focus,
body[class*="theme-dark"] .input-base:focus {
  border-color: var(--input-border-focus);
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
}

body.dark-mode .input-base::placeholder,
body[class*="theme-dark"] .input-base::placeholder {
  color: var(--input-placeholder);
}

body.dark-mode .input-base:disabled,
body[class*="theme-dark"] .input-base:disabled {
  background-color: var(--input-disabled-bg);
  border-color: var(--input-disabled-border);
  color: var(--input-disabled-text);
}

/* ========================================
   MOBILE RESPONSIVE
   ======================================== */

@media (max-width: 768px) {
  /* Prevent zoom on iOS */
  .input-base {
    font-size: 16px;
  }

  .input-base--sm {
    font-size: 14px;
  }

  .input-base--lg {
    font-size: 18px;
  }
}

/* ========================================
   ACCESSIBILITY
   ======================================== */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .input-base {
    border-width: 2px;
  }

  .input-base:focus {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .input-base {
    transition: none;
  }
}

/* ========================================
   PATTERN 2: INPUT WRAPPER
   ======================================== */

.input-wrapper {
  position: relative;
  display: inline-block;
  width: 100%;
}

.input-wrapper--sm {
  font-size: var(--font-size-body-small);
}

.input-wrapper--lg {
  font-size: var(--font-size-body-large);
}

/* Icon positioning */
.input-icon {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  color: var(--text-tertiary);
  transition: color var(--duration-fast) var(--ease-out);
}

.input-icon--left {
  left: var(--spacing-3);
}

.input-icon--right {
  right: var(--spacing-3);
}

/* Interactive icon */
.input-icon--interactive {
  pointer-events: auto;
  cursor: pointer;
  color: var(--text-secondary);
}

.input-icon--interactive:hover {
  color: var(--text-primary);
}

/* ========================================
   PATTERN 3: INPUT LABEL
   ======================================== */

.input-label {
  display: block;
  font-size: var(--font-size-label-medium);
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-2);
  line-height: var(--line-height-label-medium);
}

.input-label--required::after {
  content: ' *';
  color: var(--color-error-500);
}

.input-label--disabled {
  color: var(--text-disabled);
  cursor: not-allowed;
}

/* ========================================
   PATTERN 4: INPUT HELPER TEXT
   ======================================== */

.input-helper {
  display: block;
  font-size: var(--font-size-body-small);
  color: var(--text-tertiary);
  margin-top: var(--spacing-1);
  line-height: var(--line-height-body-small);
}

.input-error-message {
  display: block;
  font-size: var(--font-size-body-small);
  color: var(--color-error-600);
  margin-top: var(--spacing-1);
  line-height: var(--line-height-body-small);
}

.input-success-message {
  display: block;
  font-size: var(--font-size-body-small);
  color: var(--color-success-600);
  margin-top: var(--spacing-1);
  line-height: var(--line-height-body-small);
}

.input-warning-message {
  display: block;
  font-size: var(--font-size-body-small);
  color: var(--palette-orange-600);
  margin-top: var(--spacing-1);
  line-height: var(--line-height-body-small);
}

/* ========================================
   PATTERN 5: INPUT GROUP
   ======================================== */

.input-group {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
  margin-bottom: var(--spacing-4);
}

.input-group:last-child {
  margin-bottom: 0;
}

.input-group--horizontal {
  flex-direction: row;
  align-items: center;
  gap: var(--spacing-3);
}

.input-group--horizontal .input-label {
  margin-bottom: 0;
  white-space: nowrap;
}

/* ========================================
   PATTERN 6: BUTTON BASE
   ======================================== */

.btn-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--button-gap);
  padding: var(--button-padding-y) var(--button-padding-x);
  font-family: var(--font-family-sans);
  font-size: var(--font-size-body-medium);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-body-medium);
  text-align: center;
  white-space: nowrap;
  border: 1px solid transparent;
  border-radius: var(--radius-base);
  cursor: pointer;
  transition: all var(--button-hover-duration) var(--button-hover-easing);
  user-select: none;
  outline: none;
}

.btn-base:disabled {
  cursor: not-allowed;
  opacity: 0.6;
  pointer-events: none;
}

.btn-base:active:not(:disabled) {
  transform: scale(0.98);
}

/* ========================================
   PATTERN 7: CARD BASE
   ======================================== */

.card-base {
  background-color: var(--surface-primary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  padding: var(--card-padding);
  box-shadow: var(--shadow-sm);
  transition: box-shadow var(--duration-fast) var(--ease-out);
}

.card-base--interactive {
  cursor: pointer;
}

.card-base--interactive:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--border-strong);
}

/* ========================================
   PATTERN 8: LIST ITEM BASE
   ======================================== */

.list-item-base {
  display: flex;
  align-items: center;
  padding: var(--list-item-padding-y) var(--list-item-padding-x);
  border-radius: var(--radius-base);
  transition: background-color var(--duration-fast) var(--ease-out);
}

.list-item-base--interactive {
  cursor: pointer;
}

.list-item-base--interactive:hover {
  background-color: var(--surface-secondary);
}

.list-item-base--selected {
  background-color: var(--color-primary-50);
}

body.dark-mode .list-item-base--selected,
body[class*="theme-dark"] .list-item-base--selected {
  background-color: var(--color-primary-950);
}

/* ========================================
   PATTERN 9: DROPDOWN BASE
   ======================================== */

.dropdown-base {
  position: absolute;
  z-index: var(--z-dropdown);
  min-width: 200px;
  max-height: 300px;
  overflow-y: auto;
  background-color: var(--surface-primary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-base);
  box-shadow: var(--shadow-lg);
  padding: var(--spacing-2);
  animation: slide-down var(--dropdown-enter-duration) var(--dropdown-enter-easing);
}

/* ========================================
   PATTERN 10: BADGE BASE
   ======================================== */

.badge-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px 8px;
  font-size: var(--font-size-label-small);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-label-small);
  border-radius: var(--radius-full);
  white-space: nowrap;
}

/* ========================================
   UTILITY CLASSES FOR STORIES
   ======================================== */

/* Simple card utility */
.card {
  background-color: var(--surface-primary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}

.card-body {
  padding: var(--spacing-4);
}

/* Simple button utilities */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  padding: var(--spacing-2) var(--spacing-4);
  font-family: var(--font-family-sans);
  font-size: var(--font-size-body-medium);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-body-medium);
  border: 1px solid transparent;
  border-radius: var(--radius-base);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  text-decoration: none;
  user-select: none;
}

.btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
  pointer-events: none;
}

.btn-primary {
  background-color: var(--color-primary-600);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-primary-700);
}

.btn-secondary {
  background-color: var(--surface-secondary);
  color: var(--text-primary);
  border-color: var(--border-default);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--surface-tertiary);
  border-color: var(--border-strong);
}

.btn-ghost {
  background-color: transparent;
  color: var(--text-secondary);
}

.btn-ghost:hover:not(:disabled) {
  background-color: var(--surface-secondary);
  color: var(--text-primary);
}

.btn-sm {
  padding: var(--spacing-1) var(--spacing-3);
  font-size: var(--font-size-body-small);
}

.btn-lg {
  padding: var(--spacing-3) var(--spacing-5);
  font-size: var(--font-size-body-large);
}

/* Badge utility */
.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-1);
  padding: 2px 8px;
  font-size: var(--font-size-label-small);
  font-weight: var(--font-weight-medium);
  border-radius: var(--radius-full);
  white-space: nowrap;
}

.badge-success {
  background-color: var(--color-success-100);
  color: var(--color-success-800);
}

.badge-warning {
  background-color: var(--color-warning-100);
  color: var(--color-warning-800);
}

.badge-error {
  background-color: var(--color-error-100);
  color: var(--color-error-800);
}

.badge-info {
  background-color: var(--color-info-100);
  color: var(--color-info-800);
}

/* Toggle utility for stories */
.toggle {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-2);
  cursor: pointer;
  user-select: none;
}

/* Keyboard key display */
kbd {
  display: inline-block;
  padding: 2px 6px;
  font-family: var(--font-family-mono, monospace);
  font-size: 0.875em;
  font-weight: var(--font-weight-medium);
  line-height: 1;
  color: var(--text-primary);
  background-color: var(--surface-secondary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-sm);
  box-shadow: 0 1px 0 var(--border-strong);
}
