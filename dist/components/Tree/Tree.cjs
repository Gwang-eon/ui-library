"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),T=require("react"),B=require("lucide-react"),s=require("./Tree.module.css.cjs"),q=({node:t,level:p,selectable:d,compact:b,expandedNodes:o,selectedNodes:N,onToggle:C,onCheck:g,onNodeClick:j})=>{const h=t.children&&t.children.length>0,l=o.has(t.id),m=N.has(t.id),S=!h,E=e=>{e.stopPropagation(),h&&C(t.id)},k=e=>{e.stopPropagation(),g(t.id,e.target.checked)},a=()=>{!d&&!t.disabled&&j(t.id)},r=[s.default.treeNode,S&&s.default.treeNodeLeaf,t.disabled&&s.default.treeNodeDisabled,m&&!d&&s.default.treeNodeSelected].filter(Boolean).join(" ");return n.jsxs("div",{className:r,children:[n.jsxs("div",{className:s.default.treeNodeContent,onClick:a,role:d?void 0:"button",tabIndex:!d&&!t.disabled?0:void 0,children:[h?n.jsx("button",{className:`${s.default.treeExpandBtn} ${l?s.default.treeExpandBtnExpanded:s.default.treeExpandBtnCollapsed}`,onClick:E,"aria-expanded":l,"aria-label":l?"Collapse":"Expand",children:l?n.jsx(B.ChevronDown,{size:16}):n.jsx(B.ChevronRight,{size:16})}):n.jsx("span",{className:s.default.treeIndent}),d&&n.jsx("input",{type:"checkbox",className:s.default.treeCheckbox,checked:m,onChange:k,disabled:t.disabled,onClick:e=>e.stopPropagation()}),t.icon&&n.jsx("span",{className:s.default.treeIcon,children:t.icon}),n.jsx("span",{className:s.default.treeLabel,children:n.jsx("span",{className:s.default.treeLabelText,children:t.label})}),t.badge&&n.jsx("span",{className:s.default.treeBadge,children:t.badge})]}),h&&l&&n.jsx("div",{className:s.default.treeChildren,children:t.children.map(e=>n.jsx(q,{node:e,level:p+1,selectable:d,compact:b,expandedNodes:o,selectedNodes:N,onToggle:C,onCheck:g,onNodeClick:j},e.id))})]})},y=({data:t,selectable:p=!1,compact:d=!1,defaultExpandAll:b=!1,onSelect:o,className:N=""})=>{const C=()=>{if(!b)return new Set;const a=new Set,r=e=>{e.forEach(i=>{i.children&&i.children.length>0&&(a.add(i.id),r(i.children))})};return r(t),a},[g,j]=T.useState(C()),[h,l]=T.useState(new Set),m=a=>{j(r=>{const e=new Set(r);return e.has(a)?e.delete(a):e.add(a),e})},S=(a,r)=>{const e=new Set(h),i=f=>{let u=[];return f.forEach(c=>{u.push(c.id),c.children&&(u=u.concat(i(c.children)))}),u},v=(f,u)=>{for(const c of f){if(c.id===u)return c;if(c.children){const w=v(c.children,u);if(w)return w}}return null},x=v(t,a);x&&(r?(e.add(a),x.children&&i(x.children).forEach(f=>e.add(f))):(e.delete(a),x.children&&i(x.children).forEach(f=>e.delete(f))),l(e),o&&o(Array.from(e)))},E=a=>{l(new Set([a])),o&&o([a])},k=[s.default.tree,p&&s.default.treeSelectable,d&&s.default.treeCompact,N].filter(Boolean).join(" ");return n.jsx("div",{className:k,children:t.map(a=>n.jsx(q,{node:a,level:0,selectable:p,compact:d,expandedNodes:g,selectedNodes:h,onToggle:m,onCheck:S,onNodeClick:E},a.id))})};exports.Tree=y;
//# sourceMappingURL=Tree.cjs.map
