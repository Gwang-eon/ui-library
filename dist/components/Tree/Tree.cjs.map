{"version":3,"file":"Tree.cjs","sources":["../../../src/components/Tree/Tree.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ChevronDown, ChevronRight } from 'lucide-react';\nimport styles from './Tree.module.css';\n\n// ===== Types =====\n\nexport interface TreeNodeData {\n  id: string;\n  label: React.ReactNode;\n  icon?: React.ReactNode;\n  children?: TreeNodeData[];\n  badge?: React.ReactNode;\n  disabled?: boolean;\n}\n\nexport interface TreeProps {\n  data: TreeNodeData[];\n  selectable?: boolean;\n  compact?: boolean;\n  defaultExpandAll?: boolean;\n  onSelect?: (nodeIds: string[]) => void;\n  className?: string;\n}\n\ninterface TreeNodeProps {\n  node: TreeNodeData;\n  level: number;\n  selectable?: boolean;\n  compact?: boolean;\n  expandedNodes: Set<string>;\n  selectedNodes: Set<string>;\n  onToggle: (nodeId: string) => void;\n  onCheck: (nodeId: string, checked: boolean) => void;\n  onNodeClick: (nodeId: string) => void;\n}\n\n// ===== Tree Node Component =====\n\nconst TreeNode: React.FC<TreeNodeProps> = ({\n  node,\n  level,\n  selectable,\n  compact,\n  expandedNodes,\n  selectedNodes,\n  onToggle,\n  onCheck,\n  onNodeClick,\n}) => {\n  const hasChildren = node.children && node.children.length > 0;\n  const isExpanded = expandedNodes.has(node.id);\n  const isSelected = selectedNodes.has(node.id);\n  const isLeaf = !hasChildren;\n\n  const handleExpandClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (hasChildren) {\n      onToggle(node.id);\n    }\n  };\n\n  const handleCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.stopPropagation();\n    onCheck(node.id, e.target.checked);\n  };\n\n  const handleContentClick = () => {\n    if (!selectable && !node.disabled) {\n      onNodeClick(node.id);\n    }\n  };\n\n  const nodeClasses = [\n    styles.treeNode,\n    isLeaf && styles.treeNodeLeaf,\n    node.disabled && styles.treeNodeDisabled,\n    isSelected && !selectable && styles.treeNodeSelected,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={nodeClasses}>\n      <div\n        className={styles.treeNodeContent}\n        onClick={handleContentClick}\n        role={!selectable ? 'button' : undefined}\n        tabIndex={!selectable && !node.disabled ? 0 : undefined}\n      >\n        {hasChildren ? (\n          <button\n            className={`${styles.treeExpandBtn} ${\n              isExpanded ? styles.treeExpandBtnExpanded : styles.treeExpandBtnCollapsed\n            }`}\n            onClick={handleExpandClick}\n            aria-expanded={isExpanded}\n            aria-label={isExpanded ? 'Collapse' : 'Expand'}\n          >\n            {isExpanded ? <ChevronDown size={16} /> : <ChevronRight size={16} />}\n          </button>\n        ) : (\n          <span className={styles.treeIndent} />\n        )}\n\n        {selectable && (\n          <input\n            type=\"checkbox\"\n            className={styles.treeCheckbox}\n            checked={isSelected}\n            onChange={handleCheckboxChange}\n            disabled={node.disabled}\n            onClick={(e) => e.stopPropagation()}\n          />\n        )}\n\n        {node.icon && <span className={styles.treeIcon}>{node.icon}</span>}\n\n        <span className={styles.treeLabel}>\n          <span className={styles.treeLabelText}>{node.label}</span>\n        </span>\n\n        {node.badge && <span className={styles.treeBadge}>{node.badge}</span>}\n      </div>\n\n      {hasChildren && isExpanded && (\n        <div className={styles.treeChildren}>\n          {node.children!.map((child) => (\n            <TreeNode\n              key={child.id}\n              node={child}\n              level={level + 1}\n              selectable={selectable}\n              compact={compact}\n              expandedNodes={expandedNodes}\n              selectedNodes={selectedNodes}\n              onToggle={onToggle}\n              onCheck={onCheck}\n              onNodeClick={onNodeClick}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ===== Main Tree Component =====\n\nconst Tree: React.FC<TreeProps> = ({\n  data,\n  selectable = false,\n  compact = false,\n  defaultExpandAll = false,\n  onSelect,\n  className = '',\n}) => {\n  // Initialize expanded nodes\n  const getDefaultExpandedNodes = (): Set<string> => {\n    if (!defaultExpandAll) return new Set();\n\n    const expandedSet = new Set<string>();\n    const traverse = (nodes: TreeNodeData[]) => {\n      nodes.forEach((node) => {\n        if (node.children && node.children.length > 0) {\n          expandedSet.add(node.id);\n          traverse(node.children);\n        }\n      });\n    };\n    traverse(data);\n    return expandedSet;\n  };\n\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(getDefaultExpandedNodes());\n  const [selectedNodes, setSelectedNodes] = useState<Set<string>>(new Set());\n\n  const handleToggle = (nodeId: string) => {\n    setExpandedNodes((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleCheck = (nodeId: string, checked: boolean) => {\n    const newSelectedNodes = new Set(selectedNodes);\n\n    // Helper to get all descendant IDs\n    const getDescendantIds = (nodes: TreeNodeData[]): string[] => {\n      let ids: string[] = [];\n      nodes.forEach((node) => {\n        ids.push(node.id);\n        if (node.children) {\n          ids = ids.concat(getDescendantIds(node.children));\n        }\n      });\n      return ids;\n    };\n\n    // Find the node in the tree\n    const findNode = (nodes: TreeNodeData[], id: string): TreeNodeData | null => {\n      for (const node of nodes) {\n        if (node.id === id) return node;\n        if (node.children) {\n          const found = findNode(node.children, id);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    const targetNode = findNode(data, nodeId);\n    if (!targetNode) return;\n\n    // Update current node and all descendants\n    if (checked) {\n      newSelectedNodes.add(nodeId);\n      if (targetNode.children) {\n        getDescendantIds(targetNode.children).forEach((id) => newSelectedNodes.add(id));\n      }\n    } else {\n      newSelectedNodes.delete(nodeId);\n      if (targetNode.children) {\n        getDescendantIds(targetNode.children).forEach((id) => newSelectedNodes.delete(id));\n      }\n    }\n\n    setSelectedNodes(newSelectedNodes);\n    if (onSelect) {\n      onSelect(Array.from(newSelectedNodes));\n    }\n  };\n\n  const handleNodeClick = (nodeId: string) => {\n    setSelectedNodes(new Set([nodeId]));\n    if (onSelect) {\n      onSelect([nodeId]);\n    }\n  };\n\n  const treeClasses = [\n    styles.tree,\n    selectable && styles.treeSelectable,\n    compact && styles.treeCompact,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={treeClasses}>\n      {data.map((node) => (\n        <TreeNode\n          key={node.id}\n          node={node}\n          level={0}\n          selectable={selectable}\n          compact={compact}\n          expandedNodes={expandedNodes}\n          selectedNodes={selectedNodes}\n          onToggle={handleToggle}\n          onCheck={handleCheck}\n          onNodeClick={handleNodeClick}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport { Tree };\n"],"names":["TreeNode","node","level","selectable","compact","expandedNodes","selectedNodes","onToggle","onCheck","onNodeClick","hasChildren","isExpanded","isSelected","isLeaf","handleExpandClick","handleCheckboxChange","handleContentClick","nodeClasses","styles","jsxs","jsx","ChevronDown","ChevronRight","child","Tree","data","defaultExpandAll","onSelect","className","getDefaultExpandedNodes","expandedSet","traverse","nodes","setExpandedNodes","useState","setSelectedNodes","handleToggle","nodeId","prev","newSet","handleCheck","checked","newSelectedNodes","getDescendantIds","ids","findNode","id","found","targetNode","handleNodeClick","treeClasses"],"mappings":"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"}