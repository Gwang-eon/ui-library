"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react/jsx-runtime"),u=require("react"),T=require("lucide-react"),P=require("../Button/Button.cjs"),l=require("./ColorPicker.module.css.cjs"),j=d=>{const m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:null},U=(d,m,y)=>"#"+[d,m,y].map(N=>{const f=N.toString(16);return f.length===1?"0"+f:f}).join("").toUpperCase(),R=d=>/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(d),W=["#EF4444","#F59E0B","#10B981","#3B82F6","#6366F1","#8B5CF6","#EC4899","#14B8A6","#F97316","#06B6D4","#84CC16","#64748B"],G="color-picker-recent",X=5,H=({value:d,defaultValue:m="#3B82F6",onChange:y,label:N,presets:f=W,showRecent:C=!0,compact:A=!1,size:z="md",allowCustom:B=!0,disabled:i=!1,className:$="",children:E})=>{const L=d!==void 0,[_,q]=u.useState(m),o=L?d:_,[b,h]=u.useState(!1),[n,x]=u.useState(o),[c,p]=u.useState(j(o)||{r:59,g:130,b:246}),[S,V]=u.useState([]),k=u.useRef(null),[w,I]=u.useState(!1);u.useEffect(()=>{if(C)try{const a=localStorage.getItem(G);a&&V(JSON.parse(a))}catch(a){console.error("Failed to load recent colors:",a)}},[C]),u.useEffect(()=>{x(o);const a=j(o);a&&p(a)},[o]);const g=a=>{if(!R(a))return;const t=a.startsWith("#")?a:`#${a}`;if(L||q(t),y?.(t),C){const r=[t,...S.filter(s=>s!==t)].slice(0,X);V(r);try{localStorage.setItem(G,JSON.stringify(r))}catch(s){console.error("Failed to save recent colors:",s)}}},F=a=>{const t=a.target.value;if(x(t),R(t)){const r=t.startsWith("#")?t:`#${t}`,s=j(r);s&&p(s)}},v=(a,t)=>{const r=Math.max(0,Math.min(255,parseInt(t)||0)),s={...c,[a]:r};p(s);const M=U(s.r,s.g,s.b);x(M)},O=()=>{if(R(n)){const a=n.startsWith("#")?n:`#${n}`;g(a),h(!1)}},D=()=>{x(o);const a=j(o);a&&p(a),h(!1)};return u.useEffect(()=>{const a=t=>{k.current&&!k.current.contains(t.target)&&(h(!1),I(!1))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),A?e.jsxs("div",{className:`${l.default.colorPickerCompact} ${$}`,ref:k,children:[N&&e.jsx("label",{className:l.default.colorPickerLabel,children:N}),e.jsxs("div",{className:`${l.default.colorSwatches} ${z==="sm"?l.default.colorSwatchesSm:""}`,children:[f.map(a=>e.jsx("button",{type:"button",className:`${l.default.colorSwatchBtn} ${o===a?l.default.colorSwatchBtnActive:""}`,style:{backgroundColor:a},onClick:()=>g(a),title:a,"aria-label":`Select color ${a}`,disabled:i},a)),B&&e.jsx("button",{type:"button",className:`${l.default.colorSwatchBtn} ${l.default.colorSwatchBtnCustom}`,onClick:()=>I(!w),"aria-label":"Custom color",disabled:i,children:e.jsx(T.Plus,{size:14})})]}),w&&B&&e.jsx("div",{className:l.default.colorPickerDropdown,children:e.jsxs("div",{className:l.default.colorPickerPanel,children:[e.jsxs("div",{className:l.default.colorPickerHeader,children:[e.jsx("h3",{className:l.default.colorPickerTitle,children:"Choose Color"}),e.jsxs("div",{className:l.default.colorPickerPreview,children:[e.jsx("div",{className:`${l.default.colorSwatch} ${l.default.colorSwatchLg}`,style:{backgroundColor:n}}),e.jsxs("div",{className:l.default.colorValue,children:[e.jsx("span",{className:l.default.colorValueHex,children:n}),e.jsxs("span",{className:l.default.colorValueRgb,children:["RGB(",c.r,", ",c.g,", ",c.b,")"]})]})]})]}),e.jsxs("div",{className:l.default.colorPickerBody,children:[e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"HEX"}),e.jsx("input",{type:"text",className:l.default.colorInputText,value:n,onChange:F})]}),e.jsxs("div",{className:l.default.colorInputRow,children:[e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"R"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.r,onChange:a=>v("r",a.target.value),min:"0",max:"255"})]}),e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"G"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.g,onChange:a=>v("g",a.target.value),min:"0",max:"255"})]}),e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"B"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.b,onChange:a=>v("b",a.target.value),min:"0",max:"255"})]})]})]}),e.jsxs("div",{className:l.default.colorPickerFooter,children:[e.jsx(P.Button,{variant:"secondary",size:"sm",onClick:()=>I(!1),children:"Cancel"}),e.jsx(P.Button,{variant:"primary",size:"sm",onClick:()=>{O(),I(!1)},children:"Apply"})]})]})})]}):e.jsxs("div",{className:`${l.default.colorPicker} ${$}`,ref:k,children:[N&&e.jsx("label",{className:l.default.colorPickerLabel,children:N}),E?e.jsx("div",{onClick:()=>!i&&h(!b),children:E}):e.jsxs("div",{className:l.default.colorPickerTrigger,children:[e.jsx("div",{className:l.default.colorSwatch,style:{backgroundColor:o},onClick:()=>!i&&h(!b)}),e.jsx("input",{type:"text",className:l.default.colorInput,value:o,readOnly:!0,onClick:()=>!i&&h(!b),disabled:i}),e.jsx("button",{type:"button",className:l.default.colorPickerBtn,onClick:()=>!i&&h(!b),"aria-label":"Open color picker",disabled:i,children:e.jsx(T.Palette,{size:16})})]}),b&&!i&&e.jsx("div",{className:l.default.colorPickerDropdown,children:e.jsxs("div",{className:l.default.colorPickerPanel,children:[e.jsxs("div",{className:l.default.colorPickerHeader,children:[e.jsx("h3",{className:l.default.colorPickerTitle,children:"Choose Color"}),e.jsxs("div",{className:l.default.colorPickerPreview,children:[e.jsx("div",{className:`${l.default.colorSwatch} ${l.default.colorSwatchLg}`,style:{backgroundColor:n}}),e.jsxs("div",{className:l.default.colorValue,children:[e.jsx("span",{className:l.default.colorValueHex,children:n}),e.jsxs("span",{className:l.default.colorValueRgb,children:["RGB(",c.r,", ",c.g,", ",c.b,")"]})]})]})]}),e.jsxs("div",{className:l.default.colorPickerBody,children:[e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"HEX"}),e.jsx("input",{type:"text",className:l.default.colorInputText,value:n,onChange:F})]}),e.jsxs("div",{className:l.default.colorInputRow,children:[e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"R"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.r,onChange:a=>v("r",a.target.value),min:"0",max:"255"})]}),e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"G"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.g,onChange:a=>v("g",a.target.value),min:"0",max:"255"})]}),e.jsxs("div",{className:l.default.colorInputGroup,children:[e.jsx("label",{className:l.default.colorInputLabel,children:"B"}),e.jsx("input",{type:"number",className:l.default.colorInputNumber,value:c.b,onChange:a=>v("b",a.target.value),min:"0",max:"255"})]})]}),f.length>0&&e.jsxs("div",{className:l.default.colorPresets,children:[e.jsx("h4",{className:l.default.colorPresetsTitle,children:"Preset Colors"}),e.jsx("div",{className:l.default.colorPresetsGrid,children:f.map(a=>e.jsx("button",{type:"button",className:l.default.colorPresetItem,style:{backgroundColor:a},onClick:()=>{g(a),x(a);const t=j(a);t&&p(t)},title:a,"aria-label":`Select preset color ${a}`},a))})]}),C&&S.length>0&&e.jsxs("div",{className:l.default.colorRecent,children:[e.jsx("h4",{className:l.default.colorRecentTitle,children:"Recent Colors"}),e.jsx("div",{className:l.default.colorRecentList,children:S.map((a,t)=>e.jsx("div",{className:l.default.colorRecentItem,style:{backgroundColor:a},onClick:()=>{g(a),x(a);const r=j(a);r&&p(r)},title:a,role:"button",tabIndex:0,onKeyDown:r=>{if(r.key==="Enter"||r.key===" "){g(a),x(a);const s=j(a);s&&p(s)}}},`${a}-${t}`))})]})]}),e.jsxs("div",{className:l.default.colorPickerFooter,children:[e.jsx(P.Button,{variant:"secondary",size:"sm",onClick:D,children:"Cancel"}),e.jsx(P.Button,{variant:"primary",size:"sm",onClick:O,children:"Apply"})]})]})})]})};H.displayName="ColorPicker";exports.ColorPicker=H;
//# sourceMappingURL=ColorPicker.cjs.map
