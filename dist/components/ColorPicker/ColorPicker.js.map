{"version":3,"file":"ColorPicker.js","sources":["../../../src/components/ColorPicker/ColorPicker.tsx"],"sourcesContent":["import type { ReactNode } from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { Palette, Plus } from 'lucide-react';\nimport { Button } from '../Button';\nimport styles from './ColorPicker.module.css';\n\n// Color utility functions\nconst hexToRgb = (hex: string): { r: number; g: number; b: number } | null => {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n};\n\nconst rgbToHex = (r: number, g: number, b: number): string => {\n  return (\n    '#' +\n    [r, g, b]\n      .map((x) => {\n        const hex = x.toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n      })\n      .join('')\n      .toUpperCase()\n  );\n};\n\nconst isValidHex = (hex: string): boolean => {\n  return /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(hex);\n};\n\nexport interface ColorPickerProps {\n  /** Selected color value (controlled) */\n  value?: string;\n  /** Default color value (uncontrolled) */\n  defaultValue?: string;\n  /** Change handler */\n  onChange?: (color: string) => void;\n  /** Label for the color picker */\n  label?: string;\n  /** Preset colors */\n  presets?: string[];\n  /** Show recent colors */\n  showRecent?: boolean;\n  /** Compact mode (swatch buttons only) */\n  compact?: boolean;\n  /** Small size for compact mode */\n  size?: 'sm' | 'md';\n  /** Allow custom color input */\n  allowCustom?: boolean;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Additional CSS class */\n  className?: string;\n  /** Custom trigger element */\n  children?: ReactNode;\n}\n\nconst DEFAULT_PRESETS = [\n  '#EF4444', // red\n  '#F59E0B', // orange\n  '#10B981', // green\n  '#3B82F6', // blue\n  '#6366F1', // indigo\n  '#8B5CF6', // purple\n  '#EC4899', // pink\n  '#14B8A6', // teal\n  '#F97316', // orange-2\n  '#06B6D4', // cyan\n  '#84CC16', // lime\n  '#64748B', // slate\n];\n\nconst RECENT_COLORS_KEY = 'color-picker-recent';\nconst MAX_RECENT_COLORS = 5;\n\n/**\n * Color Picker Component\n *\n * Select and customize colors with hex, RGB input and preset swatches.\n * Supports both full panel mode and compact swatch mode.\n *\n * @example\n * ```tsx\n * <ColorPicker\n *   label=\"Theme Color\"\n *   defaultValue=\"#3B82F6\"\n *   onChange={(color) => console.log(color)}\n * />\n * ```\n *\n * @example\n * ```tsx\n * // Compact mode\n * <ColorPicker\n *   compact\n *   presets={['#EF4444', '#10B981', '#3B82F6']}\n *   onChange={(color) => console.log(color)}\n * />\n * ```\n */\nexport const ColorPicker = ({\n  value: controlledValue,\n  defaultValue = '#3B82F6',\n  onChange,\n  label,\n  presets = DEFAULT_PRESETS,\n  showRecent = true,\n  compact = false,\n  size = 'md',\n  allowCustom = true,\n  disabled = false,\n  className = '',\n  children,\n}: ColorPickerProps) => {\n  // Controlled/uncontrolled value management\n  const isControlled = controlledValue !== undefined;\n  const [uncontrolledValue, setUncontrolledValue] = useState(defaultValue);\n  const currentValue = isControlled ? controlledValue : uncontrolledValue;\n\n  // Component state\n  const [isOpen, setIsOpen] = useState(false);\n  const [hexInput, setHexInput] = useState(currentValue);\n  const [rgb, setRgb] = useState(hexToRgb(currentValue) || { r: 59, g: 130, b: 246 });\n  const [recentColors, setRecentColors] = useState<string[]>([]);\n\n  // Refs\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [customPickerOpen, setCustomPickerOpen] = useState(false);\n\n  // Load recent colors from localStorage\n  useEffect(() => {\n    if (showRecent) {\n      try {\n        const stored = localStorage.getItem(RECENT_COLORS_KEY);\n        if (stored) {\n          setRecentColors(JSON.parse(stored));\n        }\n      } catch (e) {\n        console.error('Failed to load recent colors:', e);\n      }\n    }\n  }, [showRecent]);\n\n  // Sync hex and rgb when value changes\n  useEffect(() => {\n    setHexInput(currentValue);\n    const rgbValue = hexToRgb(currentValue);\n    if (rgbValue) {\n      setRgb(rgbValue);\n    }\n  }, [currentValue]);\n\n  // Handle color selection\n  const handleColorChange = (newColor: string) => {\n    if (!isValidHex(newColor)) return;\n\n    // Ensure color starts with #\n    const color = newColor.startsWith('#') ? newColor : `#${newColor}`;\n\n    if (!isControlled) {\n      setUncontrolledValue(color);\n    }\n\n    onChange?.(color);\n\n    // Save to recent colors\n    if (showRecent) {\n      const updated = [color, ...recentColors.filter((c) => c !== color)].slice(\n        0,\n        MAX_RECENT_COLORS\n      );\n      setRecentColors(updated);\n      try {\n        localStorage.setItem(RECENT_COLORS_KEY, JSON.stringify(updated));\n      } catch (e) {\n        console.error('Failed to save recent colors:', e);\n      }\n    }\n  };\n\n  // Handle HEX input change\n  const handleHexChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setHexInput(value);\n\n    if (isValidHex(value)) {\n      const color = value.startsWith('#') ? value : `#${value}`;\n      const rgbValue = hexToRgb(color);\n      if (rgbValue) {\n        setRgb(rgbValue);\n      }\n    }\n  };\n\n  // Handle RGB input change\n  const handleRgbChange = (channel: 'r' | 'g' | 'b', value: string) => {\n    const numValue = Math.max(0, Math.min(255, parseInt(value) || 0));\n    const newRgb = { ...rgb, [channel]: numValue };\n    setRgb(newRgb);\n\n    const hex = rgbToHex(newRgb.r, newRgb.g, newRgb.b);\n    setHexInput(hex);\n  };\n\n  // Handle apply button\n  const handleApply = () => {\n    if (isValidHex(hexInput)) {\n      const color = hexInput.startsWith('#') ? hexInput : `#${hexInput}`;\n      handleColorChange(color);\n      setIsOpen(false);\n    }\n  };\n\n  // Handle cancel button\n  const handleCancel = () => {\n    setHexInput(currentValue);\n    const rgbValue = hexToRgb(currentValue);\n    if (rgbValue) {\n      setRgb(rgbValue);\n    }\n    setIsOpen(false);\n  };\n\n  // Click outside to close\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setCustomPickerOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Compact mode\n  if (compact) {\n    return (\n      <div className={`${styles.colorPickerCompact} ${className}`} ref={containerRef}>\n        {label && <label className={styles.colorPickerLabel}>{label}</label>}\n        <div className={`${styles.colorSwatches} ${size === 'sm' ? styles.colorSwatchesSm : ''}`}>\n          {presets.map((color) => (\n            <button\n              key={color}\n              type=\"button\"\n              className={`${styles.colorSwatchBtn} ${\n                currentValue === color ? styles.colorSwatchBtnActive : ''\n              }`}\n              style={{ backgroundColor: color }}\n              onClick={() => handleColorChange(color)}\n              title={color}\n              aria-label={`Select color ${color}`}\n              disabled={disabled}\n            />\n          ))}\n          {allowCustom && (\n            <button\n              type=\"button\"\n              className={`${styles.colorSwatchBtn} ${styles.colorSwatchBtnCustom}`}\n              onClick={() => setCustomPickerOpen(!customPickerOpen)}\n              aria-label=\"Custom color\"\n              disabled={disabled}\n            >\n              <Plus size={14} />\n            </button>\n          )}\n        </div>\n\n        {customPickerOpen && allowCustom && (\n          <div className={styles.colorPickerDropdown}>\n            <div className={styles.colorPickerPanel}>\n              <div className={styles.colorPickerHeader}>\n                <h3 className={styles.colorPickerTitle}>Choose Color</h3>\n                <div className={styles.colorPickerPreview}>\n                  <div\n                    className={`${styles.colorSwatch} ${styles.colorSwatchLg}`}\n                    style={{ backgroundColor: hexInput }}\n                  />\n                  <div className={styles.colorValue}>\n                    <span className={styles.colorValueHex}>{hexInput}</span>\n                    <span className={styles.colorValueRgb}>\n                      RGB({rgb.r}, {rgb.g}, {rgb.b})\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              <div className={styles.colorPickerBody}>\n                <div className={styles.colorInputGroup}>\n                  <label className={styles.colorInputLabel}>HEX</label>\n                  <input\n                    type=\"text\"\n                    className={styles.colorInputText}\n                    value={hexInput}\n                    onChange={handleHexChange}\n                  />\n                </div>\n\n                <div className={styles.colorInputRow}>\n                  <div className={styles.colorInputGroup}>\n                    <label className={styles.colorInputLabel}>R</label>\n                    <input\n                      type=\"number\"\n                      className={styles.colorInputNumber}\n                      value={rgb.r}\n                      onChange={(e) => handleRgbChange('r', e.target.value)}\n                      min=\"0\"\n                      max=\"255\"\n                    />\n                  </div>\n                  <div className={styles.colorInputGroup}>\n                    <label className={styles.colorInputLabel}>G</label>\n                    <input\n                      type=\"number\"\n                      className={styles.colorInputNumber}\n                      value={rgb.g}\n                      onChange={(e) => handleRgbChange('g', e.target.value)}\n                      min=\"0\"\n                      max=\"255\"\n                    />\n                  </div>\n                  <div className={styles.colorInputGroup}>\n                    <label className={styles.colorInputLabel}>B</label>\n                    <input\n                      type=\"number\"\n                      className={styles.colorInputNumber}\n                      value={rgb.b}\n                      onChange={(e) => handleRgbChange('b', e.target.value)}\n                      min=\"0\"\n                      max=\"255\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div className={styles.colorPickerFooter}>\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={() => setCustomPickerOpen(false)}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  variant=\"primary\"\n                  size=\"sm\"\n                  onClick={() => {\n                    handleApply();\n                    setCustomPickerOpen(false);\n                  }}\n                >\n                  Apply\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Full mode\n  return (\n    <div className={`${styles.colorPicker} ${className}`} ref={containerRef}>\n      {label && <label className={styles.colorPickerLabel}>{label}</label>}\n\n      {children ? (\n        <div onClick={() => !disabled && setIsOpen(!isOpen)}>{children}</div>\n      ) : (\n        <div className={styles.colorPickerTrigger}>\n          <div\n            className={styles.colorSwatch}\n            style={{ backgroundColor: currentValue }}\n            onClick={() => !disabled && setIsOpen(!isOpen)}\n          />\n          <input\n            type=\"text\"\n            className={styles.colorInput}\n            value={currentValue}\n            readOnly\n            onClick={() => !disabled && setIsOpen(!isOpen)}\n            disabled={disabled}\n          />\n          <button\n            type=\"button\"\n            className={styles.colorPickerBtn}\n            onClick={() => !disabled && setIsOpen(!isOpen)}\n            aria-label=\"Open color picker\"\n            disabled={disabled}\n          >\n            <Palette size={16} />\n          </button>\n        </div>\n      )}\n\n      {isOpen && !disabled && (\n        <div className={styles.colorPickerDropdown}>\n          <div className={styles.colorPickerPanel}>\n            <div className={styles.colorPickerHeader}>\n              <h3 className={styles.colorPickerTitle}>Choose Color</h3>\n              <div className={styles.colorPickerPreview}>\n                <div\n                  className={`${styles.colorSwatch} ${styles.colorSwatchLg}`}\n                  style={{ backgroundColor: hexInput }}\n                />\n                <div className={styles.colorValue}>\n                  <span className={styles.colorValueHex}>{hexInput}</span>\n                  <span className={styles.colorValueRgb}>\n                    RGB({rgb.r}, {rgb.g}, {rgb.b})\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className={styles.colorPickerBody}>\n              <div className={styles.colorInputGroup}>\n                <label className={styles.colorInputLabel}>HEX</label>\n                <input\n                  type=\"text\"\n                  className={styles.colorInputText}\n                  value={hexInput}\n                  onChange={handleHexChange}\n                />\n              </div>\n\n              <div className={styles.colorInputRow}>\n                <div className={styles.colorInputGroup}>\n                  <label className={styles.colorInputLabel}>R</label>\n                  <input\n                    type=\"number\"\n                    className={styles.colorInputNumber}\n                    value={rgb.r}\n                    onChange={(e) => handleRgbChange('r', e.target.value)}\n                    min=\"0\"\n                    max=\"255\"\n                  />\n                </div>\n                <div className={styles.colorInputGroup}>\n                  <label className={styles.colorInputLabel}>G</label>\n                  <input\n                    type=\"number\"\n                    className={styles.colorInputNumber}\n                    value={rgb.g}\n                    onChange={(e) => handleRgbChange('g', e.target.value)}\n                    min=\"0\"\n                    max=\"255\"\n                  />\n                </div>\n                <div className={styles.colorInputGroup}>\n                  <label className={styles.colorInputLabel}>B</label>\n                  <input\n                    type=\"number\"\n                    className={styles.colorInputNumber}\n                    value={rgb.b}\n                    onChange={(e) => handleRgbChange('b', e.target.value)}\n                    min=\"0\"\n                    max=\"255\"\n                  />\n                </div>\n              </div>\n\n              {presets.length > 0 && (\n                <div className={styles.colorPresets}>\n                  <h4 className={styles.colorPresetsTitle}>Preset Colors</h4>\n                  <div className={styles.colorPresetsGrid}>\n                    {presets.map((color) => (\n                      <button\n                        key={color}\n                        type=\"button\"\n                        className={styles.colorPresetItem}\n                        style={{ backgroundColor: color }}\n                        onClick={() => {\n                          handleColorChange(color);\n                          setHexInput(color);\n                          const rgbValue = hexToRgb(color);\n                          if (rgbValue) {\n                            setRgb(rgbValue);\n                          }\n                        }}\n                        title={color}\n                        aria-label={`Select preset color ${color}`}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {showRecent && recentColors.length > 0 && (\n                <div className={styles.colorRecent}>\n                  <h4 className={styles.colorRecentTitle}>Recent Colors</h4>\n                  <div className={styles.colorRecentList}>\n                    {recentColors.map((color, index) => (\n                      <div\n                        key={`${color}-${index}`}\n                        className={styles.colorRecentItem}\n                        style={{ backgroundColor: color }}\n                        onClick={() => {\n                          handleColorChange(color);\n                          setHexInput(color);\n                          const rgbValue = hexToRgb(color);\n                          if (rgbValue) {\n                            setRgb(rgbValue);\n                          }\n                        }}\n                        title={color}\n                        role=\"button\"\n                        tabIndex={0}\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' || e.key === ' ') {\n                            handleColorChange(color);\n                            setHexInput(color);\n                            const rgbValue = hexToRgb(color);\n                            if (rgbValue) {\n                              setRgb(rgbValue);\n                            }\n                          }\n                        }}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className={styles.colorPickerFooter}>\n              <Button variant=\"secondary\" size=\"sm\" onClick={handleCancel}>\n                Cancel\n              </Button>\n              <Button variant=\"primary\" size=\"sm\" onClick={handleApply}>\n                Apply\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nColorPicker.displayName = 'ColorPicker';\n"],"names":["hexToRgb","hex","result","rgbToHex","r","g","b","x","isValidHex","DEFAULT_PRESETS","RECENT_COLORS_KEY","MAX_RECENT_COLORS","ColorPicker","controlledValue","defaultValue","onChange","label","presets","showRecent","compact","size","allowCustom","disabled","className","children","isControlled","uncontrolledValue","setUncontrolledValue","useState","currentValue","isOpen","setIsOpen","hexInput","setHexInput","rgb","setRgb","recentColors","setRecentColors","containerRef","useRef","customPickerOpen","setCustomPickerOpen","useEffect","stored","e","rgbValue","handleColorChange","newColor","color","updated","c","handleHexChange","value","handleRgbChange","channel","numValue","newRgb","handleApply","handleCancel","handleClickOutside","event","jsxs","styles","jsx","Plus","Button","Palette","index"],"mappings":"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"}