{"version":3,"file":"Drawer.cjs","sources":["../../../src/components/Drawer/Drawer.tsx"],"sourcesContent":["import { useEffect, useRef, useCallback } from 'react';\nimport type { ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\nimport { X } from 'lucide-react';\nimport styles from './Drawer.module.css';\n\nexport interface DrawerProps {\n  /** Whether the drawer is open */\n  open: boolean;\n  /** Callback when drawer should close */\n  onClose: () => void;\n  /** Drawer placement */\n  placement?: 'left' | 'right' | 'top' | 'bottom';\n  /** Drawer size */\n  size?: 'sm' | 'md' | 'lg';\n  /** Close drawer when clicking overlay */\n  closeOnOverlayClick?: boolean;\n  /** Close drawer when pressing Escape */\n  closeOnEsc?: boolean;\n  /** Drawer content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n  /** ARIA label for the drawer */\n  'aria-label'?: string;\n  /** ID of element that labels the drawer */\n  'aria-labelledby'?: string;\n}\n\nexport interface DrawerHeaderProps {\n  /** Header content */\n  children: ReactNode;\n  /** Show close button */\n  showClose?: boolean;\n  /** Callback when close button is clicked */\n  onClose?: () => void;\n  /** Additional CSS class */\n  className?: string;\n}\n\nexport interface DrawerBodyProps {\n  /** Body content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n}\n\nexport interface DrawerFooterProps {\n  /** Footer content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Drawer Component\n *\n * Slide-in panel for navigation, filters, or additional content.\n * Supports four placements (left, right, top, bottom) and three sizes.\n *\n * @example\n * ```tsx\n * <Drawer open={isOpen} onClose={() => setIsOpen(false)} placement=\"right\">\n *   <Drawer.Header>Filters</Drawer.Header>\n *   <Drawer.Body>\n *     <p>Filter content here</p>\n *   </Drawer.Body>\n *   <Drawer.Footer>\n *     <Button onClick={() => setIsOpen(false)}>Apply</Button>\n *   </Drawer.Footer>\n * </Drawer>\n * ```\n */\nexport const Drawer = ({\n  open,\n  onClose,\n  placement = 'right',\n  size = 'md',\n  closeOnOverlayClick = true,\n  closeOnEsc = true,\n  children,\n  className,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledby,\n}: DrawerProps) => {\n  const drawerRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  // Handle overlay click\n  const handleOverlayClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (closeOnOverlayClick && e.target === e.currentTarget) {\n        onClose();\n      }\n    },\n    [closeOnOverlayClick, onClose]\n  );\n\n  // Handle Escape key\n  useEffect(() => {\n    if (!open || !closeOnEsc) return;\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [open, closeOnEsc, onClose]);\n\n  // Prevent body scroll when drawer is open\n  useEffect(() => {\n    if (open) {\n      const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n      document.body.style.overflow = 'hidden';\n      document.body.style.paddingRight = `${scrollbarWidth}px`;\n    } else {\n      document.body.style.overflow = '';\n      document.body.style.paddingRight = '';\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n      document.body.style.paddingRight = '';\n    };\n  }, [open]);\n\n  // Focus management\n  useEffect(() => {\n    if (open && drawerRef.current) {\n      // Store the previously focused element\n      previousActiveElement.current = document.activeElement as HTMLElement;\n\n      // Focus the first focusable element in the drawer\n      const focusableElements = drawerRef.current.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      const firstFocusable = focusableElements[0] as HTMLElement;\n      if (firstFocusable) {\n        firstFocusable.focus();\n      }\n    } else if (!open && previousActiveElement.current) {\n      // Return focus to the trigger element\n      previousActiveElement.current.focus();\n      previousActiveElement.current = null;\n    }\n  }, [open]);\n\n  // Focus trap\n  useEffect(() => {\n    if (!open || !drawerRef.current) return;\n\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab' || !drawerRef.current) return;\n\n      const focusableElements = Array.from(\n        drawerRef.current.querySelectorAll(\n          'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        )\n      ) as HTMLElement[];\n\n      const firstFocusable = focusableElements[0];\n      const lastFocusable = focusableElements[focusableElements.length - 1];\n\n      if (e.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstFocusable) {\n          e.preventDefault();\n          lastFocusable?.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastFocusable) {\n          e.preventDefault();\n          firstFocusable?.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleTab);\n    return () => document.removeEventListener('keydown', handleTab);\n  }, [open]);\n\n  if (!open) return null;\n\n  const containerClasses = [\n    styles.drawer,\n    styles[`drawer-${placement}`],\n    size !== 'md' && styles[`drawer-${size}`],\n    open && styles.drawerOpen,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const drawerContent = (\n    <div className={containerClasses}>\n      <div className={styles.drawerOverlay} onClick={handleOverlayClick} />\n      <div\n        ref={drawerRef}\n        className={styles.drawerContent}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledby}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  return createPortal(drawerContent, document.body);\n};\n\n/**\n * Drawer Header Component\n *\n * Contains the drawer title and close button.\n */\nconst DrawerHeader = ({\n  children,\n  showClose = true,\n  onClose,\n  className,\n}: DrawerHeaderProps) => {\n  const headerClasses = [styles.drawerHeader, className].filter(Boolean).join(' ');\n\n  return (\n    <div className={headerClasses}>\n      <div className={styles.drawerTitle}>{children}</div>\n      {showClose && onClose && (\n        <button\n          className={styles.drawerClose}\n          onClick={onClose}\n          aria-label=\"Close drawer\"\n          type=\"button\"\n        >\n          <X />\n        </button>\n      )}\n    </div>\n  );\n};\n\n/**\n * Drawer Body Component\n *\n * Contains the main drawer content with scrolling support.\n */\nconst DrawerBody = ({ children, className }: DrawerBodyProps) => {\n  const bodyClasses = [styles.drawerBody, className].filter(Boolean).join(' ');\n\n  return <div className={bodyClasses}>{children}</div>;\n};\n\n/**\n * Drawer Footer Component\n *\n * Contains action buttons or additional controls.\n */\nconst DrawerFooter = ({ children, className }: DrawerFooterProps) => {\n  const footerClasses = [styles.drawerFooter, className].filter(Boolean).join(' ');\n\n  return <div className={footerClasses}>{children}</div>;\n};\n\nDrawer.Header = DrawerHeader;\nDrawer.Body = DrawerBody;\nDrawer.Footer = DrawerFooter;\nDrawer.displayName = 'Drawer';\nDrawerHeader.displayName = 'Drawer.Header';\nDrawerBody.displayName = 'Drawer.Body';\nDrawerFooter.displayName = 'Drawer.Footer';\n"],"names":["Drawer","open","onClose","placement","size","closeOnOverlayClick","closeOnEsc","children","className","ariaLabel","ariaLabelledby","drawerRef","useRef","previousActiveElement","handleOverlayClick","useCallback","e","useEffect","handleEscape","scrollbarWidth","firstFocusable","handleTab","focusableElements","lastFocusable","containerClasses","styles","drawerContent","jsxs","jsx","createPortal","DrawerHeader","showClose","headerClasses","X","DrawerBody","bodyClasses","DrawerFooter","footerClasses"],"mappings":"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"}