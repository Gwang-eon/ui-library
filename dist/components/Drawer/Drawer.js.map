{"version":3,"file":"Drawer.js","sources":["../../../src/components/Drawer/Drawer.tsx"],"sourcesContent":["import { useEffect, useRef, useCallback } from 'react';\nimport type { ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\nimport { X } from 'lucide-react';\nimport styles from './Drawer.module.css';\n\nexport interface DrawerProps {\n  /** Whether the drawer is open */\n  open: boolean;\n  /** Callback when drawer should close */\n  onClose: () => void;\n  /** Drawer placement */\n  placement?: 'left' | 'right' | 'top' | 'bottom';\n  /** Drawer size */\n  size?: 'sm' | 'md' | 'lg';\n  /** Close drawer when clicking overlay */\n  closeOnOverlayClick?: boolean;\n  /** Close drawer when pressing Escape */\n  closeOnEsc?: boolean;\n  /** Drawer content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n  /** ARIA label for the drawer */\n  'aria-label'?: string;\n  /** ID of element that labels the drawer */\n  'aria-labelledby'?: string;\n}\n\nexport interface DrawerHeaderProps {\n  /** Header content */\n  children: ReactNode;\n  /** Show close button */\n  showClose?: boolean;\n  /** Callback when close button is clicked */\n  onClose?: () => void;\n  /** Additional CSS class */\n  className?: string;\n}\n\nexport interface DrawerBodyProps {\n  /** Body content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n}\n\nexport interface DrawerFooterProps {\n  /** Footer content */\n  children: ReactNode;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Drawer Component\n *\n * Slide-in panel for navigation, filters, or additional content.\n * Supports four placements (left, right, top, bottom) and three sizes.\n *\n * @example\n * ```tsx\n * <Drawer open={isOpen} onClose={() => setIsOpen(false)} placement=\"right\">\n *   <Drawer.Header>Filters</Drawer.Header>\n *   <Drawer.Body>\n *     <p>Filter content here</p>\n *   </Drawer.Body>\n *   <Drawer.Footer>\n *     <Button onClick={() => setIsOpen(false)}>Apply</Button>\n *   </Drawer.Footer>\n * </Drawer>\n * ```\n */\nexport const Drawer = ({\n  open,\n  onClose,\n  placement = 'right',\n  size = 'md',\n  closeOnOverlayClick = true,\n  closeOnEsc = true,\n  children,\n  className,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledby,\n}: DrawerProps) => {\n  const drawerRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  // Handle overlay click\n  const handleOverlayClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (closeOnOverlayClick && e.target === e.currentTarget) {\n        onClose();\n      }\n    },\n    [closeOnOverlayClick, onClose]\n  );\n\n  // Handle Escape key\n  useEffect(() => {\n    if (!open || !closeOnEsc) return;\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [open, closeOnEsc, onClose]);\n\n  // Prevent body scroll when drawer is open\n  useEffect(() => {\n    if (open) {\n      const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n      document.body.style.overflow = 'hidden';\n      document.body.style.paddingRight = `${scrollbarWidth}px`;\n    } else {\n      document.body.style.overflow = '';\n      document.body.style.paddingRight = '';\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n      document.body.style.paddingRight = '';\n    };\n  }, [open]);\n\n  // Focus management\n  useEffect(() => {\n    if (open && drawerRef.current) {\n      // Store the previously focused element\n      previousActiveElement.current = document.activeElement as HTMLElement;\n\n      // Focus the first focusable element in the drawer\n      const focusableElements = drawerRef.current.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      const firstFocusable = focusableElements[0] as HTMLElement;\n      if (firstFocusable) {\n        firstFocusable.focus();\n      }\n    } else if (!open && previousActiveElement.current) {\n      // Return focus to the trigger element\n      previousActiveElement.current.focus();\n      previousActiveElement.current = null;\n    }\n  }, [open]);\n\n  // Focus trap\n  useEffect(() => {\n    if (!open || !drawerRef.current) return;\n\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab' || !drawerRef.current) return;\n\n      const focusableElements = Array.from(\n        drawerRef.current.querySelectorAll(\n          'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        )\n      ) as HTMLElement[];\n\n      const firstFocusable = focusableElements[0];\n      const lastFocusable = focusableElements[focusableElements.length - 1];\n\n      if (e.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstFocusable) {\n          e.preventDefault();\n          lastFocusable?.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastFocusable) {\n          e.preventDefault();\n          firstFocusable?.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleTab);\n    return () => document.removeEventListener('keydown', handleTab);\n  }, [open]);\n\n  if (!open) return null;\n\n  const containerClasses = [\n    styles.drawer,\n    styles[`drawer-${placement}`],\n    size !== 'md' && styles[`drawer-${size}`],\n    open && styles.drawerOpen,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const drawerContent = (\n    <div className={containerClasses}>\n      <div className={styles.drawerOverlay} onClick={handleOverlayClick} />\n      <div\n        ref={drawerRef}\n        className={styles.drawerContent}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledby}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  return createPortal(drawerContent, document.body);\n};\n\n/**\n * Drawer Header Component\n *\n * Contains the drawer title and close button.\n */\nconst DrawerHeader = ({\n  children,\n  showClose = true,\n  onClose,\n  className,\n}: DrawerHeaderProps) => {\n  const headerClasses = [styles.drawerHeader, className].filter(Boolean).join(' ');\n\n  return (\n    <div className={headerClasses}>\n      <div className={styles.drawerTitle}>{children}</div>\n      {showClose && onClose && (\n        <button\n          className={styles.drawerClose}\n          onClick={onClose}\n          aria-label=\"Close drawer\"\n          type=\"button\"\n        >\n          <X />\n        </button>\n      )}\n    </div>\n  );\n};\n\n/**\n * Drawer Body Component\n *\n * Contains the main drawer content with scrolling support.\n */\nconst DrawerBody = ({ children, className }: DrawerBodyProps) => {\n  const bodyClasses = [styles.drawerBody, className].filter(Boolean).join(' ');\n\n  return <div className={bodyClasses}>{children}</div>;\n};\n\n/**\n * Drawer Footer Component\n *\n * Contains action buttons or additional controls.\n */\nconst DrawerFooter = ({ children, className }: DrawerFooterProps) => {\n  const footerClasses = [styles.drawerFooter, className].filter(Boolean).join(' ');\n\n  return <div className={footerClasses}>{children}</div>;\n};\n\nDrawer.Header = DrawerHeader;\nDrawer.Body = DrawerBody;\nDrawer.Footer = DrawerFooter;\nDrawer.displayName = 'Drawer';\nDrawerHeader.displayName = 'Drawer.Header';\nDrawerBody.displayName = 'Drawer.Body';\nDrawerFooter.displayName = 'Drawer.Footer';\n"],"names":["Drawer","open","onClose","placement","size","closeOnOverlayClick","closeOnEsc","children","className","ariaLabel","ariaLabelledby","drawerRef","useRef","previousActiveElement","handleOverlayClick","useCallback","e","useEffect","handleEscape","scrollbarWidth","firstFocusable","handleTab","focusableElements","lastFocusable","containerClasses","styles","drawerContent","jsxs","jsx","createPortal","DrawerHeader","showClose","headerClasses","X","DrawerBody","bodyClasses","DrawerFooter","footerClasses"],"mappings":"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"}