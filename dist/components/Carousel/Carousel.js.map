{"version":3,"file":"Carousel.js","sources":["../../../src/components/Carousel/Carousel.tsx"],"sourcesContent":["import { useState, useEffect, useCallback, useRef, Children } from 'react';\nimport type { ReactNode } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport styles from './Carousel.module.css';\n\nexport interface CarouselProps {\n  /** Carousel slides */\n  children: ReactNode;\n  /** Auto-play interval in milliseconds (0 = disabled) */\n  autoPlay?: number;\n  /** Effect type */\n  effect?: 'slide' | 'fade';\n  /** Show navigation arrows */\n  showArrows?: boolean;\n  /** Show indicator dots */\n  showIndicators?: boolean;\n  /** Show thumbnails */\n  showThumbnails?: boolean;\n  /** Initial active slide index */\n  defaultIndex?: number;\n  /** Controlled active slide index */\n  activeIndex?: number;\n  /** Callback when slide changes */\n  onChange?: (index: number) => void;\n  /** Additional CSS class */\n  className?: string;\n  /** Pause autoplay on hover */\n  pauseOnHover?: boolean;\n  /** Enable infinite loop */\n  loop?: boolean;\n}\n\nexport interface CarouselSlideProps {\n  /** Slide content */\n  children: ReactNode;\n  /** Optional caption */\n  caption?: {\n    title?: ReactNode;\n    description?: ReactNode;\n  };\n  /** Thumbnail for navigation (URL or ReactNode) */\n  thumbnail?: string | ReactNode;\n  /** Additional CSS class */\n  className?: string;\n}\n\n/**\n * Carousel Component\n *\n * Image and content slider with navigation controls, indicators, and auto-play.\n * Supports slide and fade effects, thumbnails, and touch gestures.\n *\n * @example\n * ```tsx\n * <Carousel autoPlay={5000} showIndicators>\n *   <Carousel.Slide caption={{ title: \"Slide 1\", description: \"Description\" }}>\n *     <img src=\"image1.jpg\" alt=\"Slide 1\" />\n *   </Carousel.Slide>\n *   <Carousel.Slide>\n *     <img src=\"image2.jpg\" alt=\"Slide 2\" />\n *   </Carousel.Slide>\n * </Carousel>\n * ```\n */\nexport const Carousel = ({\n  children,\n  autoPlay = 0,\n  effect = 'slide',\n  showArrows = true,\n  showIndicators = true,\n  showThumbnails = false,\n  defaultIndex = 0,\n  activeIndex: controlledIndex,\n  onChange,\n  className,\n  pauseOnHover = true,\n  loop = true,\n}: CarouselProps) => {\n  const [internalIndex, setInternalIndex] = useState(defaultIndex);\n  const [isPaused, setIsPaused] = useState(false);\n  const [touchStart, setTouchStart] = useState(0);\n  const [touchEnd, setTouchEnd] = useState(0);\n  const autoPlayRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const isControlled = controlledIndex !== undefined;\n  const currentIndex = isControlled ? controlledIndex : internalIndex;\n\n  const slides = Children.toArray(children);\n  const slideCount = slides.length;\n\n  const goToSlide = useCallback(\n    (index: number) => {\n      let newIndex = index;\n\n      if (loop) {\n        if (index < 0) newIndex = slideCount - 1;\n        if (index >= slideCount) newIndex = 0;\n      } else {\n        if (index < 0) newIndex = 0;\n        if (index >= slideCount) newIndex = slideCount - 1;\n      }\n\n      if (!isControlled) {\n        setInternalIndex(newIndex);\n      }\n      onChange?.(newIndex);\n    },\n    [slideCount, loop, isControlled, onChange]\n  );\n\n  const goToPrev = useCallback(() => {\n    goToSlide(currentIndex - 1);\n  }, [currentIndex, goToSlide]);\n\n  const goToNext = useCallback(() => {\n    goToSlide(currentIndex + 1);\n  }, [currentIndex, goToSlide]);\n\n  // Auto-play\n  useEffect(() => {\n    if (autoPlay > 0 && !isPaused) {\n      autoPlayRef.current = setInterval(() => {\n        goToNext();\n      }, autoPlay);\n\n      return () => {\n        if (autoPlayRef.current) {\n          clearInterval(autoPlayRef.current);\n        }\n      };\n    }\n  }, [autoPlay, isPaused, goToNext]);\n\n  // Touch handlers\n  const handleTouchStart = (e: React.TouchEvent) => {\n    setTouchStart(e.targetTouches[0].clientX);\n  };\n\n  const handleTouchMove = (e: React.TouchEvent) => {\n    setTouchEnd(e.targetTouches[0].clientX);\n  };\n\n  const handleTouchEnd = () => {\n    if (touchStart - touchEnd > 50) {\n      // Swiped left\n      goToNext();\n    }\n\n    if (touchStart - touchEnd < -50) {\n      // Swiped right\n      goToPrev();\n    }\n  };\n\n  // Keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'ArrowLeft') {\n      goToPrev();\n    } else if (e.key === 'ArrowRight') {\n      goToNext();\n    }\n  };\n\n  const containerClasses = [\n    styles.carousel,\n    effect === 'fade' && styles.carouselFade,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div\n      className={containerClasses}\n      onMouseEnter={() => pauseOnHover && setIsPaused(true)}\n      onMouseLeave={() => pauseOnHover && setIsPaused(false)}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleTouchMove}\n      onTouchEnd={handleTouchEnd}\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      role=\"region\"\n      aria-label=\"Carousel\"\n      aria-live=\"polite\"\n    >\n      <div className={styles.carouselInner}>\n        {Children.map(children, (child, index) => {\n          const isActive = index === currentIndex;\n          return (\n            <div\n              className={`${styles.carouselItem} ${isActive ? styles.active : ''}`}\n              role=\"group\"\n              aria-roledescription=\"slide\"\n              aria-label={`Slide ${index + 1} of ${slideCount}`}\n              aria-hidden={!isActive}\n            >\n              {child}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Navigation Arrows */}\n      {showArrows && slideCount > 1 && (\n        <>\n          <button\n            className={`${styles.carouselControl} ${styles.carouselControlPrev}`}\n            onClick={goToPrev}\n            aria-label=\"Previous slide\"\n            disabled={!loop && currentIndex === 0}\n          >\n            <ChevronLeft />\n          </button>\n          <button\n            className={`${styles.carouselControl} ${styles.carouselControlNext}`}\n            onClick={goToNext}\n            aria-label=\"Next slide\"\n            disabled={!loop && currentIndex === slideCount - 1}\n          >\n            <ChevronRight />\n          </button>\n        </>\n      )}\n\n      {/* Indicators */}\n      {showIndicators && slideCount > 1 && !showThumbnails && (\n        <div className={styles.carouselIndicators}>\n          {slides.map((_, index) => (\n            <button\n              key={index}\n              className={`${styles.carouselIndicator} ${index === currentIndex ? styles.active : ''}`}\n              onClick={() => goToSlide(index)}\n              aria-label={`Go to slide ${index + 1}`}\n              aria-current={index === currentIndex}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Thumbnails */}\n      {showThumbnails && slideCount > 1 && (\n        <div className={styles.carouselThumbnailsContainer}>\n          {Children.map(children, (child: any, index) => {\n            const thumbnail = child?.props?.thumbnail;\n            if (!thumbnail) return null;\n\n            return (\n              <button\n                key={index}\n                className={`${styles.carouselThumbnail} ${index === currentIndex ? styles.active : ''}`}\n                onClick={() => goToSlide(index)}\n                aria-label={`Go to slide ${index + 1}`}\n                aria-current={index === currentIndex}\n              >\n                {typeof thumbnail === 'string' ? (\n                  <img src={thumbnail} alt={`Thumbnail ${index + 1}`} />\n                ) : (\n                  thumbnail\n                )}\n              </button>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\n/**\n * Carousel Slide Component\n *\n * Individual slide content with optional caption.\n */\nconst CarouselSlide = ({ children, caption, className }: CarouselSlideProps) => {\n  const slideClasses = [styles.carouselSlide, className].filter(Boolean).join(' ');\n\n  return (\n    <div className={slideClasses}>\n      {children}\n      {caption && (\n        <div className={styles.carouselCaption}>\n          {caption.title && <h3>{caption.title}</h3>}\n          {caption.description && <p>{caption.description}</p>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nCarousel.Slide = CarouselSlide;\nCarousel.displayName = 'Carousel';\nCarouselSlide.displayName = 'Carousel.Slide';\n"],"names":["Carousel","children","autoPlay","effect","showArrows","showIndicators","showThumbnails","defaultIndex","controlledIndex","onChange","className","pauseOnHover","loop","internalIndex","setInternalIndex","useState","isPaused","setIsPaused","touchStart","setTouchStart","touchEnd","setTouchEnd","autoPlayRef","useRef","isControlled","currentIndex","slides","Children","slideCount","goToSlide","useCallback","index","newIndex","goToPrev","goToNext","useEffect","handleTouchStart","e","handleTouchMove","handleTouchEnd","handleKeyDown","containerClasses","styles","jsxs","jsx","child","isActive","Fragment","ChevronLeft","ChevronRight","_","thumbnail","CarouselSlide","caption","slideClasses"],"mappings":"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"}