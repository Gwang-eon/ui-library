"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const R=require("react/jsx-runtime"),e=require("react"),T=require("./Affix.module.css.cjs"),z=({children:k,offsetTop:B,offsetBottom:S,target:t,onChange:c,className:q="",zIndex:w=100,style:C={}})=>{const[O,m]=e.useState(!1),$=e.useRef(null),H=e.useRef(null),[F,p]=e.useState({}),[P,h]=e.useState({display:"none",height:0,margin:0,padding:0}),n=e.useRef(!1),j=e.useRef({originalOffsetTop:0,originalOffsetLeft:0,elementWidth:0,elementHeight:0}),d=e.useRef(null),L=B!==void 0;L&&S!==void 0&&console.warn("Affix: Both offsetTop and offsetBottom are set. Using offsetTop.");const x=L?B:S,b=L?"top":"bottom",g=e.useCallback(()=>{const i=$.current,r=H.current;if(!i||!r)return;const s=t?document.getElementById(t):window;if(!s)return;const l=i.getBoundingClientRect(),v=s===window?window.scrollY:s.scrollTop,E=s===window?window.scrollX:s.scrollLeft;j.current={originalOffsetTop:l.top+v,originalOffsetLeft:l.left+E,elementWidth:l.width,elementHeight:l.height}},[t]),o=e.useCallback(()=>{d.current===null&&(d.current=requestAnimationFrame(()=>{if(d.current=null,!$.current)return;const r=t?document.getElementById(t):window;if(!r)return;const s=r===window?window.scrollY:r.scrollTop,l=r===window?window.innerHeight:r.clientHeight,{originalOffsetTop:v,originalOffsetLeft:E,elementWidth:y,elementHeight:A}=j.current;let f=!1;if(b==="top"){const u=x??0;f=s>v-u,f&&!n.current?(n.current=!0,m(!0),h({display:"block",height:`${A}px`,width:`${y}px`,margin:0,padding:0,border:"none"}),p({position:"fixed",top:`${u}px`,left:`${E}px`,width:`${y}px`,zIndex:w}),c?.(!0)):!f&&n.current&&(n.current=!1,m(!1),h({display:"none",height:0,margin:0,padding:0}),p({}),c?.(!1))}else{const u=x??0,W=v+A;f=s+l<W+u,f&&!n.current?(n.current=!0,m(!0),h({display:"block",height:`${A}px`,width:`${y}px`,margin:0,padding:0,border:"none"}),p({position:"fixed",bottom:`${u}px`,left:`${E}px`,width:`${y}px`,zIndex:w}),c?.(!0)):!f&&n.current&&(n.current=!1,m(!1),h({display:"none",height:0,margin:0,padding:0}),p({}),c?.(!1))}}))},[x,b,t,w,c]),a=e.useCallback(()=>{n.current||g(),o()},[g,o]);return e.useEffect(()=>{g()},[g]),e.useEffect(()=>{const i=t?document.getElementById(t):window;if(!i){t&&console.warn(`Affix: Target container with id "${t}" not found.`);return}return o(),i===window?(window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",a)):(i.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",a)),()=>{d.current!==null&&cancelAnimationFrame(d.current),i===window?(window.removeEventListener("scroll",o),window.removeEventListener("resize",a)):(i.removeEventListener("scroll",o),window.removeEventListener("resize",a))}},[x,b,t,w,o,a]),R.jsxs(R.Fragment,{children:[R.jsx("div",{ref:$,className:`${T.default.affix} ${O?T.default.affixActive:""} ${q}`,style:{...F,...C},"data-affixed":O,children:k}),R.jsx("div",{ref:H,style:P,"aria-hidden":"true",className:T.default.affixPlaceholder})]})};exports.Affix=z;
//# sourceMappingURL=Affix.cjs.map
