"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react/jsx-runtime"),u=require("react"),B=require("react-dom"),s=require("lucide-react"),a=require("./Image.module.css.cjs"),L=({src:g,alt:l,fit:r="none",radius:f="default",placeholder:i=!0,fallback:x,preview:t=!1,caption:h,loading:N="lazy",className:k,width:E,height:p,...w})=>{const[o,j]=u.useState("loading"),[d,y]=u.useState(!1),I=()=>{j("loaded")},S=()=>{j("error")},v=()=>{t&&o==="loaded"&&y(!0)},c=()=>{y(!1)},m=n=>{n.key==="Escape"&&c()};u.useEffect(()=>(d?(document.addEventListener("keydown",m),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",m),document.body.style.overflow=""),()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}),[d]);const q=[a.default.imageWrapper,f==="circle"&&a.default.imageCircle,f==="square"&&a.default.imageSquare,t&&a.default.imagePreview,o==="loading"&&i&&a.default.imageLoading,o==="error"&&a.default.imageError,k].filter(Boolean).join(" "),P=[a.default.image,r==="cover"&&a.default.imageCover,r==="contain"&&a.default.imageContain,r==="fill"&&a.default.imageFill].filter(Boolean).join(" "),F={width:E,height:p},D=()=>o==="error"?x?e.jsx("div",{className:a.default.imageErrorContent,children:x}):e.jsxs("div",{className:a.default.imageErrorContent,children:[e.jsx(s.ImageOff,{}),e.jsx("span",{children:"Failed to load image"})]}):o==="loading"&&i?typeof i=="boolean"?e.jsxs("div",{className:a.default.imagePlaceholder,children:[e.jsx(s.Image,{}),e.jsx("span",{children:"Loading..."})]}):e.jsx("div",{className:a.default.imagePlaceholder,children:i}):e.jsxs(e.Fragment,{children:[e.jsx("img",{className:P,src:g,alt:l,loading:N,onLoad:I,onError:S,style:{display:o==="loaded"?"block":"none"},...w}),t&&o==="loaded"&&e.jsxs("div",{className:a.default.imagePreviewOverlay,children:[e.jsx(s.Maximize2,{}),e.jsx("span",{children:"Click to preview"})]})]}),b=e.jsx("div",{className:q,style:F,onClick:v,role:t?"button":void 0,tabIndex:t?0:void 0,onKeyDown:t?n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),v())}:void 0,"aria-label":t?`Preview ${l}`:void 0,children:D()}),C=d&&B.createPortal(e.jsxs("div",{className:a.default.imageLightbox,children:[e.jsx("div",{className:a.default.imageLightboxBackdrop,onClick:c}),e.jsxs("div",{className:a.default.imageLightboxContent,children:[e.jsx("button",{className:a.default.imageLightboxClose,onClick:c,"aria-label":"Close preview",type:"button",children:e.jsx(s.X,{})}),e.jsx("img",{src:g,alt:l})]})]}),document.body);return h?e.jsxs(e.Fragment,{children:[e.jsxs("figure",{className:a.default.imageFigure,children:[b,e.jsx("figcaption",{className:a.default.imageCaption,children:h})]}),C]}):e.jsxs(e.Fragment,{children:[b,C]})};L.displayName="Image";exports.Image=L;
//# sourceMappingURL=Image.cjs.map
