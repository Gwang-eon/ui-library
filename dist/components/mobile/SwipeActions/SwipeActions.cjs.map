{"version":3,"file":"SwipeActions.cjs","sources":["../../../../src/components/mobile/SwipeActions/SwipeActions.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport type { LucideIcon } from 'lucide-react';\nimport styles from './SwipeActions.module.css';\n\ntype IconType = LucideIcon;\n\n// ==================== Swipe Actions ====================\n\nexport type SwipeActionType = 'delete' | 'favorite' | 'archive' | 'edit';\n\nexport interface SwipeAction {\n  type: SwipeActionType;\n  icon: IconType;\n  label: string;\n  onAction: () => void;\n}\n\nexport interface SwipeActionsProps {\n  leftActions?: SwipeAction[];\n  rightActions?: SwipeAction[];\n  children: React.ReactNode;\n  threshold?: number;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport const SwipeActions: React.FC<SwipeActionsProps> = ({\n  leftActions = [],\n  rightActions = [],\n  children,\n  threshold = 80,\n  disabled = false,\n  className = '',\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const itemRef = useRef<HTMLDivElement>(null);\n  const startXRef = useRef<number>(0);\n  const currentXRef = useRef<number>(0);\n  const [translateX, setTranslateX] = useState(0);\n  const [isSwiping, setIsSwiping] = useState(false);\n\n  useEffect(() => {\n    const item = itemRef.current;\n    if (!item || disabled) return;\n\n    let isDragging = false;\n\n    const handleTouchStart = (e: TouchEvent) => {\n      startXRef.current = e.touches[0].clientX;\n      currentXRef.current = translateX;\n      isDragging = true;\n      setIsSwiping(true);\n    };\n\n    const handleTouchMove = (e: TouchEvent) => {\n      if (!isDragging) return;\n\n      const deltaX = e.touches[0].clientX - startXRef.current;\n      const newTranslateX = currentXRef.current + deltaX;\n\n      // Apply boundaries\n      const maxRight = leftActions.length > 0 ? leftActions.length * 80 : 0;\n      const maxLeft = rightActions.length > 0 ? -rightActions.length * 80 : 0;\n\n      const boundedTranslateX = Math.max(maxLeft, Math.min(maxRight, newTranslateX));\n      setTranslateX(boundedTranslateX);\n    };\n\n    const handleTouchEnd = () => {\n      if (!isDragging) return;\n      isDragging = false;\n      setIsSwiping(false);\n\n      // Snap to action or reset\n      if (Math.abs(translateX) >= threshold) {\n        // Snap to revealed actions\n        if (translateX > 0 && leftActions.length > 0) {\n          setTranslateX(leftActions.length * 80);\n        } else if (translateX < 0 && rightActions.length > 0) {\n          setTranslateX(-rightActions.length * 80);\n        } else {\n          setTranslateX(0);\n        }\n      } else {\n        // Reset to center\n        setTranslateX(0);\n      }\n    };\n\n    // Mouse events for desktop testing\n    let isMouseDragging = false;\n\n    const handleMouseDown = (e: MouseEvent) => {\n      startXRef.current = e.clientX;\n      currentXRef.current = translateX;\n      isMouseDragging = true;\n      setIsSwiping(true);\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isMouseDragging) return;\n\n      const deltaX = e.clientX - startXRef.current;\n      const newTranslateX = currentXRef.current + deltaX;\n\n      const maxRight = leftActions.length > 0 ? leftActions.length * 80 : 0;\n      const maxLeft = rightActions.length > 0 ? -rightActions.length * 80 : 0;\n\n      const boundedTranslateX = Math.max(maxLeft, Math.min(maxRight, newTranslateX));\n      setTranslateX(boundedTranslateX);\n    };\n\n    const handleMouseUp = () => {\n      if (!isMouseDragging) return;\n      isMouseDragging = false;\n      setIsSwiping(false);\n\n      if (Math.abs(translateX) >= threshold) {\n        if (translateX > 0 && leftActions.length > 0) {\n          setTranslateX(leftActions.length * 80);\n        } else if (translateX < 0 && rightActions.length > 0) {\n          setTranslateX(-rightActions.length * 80);\n        } else {\n          setTranslateX(0);\n        }\n      } else {\n        setTranslateX(0);\n      }\n    };\n\n    item.addEventListener('touchstart', handleTouchStart, { passive: true });\n    item.addEventListener('touchmove', handleTouchMove, { passive: true });\n    item.addEventListener('touchend', handleTouchEnd);\n\n    item.addEventListener('mousedown', handleMouseDown);\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      item.removeEventListener('touchstart', handleTouchStart);\n      item.removeEventListener('touchmove', handleTouchMove);\n      item.removeEventListener('touchend', handleTouchEnd);\n\n      item.removeEventListener('mousedown', handleMouseDown);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [disabled, leftActions.length, rightActions.length, threshold, translateX]);\n\n  const handleActionClick = (action: SwipeAction) => {\n    action.onAction();\n    setTranslateX(0); // Reset position after action\n  };\n\n  const containerClassName = `${styles.swipeContainer} ${className}`.trim();\n  const itemClassName = `${styles.swipeItem} ${isSwiping ? styles.swiping : ''}`.trim();\n\n  return (\n    <div ref={containerRef} className={containerClassName}>\n      {leftActions.length > 0 && (\n        <div className={styles.swipeActionsLeft}>\n          {leftActions.map((action, index) => {\n            const Icon = action.icon;\n            return (\n              <button\n                key={index}\n                className={`${styles.swipeAction} ${styles[action.type]}`}\n                onClick={() => handleActionClick(action)}\n              >\n                <Icon className={styles.actionIcon} />\n                <span>{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      {rightActions.length > 0 && (\n        <div className={styles.swipeActionsRight}>\n          {rightActions.map((action, index) => {\n            const Icon = action.icon;\n            return (\n              <button\n                key={index}\n                className={`${styles.swipeAction} ${styles[action.type]}`}\n                onClick={() => handleActionClick(action)}\n              >\n                <Icon className={styles.actionIcon} />\n                <span>{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      <div\n        ref={itemRef}\n        className={itemClassName}\n        style={{\n          transform: `translateX(${translateX}px)`,\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\n// ==================== Main Export ====================\n\nexport default SwipeActions;\n"],"names":["SwipeActions","leftActions","rightActions","children","threshold","disabled","className","containerRef","useRef","itemRef","startXRef","currentXRef","translateX","setTranslateX","useState","isSwiping","setIsSwiping","useEffect","item","isDragging","handleTouchStart","e","handleTouchMove","deltaX","newTranslateX","maxRight","maxLeft","boundedTranslateX","handleTouchEnd","isMouseDragging","handleMouseDown","handleMouseMove","handleMouseUp","handleActionClick","action","containerClassName","styles","itemClassName","jsxs","jsx","index","Icon"],"mappings":"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"}