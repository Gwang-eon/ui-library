{"version":3,"file":"SwipeActions.js","sources":["../../../../src/components/mobile/SwipeActions/SwipeActions.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport type { LucideIcon } from 'lucide-react';\nimport styles from './SwipeActions.module.css';\n\ntype IconType = LucideIcon;\n\n// ==================== Swipe Actions ====================\n\nexport type SwipeActionType = 'delete' | 'favorite' | 'archive' | 'edit';\n\nexport interface SwipeAction {\n  type: SwipeActionType;\n  icon: IconType;\n  label: string;\n  onAction: () => void;\n}\n\nexport interface SwipeActionsProps {\n  leftActions?: SwipeAction[];\n  rightActions?: SwipeAction[];\n  children: React.ReactNode;\n  threshold?: number;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport const SwipeActions: React.FC<SwipeActionsProps> = ({\n  leftActions = [],\n  rightActions = [],\n  children,\n  threshold = 80,\n  disabled = false,\n  className = '',\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const itemRef = useRef<HTMLDivElement>(null);\n  const startXRef = useRef<number>(0);\n  const currentXRef = useRef<number>(0);\n  const [translateX, setTranslateX] = useState(0);\n  const [isSwiping, setIsSwiping] = useState(false);\n\n  useEffect(() => {\n    const item = itemRef.current;\n    if (!item || disabled) return;\n\n    let isDragging = false;\n\n    const handleTouchStart = (e: TouchEvent) => {\n      startXRef.current = e.touches[0].clientX;\n      currentXRef.current = translateX;\n      isDragging = true;\n      setIsSwiping(true);\n    };\n\n    const handleTouchMove = (e: TouchEvent) => {\n      if (!isDragging) return;\n\n      const deltaX = e.touches[0].clientX - startXRef.current;\n      const newTranslateX = currentXRef.current + deltaX;\n\n      // Apply boundaries\n      const maxRight = leftActions.length > 0 ? leftActions.length * 80 : 0;\n      const maxLeft = rightActions.length > 0 ? -rightActions.length * 80 : 0;\n\n      const boundedTranslateX = Math.max(maxLeft, Math.min(maxRight, newTranslateX));\n      setTranslateX(boundedTranslateX);\n    };\n\n    const handleTouchEnd = () => {\n      if (!isDragging) return;\n      isDragging = false;\n      setIsSwiping(false);\n\n      // Snap to action or reset\n      if (Math.abs(translateX) >= threshold) {\n        // Snap to revealed actions\n        if (translateX > 0 && leftActions.length > 0) {\n          setTranslateX(leftActions.length * 80);\n        } else if (translateX < 0 && rightActions.length > 0) {\n          setTranslateX(-rightActions.length * 80);\n        } else {\n          setTranslateX(0);\n        }\n      } else {\n        // Reset to center\n        setTranslateX(0);\n      }\n    };\n\n    // Mouse events for desktop testing\n    let isMouseDragging = false;\n\n    const handleMouseDown = (e: MouseEvent) => {\n      startXRef.current = e.clientX;\n      currentXRef.current = translateX;\n      isMouseDragging = true;\n      setIsSwiping(true);\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isMouseDragging) return;\n\n      const deltaX = e.clientX - startXRef.current;\n      const newTranslateX = currentXRef.current + deltaX;\n\n      const maxRight = leftActions.length > 0 ? leftActions.length * 80 : 0;\n      const maxLeft = rightActions.length > 0 ? -rightActions.length * 80 : 0;\n\n      const boundedTranslateX = Math.max(maxLeft, Math.min(maxRight, newTranslateX));\n      setTranslateX(boundedTranslateX);\n    };\n\n    const handleMouseUp = () => {\n      if (!isMouseDragging) return;\n      isMouseDragging = false;\n      setIsSwiping(false);\n\n      if (Math.abs(translateX) >= threshold) {\n        if (translateX > 0 && leftActions.length > 0) {\n          setTranslateX(leftActions.length * 80);\n        } else if (translateX < 0 && rightActions.length > 0) {\n          setTranslateX(-rightActions.length * 80);\n        } else {\n          setTranslateX(0);\n        }\n      } else {\n        setTranslateX(0);\n      }\n    };\n\n    item.addEventListener('touchstart', handleTouchStart, { passive: true });\n    item.addEventListener('touchmove', handleTouchMove, { passive: true });\n    item.addEventListener('touchend', handleTouchEnd);\n\n    item.addEventListener('mousedown', handleMouseDown);\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      item.removeEventListener('touchstart', handleTouchStart);\n      item.removeEventListener('touchmove', handleTouchMove);\n      item.removeEventListener('touchend', handleTouchEnd);\n\n      item.removeEventListener('mousedown', handleMouseDown);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [disabled, leftActions.length, rightActions.length, threshold, translateX]);\n\n  const handleActionClick = (action: SwipeAction) => {\n    action.onAction();\n    setTranslateX(0); // Reset position after action\n  };\n\n  const containerClassName = `${styles.swipeContainer} ${className}`.trim();\n  const itemClassName = `${styles.swipeItem} ${isSwiping ? styles.swiping : ''}`.trim();\n\n  return (\n    <div ref={containerRef} className={containerClassName}>\n      {leftActions.length > 0 && (\n        <div className={styles.swipeActionsLeft}>\n          {leftActions.map((action, index) => {\n            const Icon = action.icon;\n            return (\n              <button\n                key={index}\n                className={`${styles.swipeAction} ${styles[action.type]}`}\n                onClick={() => handleActionClick(action)}\n              >\n                <Icon className={styles.actionIcon} />\n                <span>{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      {rightActions.length > 0 && (\n        <div className={styles.swipeActionsRight}>\n          {rightActions.map((action, index) => {\n            const Icon = action.icon;\n            return (\n              <button\n                key={index}\n                className={`${styles.swipeAction} ${styles[action.type]}`}\n                onClick={() => handleActionClick(action)}\n              >\n                <Icon className={styles.actionIcon} />\n                <span>{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      )}\n\n      <div\n        ref={itemRef}\n        className={itemClassName}\n        style={{\n          transform: `translateX(${translateX}px)`,\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\n// ==================== Main Export ====================\n\nexport default SwipeActions;\n"],"names":["SwipeActions","leftActions","rightActions","children","threshold","disabled","className","containerRef","useRef","itemRef","startXRef","currentXRef","translateX","setTranslateX","useState","isSwiping","setIsSwiping","useEffect","item","isDragging","handleTouchStart","e","handleTouchMove","deltaX","newTranslateX","maxRight","maxLeft","boundedTranslateX","handleTouchEnd","isMouseDragging","handleMouseDown","handleMouseMove","handleMouseUp","handleActionClick","action","containerClassName","styles","itemClassName","jsxs","jsx","index","Icon"],"mappings":"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"}