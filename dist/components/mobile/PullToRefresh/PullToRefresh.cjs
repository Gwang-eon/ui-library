"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),u=require("react"),x=require("lucide-react"),e=require("./PullToRefresh.module.css.cjs"),M=({onRefresh:g,children:P,pullDistance:l=80,style:f="default",disabled:R=!1,className:S=""})=>{const j=u.useRef(null),y=u.useRef(null),h=u.useRef(0),m=u.useRef(0),[s,a]=u.useState("idle"),[c,o]=u.useState(0);u.useEffect(()=>{const n=j.current;if(!n||R)return;let v=!1;const E=r=>{n.scrollTop===0&&s==="idle"&&(h.current=r.touches[0].clientY,v=!0)},N=r=>{if(!v)return;m.current=r.touches[0].clientY;const i=m.current-h.current;if(i>0){r.preventDefault();const d=Math.min(i*.5,l*1.5);o(d),d>=l?a("release"):a("pulling")}},$=async()=>{if(v)if(v=!1,c>=l){a("refreshing"),o(l);try{await g()}catch(r){console.error("Refresh error:",r)}finally{a("idle"),o(0)}}else a("idle"),o(0)};let p=!1;const L=r=>{n.scrollTop===0&&s==="idle"&&(h.current=r.clientY,p=!0)},w=r=>{if(!p)return;m.current=r.clientY;const i=m.current-h.current;if(i>0){r.preventDefault();const d=Math.min(i*.5,l*1.5);o(d),d>=l?a("release"):a("pulling")}},Y=async()=>{if(p)if(p=!1,c>=l){a("refreshing"),o(l);try{await g()}catch(r){console.error("Refresh error:",r)}finally{a("idle"),o(0)}}else a("idle"),o(0)};return n.addEventListener("touchstart",E,{passive:!0}),n.addEventListener("touchmove",N,{passive:!1}),n.addEventListener("touchend",$),n.addEventListener("mousedown",L),document.addEventListener("mousemove",w),document.addEventListener("mouseup",Y),()=>{n.removeEventListener("touchstart",E),n.removeEventListener("touchmove",N),n.removeEventListener("touchend",$),n.removeEventListener("mousedown",L),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",Y)}},[R,g,l,s,c]);const C=`${e.default.pullToRefresh} ${S}`.trim(),q=`
    ${e.default.pullToRefreshContent}
    ${s==="pulling"?e.default.pulling:""}
    ${s==="refreshing"?e.default.refreshing:""}
  `.trim(),A=`
    ${e.default.pullIndicator}
    ${c>0?e.default.visible:""}
    ${s!=="idle"?e.default[`state${s.charAt(0).toUpperCase()+s.slice(1)}`]:""}
    ${f!=="default"?e.default[`style${f.charAt(0).toUpperCase()+f.slice(1)}`]:""}
  `.trim(),T=()=>{switch(s){case"pulling":return"Pull to refresh";case"release":return"Release to refresh";case"refreshing":return"Refreshing...";default:return"Pull to refresh"}};return t.jsxs("div",{ref:j,className:C,style:{"--mobile-pull-distance":`${l}px`},children:[t.jsx("div",{className:A,children:f==="spinner"?t.jsxs(t.Fragment,{children:[s==="refreshing"?t.jsx("div",{className:e.default.pullSpinner}):t.jsx("div",{className:e.default.pullIcon,children:t.jsx(x.ArrowDown,{className:e.default.icon})}),t.jsx("span",{className:e.default.pullText,children:T()})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:e.default.pullIcon,children:s==="refreshing"?t.jsx(x.RefreshCw,{className:e.default.icon}):t.jsx(x.ArrowDown,{className:e.default.icon})}),t.jsx("span",{className:e.default.pullText,children:T()})]})}),t.jsx("div",{ref:y,className:q,style:{transform:`translateY(${c}px)`},children:P})]})};exports.PullToRefresh=M;exports.default=M;
//# sourceMappingURL=PullToRefresh.cjs.map
