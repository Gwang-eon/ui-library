{"version":3,"file":"SplitButton.js","sources":["../../../src/components/SplitButton/SplitButton.tsx"],"sourcesContent":["import type { ReactNode, MouseEvent } from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\nimport { Button } from '../Button';\nimport styles from './SplitButton.module.css';\n\nexport interface SplitButtonMenuItem {\n  /** Menu item label */\n  label?: ReactNode;\n  /** Menu item icon */\n  icon?: ReactNode;\n  /** Click handler */\n  onClick?: () => void;\n  /** Danger styling */\n  danger?: boolean;\n  /** Divider (renders as separator) */\n  divider?: boolean;\n}\n\nexport interface SplitButtonProps {\n  /** Primary action label */\n  label?: ReactNode;\n  /** Primary action icon */\n  icon?: ReactNode;\n  /** Primary action click handler */\n  onClick?: () => void;\n  /** Dropdown menu items */\n  items: SplitButtonMenuItem[];\n  /** Button variant */\n  variant?: 'primary' | 'secondary' | 'success' | 'danger';\n  /** Button size */\n  size?: 'sm' | 'md' | 'lg';\n  /** Disabled state */\n  disabled?: boolean;\n  /** Loading state */\n  loading?: boolean;\n  /** ARIA label for action button */\n  'aria-label'?: string;\n  /** Custom className */\n  className?: string;\n}\n\n/**\n * Split Button Component\n *\n * Button with primary action and dropdown menu for additional options.\n * Ideal for device control, data export, and automation rules.\n *\n * @example\n * ```tsx\n * <SplitButton\n *   label=\"Save\"\n *   icon={<Save />}\n *   onClick={() => console.log('Save')}\n *   items={[\n *     { label: 'Save', icon: <Save />, onClick: () => {} },\n *     { label: 'Save As', icon: <FilePlus />, onClick: () => {} },\n *     { label: 'Save Template', icon: <FileCopy />, onClick: () => {} },\n *   ]}\n * />\n * ```\n *\n * @example\n * ```tsx\n * // With dividers and danger items\n * <SplitButton\n *   label=\"Delete\"\n *   icon={<Trash2 />}\n *   variant=\"danger\"\n *   items={[\n *     { label: 'Delete', icon: <Trash2 />, onClick: () => {} },\n *     { label: 'Archive', icon: <Archive />, onClick: () => {} },\n *     { divider: true },\n *     { label: 'Delete Permanently', icon: <Trash />, onClick: () => {}, danger: true },\n *   ]}\n * />\n * ```\n */\nexport const SplitButton = ({\n  label,\n  icon,\n  onClick,\n  items,\n  variant = 'primary',\n  size = 'md',\n  disabled = false,\n  loading = false,\n  'aria-label': ariaLabel,\n  className,\n}: SplitButtonProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const menuRef = useRef<HTMLUListElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: Event) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!isOpen) return;\n\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n        return;\n      }\n\n      if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n        event.preventDefault();\n        const menuItems = menuRef.current?.querySelectorAll(`.${styles.splitButtonMenuItem}`);\n        if (!menuItems || menuItems.length === 0) return;\n\n        const currentIndex = Array.from(menuItems).findIndex(\n          (item) => item === document.activeElement\n        );\n\n        let nextIndex;\n        if (event.key === 'ArrowDown') {\n          nextIndex = currentIndex + 1 >= menuItems.length ? 0 : currentIndex + 1;\n        } else {\n          nextIndex = currentIndex - 1 < 0 ? menuItems.length - 1 : currentIndex - 1;\n        }\n\n        (menuItems[nextIndex] as HTMLElement).focus();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [isOpen]);\n\n  const handleToggleClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setIsOpen(!isOpen);\n  };\n\n  const handleActionClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    onClick?.();\n  };\n\n  const handleMenuItemClick = (item: SplitButtonMenuItem) => {\n    if (item.divider) return;\n    item.onClick?.();\n    setIsOpen(false);\n  };\n\n  const containerClasses = [\n    styles.splitButton,\n    size === 'sm' && styles.splitButtonSm,\n    size === 'lg' && styles.splitButtonLg,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={containerClasses} ref={containerRef}>\n      <Button\n        className={styles.splitButtonAction}\n        variant={variant}\n        size={size}\n        onClick={handleActionClick}\n        disabled={disabled}\n        loading={loading}\n        icon={icon}\n        aria-label={ariaLabel}\n      >\n        {label}\n      </Button>\n\n      <Button\n        className={styles.splitButtonToggle}\n        variant={variant}\n        size={size}\n        onClick={handleToggleClick}\n        disabled={disabled || loading}\n        aria-label=\"More options\"\n        aria-haspopup=\"menu\"\n        aria-expanded={isOpen}\n        iconOnly\n      >\n        {isOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n      </Button>\n\n      <ul\n        ref={menuRef}\n        className={`${styles.splitButtonMenu} ${isOpen ? styles.splitButtonMenuOpen : ''}`}\n        role=\"menu\"\n      >\n        {items.map((item, index) => {\n          if (item.divider) {\n            return (\n              <li\n                key={`divider-${index}`}\n                className={styles.splitButtonMenuDivider}\n                role=\"separator\"\n                aria-hidden=\"true\"\n              />\n            );\n          }\n\n          return (\n            <li\n              key={index}\n              className={`${styles.splitButtonMenuItem} ${\n                item.danger ? styles.splitButtonMenuItemDanger : ''\n              }`}\n              role=\"menuitem\"\n              tabIndex={0}\n              onClick={() => handleMenuItemClick(item)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  handleMenuItemClick(item);\n                }\n              }}\n            >\n              {item.icon && <span className={styles.splitButtonMenuItemIcon}>{item.icon}</span>}\n              <span>{item.label}</span>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nSplitButton.displayName = 'SplitButton';\n"],"names":["SplitButton","label","icon","onClick","items","variant","size","disabled","loading","ariaLabel","className","isOpen","setIsOpen","useState","containerRef","useRef","menuRef","useEffect","handleClickOutside","event","handleKeyDown","menuItems","styles","currentIndex","item","nextIndex","handleToggleClick","handleActionClick","handleMenuItemClick","containerClasses","jsxs","jsx","Button","ChevronUp","ChevronDown","index","e"],"mappings":"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"}