{"version":3,"file":"SplitButton.cjs","sources":["../../../src/components/SplitButton/SplitButton.tsx"],"sourcesContent":["import type { ReactNode, MouseEvent } from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\nimport { Button } from '../Button';\nimport styles from './SplitButton.module.css';\n\nexport interface SplitButtonMenuItem {\n  /** Menu item label */\n  label?: ReactNode;\n  /** Menu item icon */\n  icon?: ReactNode;\n  /** Click handler */\n  onClick?: () => void;\n  /** Danger styling */\n  danger?: boolean;\n  /** Divider (renders as separator) */\n  divider?: boolean;\n}\n\nexport interface SplitButtonProps {\n  /** Primary action label */\n  label?: ReactNode;\n  /** Primary action icon */\n  icon?: ReactNode;\n  /** Primary action click handler */\n  onClick?: () => void;\n  /** Dropdown menu items */\n  items: SplitButtonMenuItem[];\n  /** Button variant */\n  variant?: 'primary' | 'secondary' | 'success' | 'danger';\n  /** Button size */\n  size?: 'sm' | 'md' | 'lg';\n  /** Disabled state */\n  disabled?: boolean;\n  /** Loading state */\n  loading?: boolean;\n  /** ARIA label for action button */\n  'aria-label'?: string;\n  /** Custom className */\n  className?: string;\n}\n\n/**\n * Split Button Component\n *\n * Button with primary action and dropdown menu for additional options.\n * Ideal for device control, data export, and automation rules.\n *\n * @example\n * ```tsx\n * <SplitButton\n *   label=\"Save\"\n *   icon={<Save />}\n *   onClick={() => console.log('Save')}\n *   items={[\n *     { label: 'Save', icon: <Save />, onClick: () => {} },\n *     { label: 'Save As', icon: <FilePlus />, onClick: () => {} },\n *     { label: 'Save Template', icon: <FileCopy />, onClick: () => {} },\n *   ]}\n * />\n * ```\n *\n * @example\n * ```tsx\n * // With dividers and danger items\n * <SplitButton\n *   label=\"Delete\"\n *   icon={<Trash2 />}\n *   variant=\"danger\"\n *   items={[\n *     { label: 'Delete', icon: <Trash2 />, onClick: () => {} },\n *     { label: 'Archive', icon: <Archive />, onClick: () => {} },\n *     { divider: true },\n *     { label: 'Delete Permanently', icon: <Trash />, onClick: () => {}, danger: true },\n *   ]}\n * />\n * ```\n */\nexport const SplitButton = ({\n  label,\n  icon,\n  onClick,\n  items,\n  variant = 'primary',\n  size = 'md',\n  disabled = false,\n  loading = false,\n  'aria-label': ariaLabel,\n  className,\n}: SplitButtonProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const menuRef = useRef<HTMLUListElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: Event) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!isOpen) return;\n\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n        return;\n      }\n\n      if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n        event.preventDefault();\n        const menuItems = menuRef.current?.querySelectorAll(`.${styles.splitButtonMenuItem}`);\n        if (!menuItems || menuItems.length === 0) return;\n\n        const currentIndex = Array.from(menuItems).findIndex(\n          (item) => item === document.activeElement\n        );\n\n        let nextIndex;\n        if (event.key === 'ArrowDown') {\n          nextIndex = currentIndex + 1 >= menuItems.length ? 0 : currentIndex + 1;\n        } else {\n          nextIndex = currentIndex - 1 < 0 ? menuItems.length - 1 : currentIndex - 1;\n        }\n\n        (menuItems[nextIndex] as HTMLElement).focus();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [isOpen]);\n\n  const handleToggleClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setIsOpen(!isOpen);\n  };\n\n  const handleActionClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    onClick?.();\n  };\n\n  const handleMenuItemClick = (item: SplitButtonMenuItem) => {\n    if (item.divider) return;\n    item.onClick?.();\n    setIsOpen(false);\n  };\n\n  const containerClasses = [\n    styles.splitButton,\n    size === 'sm' && styles.splitButtonSm,\n    size === 'lg' && styles.splitButtonLg,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={containerClasses} ref={containerRef}>\n      <Button\n        className={styles.splitButtonAction}\n        variant={variant}\n        size={size}\n        onClick={handleActionClick}\n        disabled={disabled}\n        loading={loading}\n        icon={icon}\n        aria-label={ariaLabel}\n      >\n        {label}\n      </Button>\n\n      <Button\n        className={styles.splitButtonToggle}\n        variant={variant}\n        size={size}\n        onClick={handleToggleClick}\n        disabled={disabled || loading}\n        aria-label=\"More options\"\n        aria-haspopup=\"menu\"\n        aria-expanded={isOpen}\n        iconOnly\n      >\n        {isOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n      </Button>\n\n      <ul\n        ref={menuRef}\n        className={`${styles.splitButtonMenu} ${isOpen ? styles.splitButtonMenuOpen : ''}`}\n        role=\"menu\"\n      >\n        {items.map((item, index) => {\n          if (item.divider) {\n            return (\n              <li\n                key={`divider-${index}`}\n                className={styles.splitButtonMenuDivider}\n                role=\"separator\"\n                aria-hidden=\"true\"\n              />\n            );\n          }\n\n          return (\n            <li\n              key={index}\n              className={`${styles.splitButtonMenuItem} ${\n                item.danger ? styles.splitButtonMenuItemDanger : ''\n              }`}\n              role=\"menuitem\"\n              tabIndex={0}\n              onClick={() => handleMenuItemClick(item)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  handleMenuItemClick(item);\n                }\n              }}\n            >\n              {item.icon && <span className={styles.splitButtonMenuItemIcon}>{item.icon}</span>}\n              <span>{item.label}</span>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nSplitButton.displayName = 'SplitButton';\n"],"names":["SplitButton","label","icon","onClick","items","variant","size","disabled","loading","ariaLabel","className","isOpen","setIsOpen","useState","containerRef","useRef","menuRef","useEffect","handleClickOutside","event","handleKeyDown","menuItems","styles","currentIndex","item","nextIndex","handleToggleClick","handleActionClick","handleMenuItemClick","containerClasses","jsxs","jsx","Button","ChevronUp","ChevronDown","index","e"],"mappings":"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"}