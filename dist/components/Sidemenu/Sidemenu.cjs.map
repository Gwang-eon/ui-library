{"version":3,"file":"Sidemenu.cjs","sources":["../../../src/components/Sidemenu/Sidemenu.tsx"],"sourcesContent":["import { useState } from 'react';\nimport type { ReactNode } from 'react';\nimport styles from './Sidemenu.module.css';\n\nexport interface SidemenuItem {\n  /** Unique key */\n  key: string;\n  /** Display title */\n  title: string;\n  /** Icon before title */\n  icon?: ReactNode;\n  /** Link href */\n  href?: string;\n  /** Badge count or text */\n  badge?: ReactNode;\n  /** Nested child items */\n  children?: SidemenuItem[];\n  /** Disabled state */\n  disabled?: boolean;\n  /** Tooltip for collapsed mode */\n  tooltip?: string;\n}\n\nexport interface SidemenuGroup {\n  /** Group header text */\n  title: string;\n  /** Group icon */\n  icon?: ReactNode;\n  /** Group items */\n  items: SidemenuItem[];\n}\n\nexport interface SidemenuProps {\n  /** Menu items or grouped items */\n  items: (SidemenuItem | SidemenuGroup)[];\n  /** Active item key */\n  activeKey?: string;\n  /** Collapsed state (controlled) */\n  collapsed?: boolean;\n  /** Default collapsed state */\n  defaultCollapsed?: boolean;\n  /** Callback when collapsed changes */\n  onCollapse?: (collapsed: boolean) => void;\n  /** Callback when active item changes */\n  onSelect?: (key: string) => void;\n  /** Brand logo/icon */\n  brandIcon?: ReactNode;\n  /** Brand text */\n  brandText?: string;\n  /** User info */\n  userInfo?: {\n    name: string;\n    email?: string;\n    avatar?: string | ReactNode;\n  };\n  /** Show search */\n  showSearch?: boolean;\n  /** Search placeholder */\n  searchPlaceholder?: string;\n  /** Additional CSS classes */\n  className?: string;\n  /** Storage key for persistence */\n  storageKey?: string;\n}\n\nconst isGroup = (item: SidemenuItem | SidemenuGroup): item is SidemenuGroup => {\n  return 'items' in item && Array.isArray(item.items);\n};\n\n/**\n * Sidemenu - Enterprise-grade side navigation\n *\n * Features:\n * - Collapsible mode (280px → 64px)\n * - Multi-level hierarchy\n * - Search functionality\n * - Group headers\n * - Persistent state\n *\n * @example\n * ```tsx\n * <Sidemenu\n *   items={[\n *     { key: 'dashboard', title: 'Dashboard', icon: <Home />, href: '#' }\n *   ]}\n *   brandText=\"IoT Platform\"\n *   defaultCollapsed={false}\n * />\n * ```\n */\nexport const Sidemenu = ({\n  items,\n  activeKey,\n  collapsed: controlledCollapsed,\n  defaultCollapsed = false,\n  onCollapse,\n  onSelect,\n  brandIcon,\n  brandText = 'App',\n  userInfo,\n  showSearch = false,\n  searchPlaceholder = 'Search menu...',\n  className = '',\n  storageKey = 'sidemenu-collapsed',\n}: SidemenuProps) => {\n  const [uncontrolledCollapsed, setUncontrolledCollapsed] = useState(() => {\n    if (storageKey && typeof window !== 'undefined') {\n      const stored = localStorage.getItem(storageKey);\n      return stored ? stored === 'true' : defaultCollapsed;\n    }\n    return defaultCollapsed;\n  });\n\n  const [searchQuery, setSearchQuery] = useState('');\n  const [expandedKeys, setExpandedKeys] = useState<Set<string>>(new Set());\n\n  const isCollapsed =\n    controlledCollapsed !== undefined ? controlledCollapsed : uncontrolledCollapsed;\n\n  const handleToggleCollapse = () => {\n    const newCollapsed = !isCollapsed;\n    if (controlledCollapsed === undefined) {\n      setUncontrolledCollapsed(newCollapsed);\n      if (storageKey && typeof window !== 'undefined') {\n        localStorage.setItem(storageKey, String(newCollapsed));\n      }\n    }\n    onCollapse?.(newCollapsed);\n  };\n\n  const handleItemClick = (item: SidemenuItem, e: React.MouseEvent) => {\n    if (item.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (item.children && item.children.length > 0) {\n      e.preventDefault();\n      setExpandedKeys((prev) => {\n        const next = new Set(prev);\n        if (next.has(item.key)) {\n          next.delete(item.key);\n        } else {\n          next.add(item.key);\n        }\n        return next;\n      });\n    } else {\n      onSelect?.(item.key);\n    }\n  };\n\n  const matchesSearch = (item: SidemenuItem, query: string): boolean => {\n    if (!query) return true;\n    const q = query.toLowerCase();\n    const titleMatch = item.title.toLowerCase().includes(q);\n    const childMatch =\n      item.children?.some((child) => matchesSearch(child, query)) || false;\n    return titleMatch || childMatch;\n  };\n\n  const renderMenuItem = (item: SidemenuItem, level = 0): ReactNode => {\n    if (!matchesSearch(item, searchQuery)) return null;\n\n    const isExpanded = expandedKeys.has(item.key);\n    const isActive = activeKey === item.key;\n    const hasChildren = item.children && item.children.length > 0;\n\n    const itemClass = [\n      styles.sidemenuItem,\n      isActive && styles.active,\n      hasChildren && styles.sidemenuItemParent,\n      isExpanded && styles.expanded,\n      level > 0 && styles.sidemenuItemChild,\n      item.disabled && styles.disabled,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    const ItemTag = item.href ? 'a' : 'div';\n\n    return (\n      <div key={item.key}>\n        <ItemTag\n          href={item.href}\n          className={itemClass}\n          onClick={(e) => handleItemClick(item, e as any)}\n          data-tooltip={isCollapsed ? item.tooltip || item.title : undefined}\n          aria-current={isActive ? 'page' : undefined}\n          aria-expanded={hasChildren ? isExpanded : undefined}\n        >\n          {item.icon && <span className={styles.sidemenuIcon}>{item.icon}</span>}\n          <span className={styles.sidemenuLabel}>{item.title}</span>\n          {item.badge && <span className={styles.sidemenuBadge}>{item.badge}</span>}\n          {hasChildren && !isCollapsed && (\n            <span className={styles.sidemenuChevron}>\n              {isExpanded ? '▼' : '▶'}\n            </span>\n          )}\n        </ItemTag>\n\n        {hasChildren && !isCollapsed && isExpanded && (\n          <div className={styles.sidemenuSubmenu} data-level={level + 1}>\n            {item.children!.map((child) => renderMenuItem(child, level + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderGroup = (group: SidemenuGroup): ReactNode => {\n    return (\n      <div key={group.title} className={styles.sidemenuGroupWrapper}>\n        <div className={styles.sidemenuGroupHeader}>\n          {group.icon && <span>{group.icon}</span>}\n          <span>{group.title}</span>\n        </div>\n        {group.items.map((item) => renderMenuItem(item))}\n      </div>\n    );\n  };\n\n  const renderUserAvatar = () => {\n    if (!userInfo) return null;\n\n    if (typeof userInfo.avatar === 'string') {\n      if (userInfo.avatar.startsWith('http')) {\n        return <img src={userInfo.avatar} alt={userInfo.name} />;\n      }\n      return <div className={styles.sidemenuUserAvatar}>{userInfo.avatar}</div>;\n    }\n\n    if (userInfo.avatar) {\n      return userInfo.avatar;\n    }\n\n    // Default to initials\n    const initials = userInfo.name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n\n    return <div className={styles.sidemenuUserAvatar}>{initials}</div>;\n  };\n\n  return (\n    <nav\n      className={`${styles.sidemenu} ${isCollapsed ? styles.collapsed : ''} ${className}`}\n      role=\"navigation\"\n      aria-label=\"Main navigation\"\n    >\n      {/* Header */}\n      <div className={styles.sidemenuHeader}>\n        {brandIcon && <span className={styles.sidemenuBrandIcon}>{brandIcon}</span>}\n        <span className={styles.sidemenuBrandText}>{brandText}</span>\n        <button\n          className={styles.sidemenuCollapseBtn}\n          onClick={handleToggleCollapse}\n          aria-label={isCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n          aria-expanded={!isCollapsed}\n        >\n          <span>{isCollapsed ? '→' : '←'}</span>\n        </button>\n      </div>\n\n      {/* Search */}\n      {showSearch && !isCollapsed && (\n        <div className={styles.sidemenuSearch}>\n          <input\n            type=\"text\"\n            className={styles.sidemenuSearchInput}\n            placeholder={searchPlaceholder}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            aria-label=\"Search menu\"\n          />\n        </div>\n      )}\n\n      {/* Navigation */}\n      <div className={styles.sidemenuNav}>\n        {items.map((item) => {\n          if (isGroup(item)) {\n            return renderGroup(item);\n          }\n          return renderMenuItem(item);\n        })}\n      </div>\n\n      {/* Footer */}\n      {userInfo && (\n        <div className={styles.sidemenuFooter}>\n          <div className={styles.sidemenuUser}>\n            {renderUserAvatar()}\n            <div className={styles.sidemenuUserInfo}>\n              <div className={styles.sidemenuUserName}>{userInfo.name}</div>\n              {userInfo.email && (\n                <div className={styles.sidemenuUserEmail}>{userInfo.email}</div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n};\n"],"names":["isGroup","item","Sidemenu","items","activeKey","controlledCollapsed","defaultCollapsed","onCollapse","onSelect","brandIcon","brandText","userInfo","showSearch","searchPlaceholder","className","storageKey","uncontrolledCollapsed","setUncontrolledCollapsed","useState","stored","searchQuery","setSearchQuery","expandedKeys","setExpandedKeys","isCollapsed","handleToggleCollapse","newCollapsed","handleItemClick","e","prev","next","matchesSearch","query","q","titleMatch","childMatch","child","renderMenuItem","level","isExpanded","isActive","hasChildren","itemClass","styles","ItemTag","jsxs","jsx","renderGroup","group","renderUserAvatar","initials"],"mappings":"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"}