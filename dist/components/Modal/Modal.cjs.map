{"version":3,"file":"Modal.cjs","sources":["../../../src/components/Modal/Modal.tsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { X } from 'lucide-react';\nimport styles from './Modal.module.css';\n\nexport interface ModalProps {\n  open: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'full';\n  closeOnOverlayClick?: boolean;\n  closeOnEscape?: boolean;\n  className?: string;\n}\n\nexport interface ModalHeaderProps {\n  children: React.ReactNode;\n  onClose?: () => void;\n  showCloseButton?: boolean;\n  className?: string;\n}\n\nexport interface ModalBodyProps {\n  children: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport interface ModalFooterProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nconst Modal = ({\n  open,\n  onClose,\n  children,\n  size = 'md',\n  closeOnOverlayClick = true,\n  closeOnEscape = true,\n  className = '',\n}: ModalProps) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  // Store the previously focused element\n  useEffect(() => {\n    if (open) {\n      previousActiveElement.current = document.activeElement as HTMLElement;\n    }\n  }, [open]);\n\n  // Handle escape key\n  useEffect(() => {\n    if (!open || !closeOnEscape) return;\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [open, closeOnEscape, onClose]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (open) {\n      document.body.style.overflow = 'hidden';\n\n      // Focus the modal\n      if (modalRef.current) {\n        const firstFocusable = modalRef.current.querySelector<HTMLElement>(\n          'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        if (firstFocusable) {\n          setTimeout(() => firstFocusable.focus(), 100);\n        }\n      }\n    } else {\n      document.body.style.overflow = '';\n\n      // Restore focus to the previously focused element\n      if (previousActiveElement.current) {\n        previousActiveElement.current.focus();\n      }\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [open]);\n\n  // Focus trap\n  useEffect(() => {\n    if (!open || !modalRef.current) return;\n\n    const handleTabKey = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab' || !modalRef.current) return;\n\n      const focusableElements = modalRef.current.querySelectorAll<HTMLElement>(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      if (e.shiftKey) {\n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement?.focus();\n        }\n      } else {\n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleTabKey);\n    return () => document.removeEventListener('keydown', handleTabKey);\n  }, [open]);\n\n  const handleOverlayClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (closeOnOverlayClick && e.target === e.currentTarget) {\n        onClose();\n      }\n    },\n    [closeOnOverlayClick, onClose]\n  );\n\n  if (!open) return null;\n\n  const sizeClass = size === 'sm' ? styles.modalSm :\n                    size === 'lg' ? styles.modalLg :\n                    size === 'full' ? styles.modalFull : styles.modalMd;\n\n  return createPortal(\n    <div\n      className={styles.modalOverlay}\n      onClick={handleOverlayClick}\n      role=\"presentation\"\n    >\n      <div\n        ref={modalRef}\n        className={`${styles.modal} ${sizeClass} ${className}`}\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        {children}\n      </div>\n    </div>,\n    document.body\n  );\n};\n\nconst ModalHeader = ({\n  children,\n  onClose,\n  showCloseButton = true,\n  className = '',\n}: ModalHeaderProps) => {\n  return (\n    <div className={`${styles.modalHeader} ${className}`}>\n      {children}\n      {showCloseButton && onClose && (\n        <button\n          className={styles.modalClose}\n          onClick={onClose}\n          aria-label=\"Close\"\n        >\n          <X size={20} />\n        </button>\n      )}\n    </div>\n  );\n};\n\nconst ModalTitle = ({ children }: { children: React.ReactNode }) => {\n  return <h3 className={styles.modalTitle}>{children}</h3>;\n};\n\nconst ModalBody = ({ children, className = '', style }: ModalBodyProps) => {\n  return <div className={`${styles.modalBody} ${className}`} style={style}>{children}</div>;\n};\n\nconst ModalFooter = ({ children, className = '' }: ModalFooterProps) => {\n  return <div className={`${styles.modalFooter} ${className}`}>{children}</div>;\n};\n\nModal.displayName = 'Modal';\nModalHeader.displayName = 'ModalHeader';\nModalTitle.displayName = 'ModalTitle';\nModalBody.displayName = 'ModalBody';\nModalFooter.displayName = 'ModalFooter';\n\nexport { Modal, ModalHeader, ModalTitle, ModalBody, ModalFooter };\n"],"names":["Modal","open","onClose","children","size","closeOnOverlayClick","closeOnEscape","className","modalRef","useRef","previousActiveElement","useEffect","handleEscape","e","firstFocusable","handleTabKey","focusableElements","firstElement","lastElement","handleOverlayClick","useCallback","sizeClass","styles","createPortal","jsx","ModalHeader","showCloseButton","jsxs","X","ModalTitle","ModalBody","style","ModalFooter"],"mappings":"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"}