"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react/jsx-runtime"),u=require("react"),h=require("lucide-react"),t=require("./TreeSelect.module.css.cjs"),X=({data:C,value:x,defaultValue:E=null,onChange:I,multiple:i=!1,showSearch:L=!1,searchPlaceholder:k="Search...",placeholder:T="Select...",disabled:d=!1,className:A="",clearable:R=!1})=>{const[z,D]=u.useState(E),[o,v]=u.useState(!1),[S,O]=u.useState(""),[q,b]=u.useState(new Set),p=u.useRef(null),c=x!==void 0?x:z;u.useEffect(()=>{if(!o)return;const e=a=>{p.current&&!p.current.contains(a.target)&&v(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o]);const N=e=>{x===void 0&&D(e),I?.(e)},g=e=>{if(!d)if(i){const a=Array.isArray(c)?c:c?[c]:[],l=a.includes(e)?a.filter(n=>n!==e):[...a,e];N(l)}else N(e),v(!1)},B=e=>{b(a=>{const l=new Set(a);return l.has(e)?l.delete(e):l.add(e),l})},P=()=>{if(!c)return"";const e=Array.isArray(c)?c:[c],a=[],l=n=>{n.forEach(r=>{e.includes(r.value)&&a.push(r.label),r.children&&l(r.children)})};return l(C),a.join(", ")},y=(e,a)=>{if(!a)return e;const l=a.toLowerCase(),n=[];return e.forEach(r=>{const j=r.label.toLowerCase().includes(l),f=r.children?y(r.children,a):[];(j||f.length>0)&&(n.push({...r,children:f.length>0?f:r.children}),f.length>0&&b(U=>new Set(U).add(r.value)))}),n},$=y(C,S),w=(e,a=0)=>{const l=e.children&&e.children.length>0,n=q.has(e.value),r=i?Array.isArray(c)&&c.includes(e.value):c===e.value;return s.jsxs("div",{className:t.default.treeNode,children:[s.jsxs("div",{className:`${t.default.treeNodeContent} ${r?t.default.treeNodeSelected:""} ${e.disabled?t.default.treeNodeDisabled:""}`,style:{paddingLeft:`${a*20+8}px`},children:[l?s.jsx("button",{className:t.default.treeExpandBtn,onClick:()=>B(e.value),"aria-label":n?"Collapse":"Expand",children:n?s.jsx(h.ChevronDown,{size:16}):s.jsx(h.ChevronRight,{size:16})}):s.jsx("span",{className:t.default.treeIndent}),i&&s.jsx("input",{type:"checkbox",className:t.default.treeCheckbox,checked:r,onChange:()=>g(e.value),disabled:d||e.disabled}),s.jsxs("div",{className:t.default.treeLabel,onClick:()=>!i&&g(e.value),role:i?void 0:"button",children:[e.icon&&s.jsx("span",{className:t.default.treeIcon,children:e.icon}),s.jsx("span",{children:e.label})]})]}),l&&n&&s.jsx("div",{className:t.default.treeChildren,children:e.children.map(j=>w(j,a+1))})]},e.value)},Q=e=>{e.stopPropagation(),N(i?[]:"")},m=P(),M=R&&!d&&m;return s.jsxs("div",{className:`${t.default.treeselect} ${A}`,ref:p,children:[s.jsxs("div",{className:`${t.default.treeselectTrigger} ${d?t.default.disabled:""}`,onClick:()=>!d&&v(!o),role:"combobox","aria-expanded":o,"aria-haspopup":"tree",tabIndex:d?-1:0,children:[s.jsx("span",{className:`${t.default.treeselectValue} ${m?"":t.default.placeholder}`,children:m||T}),s.jsxs("div",{className:t.default.treeselectIcons,children:[M&&s.jsx("button",{className:t.default.treeselectClearBtn,onClick:Q,"aria-label":"Clear selection",children:s.jsx(h.X,{size:16})}),s.jsx(h.ChevronDown,{className:`${t.default.treeselectIcon} ${o?t.default.treeselectIconOpen:""}`,size:16})]})]}),o&&s.jsxs("div",{className:t.default.treeselectDropdown,children:[L&&s.jsxs("div",{className:t.default.treeselectSearch,children:[s.jsx(h.Search,{className:t.default.treeselectSearchIcon,size:16}),s.jsx("input",{type:"text",className:t.default.treeselectSearchInput,placeholder:k,value:S,onChange:e=>O(e.target.value)})]}),s.jsx("div",{className:t.default.treeselectTree,children:$.length===0?s.jsx("div",{className:t.default.treeselectEmpty,children:"No results found"}):$.map(e=>w(e))})]})]})};exports.TreeSelect=X;
//# sourceMappingURL=TreeSelect.cjs.map
