{"version":3,"file":"FileUpload.js","sources":["../../../src/components/FileUpload/FileUpload.tsx"],"sourcesContent":["import React, { useRef, useState, useCallback } from 'react';\nimport { UploadCloud, FileText, X } from 'lucide-react';\nimport styles from './FileUpload.module.css';\n\nexport interface FileUploadFile extends File {\n  id: string;\n  preview?: string;\n  progress?: number;\n  error?: string;\n  status?: 'idle' | 'uploading' | 'success' | 'error';\n}\n\nexport interface FileUploadProps {\n  /**\n   * Label text\n   */\n  label?: string;\n  /**\n   * Helper text shown below upload area\n   */\n  helperText?: string;\n  /**\n   * Accepted file types (e.g., \"image/*\", \".pdf,.doc\")\n   */\n  accept?: string;\n  /**\n   * Maximum file size in bytes\n   */\n  maxSize?: number;\n  /**\n   * Maximum number of files\n   */\n  maxFiles?: number;\n  /**\n   * Allow multiple file selection\n   */\n  multiple?: boolean;\n  /**\n   * Disabled state\n   */\n  disabled?: boolean;\n  /**\n   * Show file preview for images\n   */\n  showPreview?: boolean;\n  /**\n   * Use native file input instead of drag-and-drop area\n   */\n  useNativeInput?: boolean;\n  /**\n   * Custom icon element\n   */\n  icon?: React.ReactNode;\n  /**\n   * Main text in upload area\n   */\n  uploadText?: string;\n  /**\n   * Hint text below main text\n   */\n  hintText?: string;\n  /**\n   * Callback when files are selected\n   */\n  onFilesChange?: (files: File[]) => void;\n  /**\n   * Callback when file is removed\n   */\n  onFileRemove?: (file: File) => void;\n  /**\n   * Custom file validator\n   */\n  validator?: (file: File) => string | null;\n  /**\n   * Additional CSS class\n   */\n  className?: string;\n}\n\nexport const FileUpload: React.FC<FileUploadProps> = ({\n  label,\n  helperText,\n  accept,\n  maxSize = 10 * 1024 * 1024, // 10MB default\n  maxFiles = 10,\n  multiple = false,\n  disabled = false,\n  showPreview = false,\n  useNativeInput = false,\n  icon,\n  uploadText = 'Click to upload or drag and drop',\n  hintText,\n  onFilesChange,\n  onFileRemove,\n  validator,\n  className = '',\n}) => {\n  const [files, setFiles] = useState<FileUploadFile[]>([]);\n  const [isDragging, setIsDragging] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropZoneRef = useRef<HTMLDivElement>(null);\n\n  // Generate unique ID for file\n  const generateFileId = () => `file-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n  // Validate file\n  const validateFile = useCallback(\n    (file: File): string | null => {\n      // Custom validator\n      if (validator) {\n        const error = validator(file);\n        if (error) return error;\n      }\n\n      // Size check\n      if (maxSize && file.size > maxSize) {\n        const sizeMB = (maxSize / 1024 / 1024).toFixed(0);\n        return `File size exceeds ${sizeMB}MB limit`;\n      }\n\n      // Type check (basic)\n      if (accept) {\n        const acceptedTypes = accept.split(',').map((t) => t.trim());\n        const fileExt = `.${file.name.split('.').pop()?.toLowerCase()}`;\n        const fileMimeType = file.type;\n\n        const isAccepted = acceptedTypes.some((type) => {\n          if (type.startsWith('.')) {\n            return fileExt === type.toLowerCase();\n          }\n          if (type.includes('*')) {\n            const [main] = type.split('/');\n            return fileMimeType.startsWith(main);\n          }\n          return fileMimeType === type;\n        });\n\n        if (!isAccepted) {\n          return 'File type not supported';\n        }\n      }\n\n      return null;\n    },\n    [accept, maxSize, validator]\n  );\n\n  // Process files\n  const processFiles = useCallback(\n    (fileList: FileList | File[]) => {\n      const newFiles: FileUploadFile[] = [];\n      const fileArray = Array.from(fileList);\n\n      // Check max files\n      if (!multiple && fileArray.length > 1) {\n        fileArray.splice(1);\n      }\n\n      const totalFiles = multiple ? files.length + fileArray.length : fileArray.length;\n      if (totalFiles > maxFiles) {\n        alert(`Maximum ${maxFiles} files allowed`);\n        return;\n      }\n\n      fileArray.forEach((file) => {\n        const error = validateFile(file);\n        const fileWithMeta = Object.assign(file, {\n          id: generateFileId(),\n          status: error ? ('error' as const) : ('idle' as const),\n          error: error ?? undefined,\n        });\n\n        // Generate preview for images\n        if (showPreview && file.type.startsWith('image/') && !error) {\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            const preview = e.target?.result as string;\n            setFiles((prev) =>\n              prev.map((f) => (f.id === fileWithMeta.id ? { ...f, preview } : f))\n            );\n          };\n          reader.readAsDataURL(file);\n        }\n\n        newFiles.push(fileWithMeta);\n      });\n\n      if (multiple) {\n        setFiles((prev) => [...prev, ...newFiles]);\n        onFilesChange?.([...files, ...newFiles]);\n      } else {\n        setFiles(newFiles);\n        onFilesChange?.(newFiles);\n      }\n    },\n    [files, multiple, maxFiles, validateFile, showPreview, onFilesChange]\n  );\n\n  // Handle file input change\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const fileList = e.target.files;\n    if (fileList && fileList.length > 0) {\n      processFiles(fileList);\n    }\n  };\n\n  // Handle drag events\n  const handleDragEnter = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!disabled) {\n      setIsDragging(true);\n    }\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.currentTarget === dropZoneRef.current) {\n      setIsDragging(false);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n\n    if (disabled) return;\n\n    const droppedFiles = e.dataTransfer.files;\n    if (droppedFiles.length > 0) {\n      processFiles(droppedFiles);\n    }\n  };\n\n  // Handle click\n  const handleClick = () => {\n    if (!disabled) {\n      inputRef.current?.click();\n    }\n  };\n\n  // Handle file remove\n  const handleRemove = (fileToRemove: FileUploadFile) => {\n    setFiles((prev) => prev.filter((f) => f.id !== fileToRemove.id));\n    onFileRemove?.(fileToRemove);\n\n    // Reset input if no files left\n    if (files.length === 1 && inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  // Format file size\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  return (\n    <div className={`${styles['upload-container']} ${className}`}>\n      {label && <label className={styles.label}>{label}</label>}\n\n      {useNativeInput ? (\n        <>\n          <input\n            ref={inputRef}\n            type=\"file\"\n            accept={accept}\n            multiple={multiple}\n            onChange={handleFileChange}\n            disabled={disabled}\n            className={styles['input-file']}\n          />\n          {helperText && <p className={styles['helper-text']}>{helperText}</p>}\n        </>\n      ) : (\n        <>\n          <div\n            ref={dropZoneRef}\n            className={`${styles['upload-area']} ${\n              isDragging ? styles.dragging : ''\n            } ${disabled ? styles.disabled : ''}`}\n            onClick={handleClick}\n            onDragEnter={handleDragEnter}\n            onDragLeave={handleDragLeave}\n            onDragOver={handleDragOver}\n            onDrop={handleDrop}\n            role=\"button\"\n            tabIndex={disabled ? -1 : 0}\n            aria-label=\"File upload area\"\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handleClick();\n              }\n            }}\n          >\n            <input\n              ref={inputRef}\n              type=\"file\"\n              accept={accept}\n              multiple={multiple}\n              onChange={handleFileChange}\n              disabled={disabled}\n              style={{ display: 'none' }}\n              aria-hidden=\"true\"\n            />\n\n            {icon && <div className={styles['upload-icon']}>{icon}</div>}\n\n            {!icon && (\n              <div className={styles['upload-icon']}>\n                <UploadCloud size={48} />\n              </div>\n            )}\n\n            <div className={styles['upload-text']}>{uploadText}</div>\n            {hintText && <div className={styles['upload-hint']}>{hintText}</div>}\n          </div>\n\n          {helperText && <p className={styles['helper-text']}>{helperText}</p>}\n        </>\n      )}\n\n      {files.length > 0 && (\n        <div className={styles['file-list']}>\n          {files.map((file) => (\n            <div\n              key={file.id}\n              className={`${styles['file-item']} ${\n                file.status === 'error' ? styles['file-error'] : ''\n              } ${file.status === 'success' ? styles['file-success'] : ''}`}\n            >\n              {showPreview && file.preview && (\n                <div className={styles['file-preview']}>\n                  <img src={file.preview} alt={file.name} />\n                </div>\n              )}\n\n              {!file.preview && (\n                <div className={styles['file-icon']}>\n                  <FileText size={24} />\n                </div>\n              )}\n\n              <div className={styles['file-info']}>\n                <div className={styles['file-name']}>{file.name}</div>\n                <div className={styles['file-size']}>{formatFileSize(file.size)}</div>\n                {file.error && (\n                  <div className={styles['file-error-msg']}>{file.error}</div>\n                )}\n              </div>\n\n              {file.status === 'uploading' && file.progress !== undefined && (\n                <div className={styles['upload-file-progress']}>\n                  <div style={{\n                    flex: 1,\n                    height: '4px',\n                    backgroundColor: 'var(--color-gray-200)',\n                    borderRadius: 'var(--radius-full)',\n                    overflow: 'hidden'\n                  }}>\n                    <div style={{\n                      width: `${file.progress}%`,\n                      height: '100%',\n                      backgroundColor: 'var(--color-primary-500)',\n                      transition: 'width var(--duration-normal) var(--ease-out)'\n                    }} />\n                  </div>\n                  <span style={{\n                    marginLeft: 'var(--spacing-2)',\n                    fontSize: 'var(--font-size-body-small)',\n                    color: 'var(--text-secondary)'\n                  }}>\n                    {file.progress}%\n                  </span>\n                </div>\n              )}\n\n              {file.status !== 'uploading' && (\n                <button\n                  type=\"button\"\n                  className={styles['remove-btn']}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleRemove(file);\n                  }}\n                  aria-label={`Remove ${file.name}`}\n                >\n                  <X size={18} />\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["FileUpload","label","helperText","accept","maxSize","maxFiles","multiple","disabled","showPreview","useNativeInput","icon","uploadText","hintText","onFilesChange","onFileRemove","validator","className","files","setFiles","useState","isDragging","setIsDragging","inputRef","useRef","dropZoneRef","generateFileId","validateFile","useCallback","file","error","acceptedTypes","t","fileExt","fileMimeType","type","main","processFiles","fileList","newFiles","fileArray","fileWithMeta","reader","e","preview","prev","f","handleFileChange","handleDragEnter","handleDragLeave","handleDragOver","handleDrop","droppedFiles","handleClick","handleRemove","fileToRemove","formatFileSize","bytes","k","sizes","i","jsxs","styles","jsx","Fragment","UploadCloud","FileText","X"],"mappings":"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"}