{"version":3,"file":"Watermark.cjs","sources":["../../../src/components/Watermark/Watermark.tsx"],"sourcesContent":["import type { ReactNode, CSSProperties } from 'react';\nimport { useRef, useEffect, useState } from 'react';\nimport styles from './Watermark.module.css';\n\nexport interface WatermarkProps {\n  /** Watermark text content */\n  content?: string | string[];\n  /** Children to be watermarked */\n  children: ReactNode;\n  /** Font size in pixels */\n  fontSize?: number;\n  /** Rotation angle in degrees */\n  rotate?: number;\n  /** Text opacity (0-1) */\n  opacity?: number;\n  /** Gap between watermark texts in pixels */\n  gap?: number;\n  /** Apply watermark to entire viewport */\n  fullscreen?: boolean;\n  /** Additional CSS class */\n  className?: string;\n  /** Additional inline styles for container */\n  style?: CSSProperties;\n}\n\n/**\n * Watermark Component\n *\n * Add semi-transparent text overlay to protect content from unauthorized use.\n * Ideal for sensitive documents, copyright protection, and user tracking.\n *\n * @example\n * ```tsx\n * <Watermark content=\"CONFIDENTIAL\">\n *   <div>Your protected content here</div>\n * </Watermark>\n * ```\n *\n * @example\n * ```tsx\n * // Multi-line watermark\n * <Watermark\n *   content={['Internal Use Only', 'Do Not Distribute']}\n *   opacity={0.1}\n *   rotate={-45}\n * >\n *   <div>Protected document</div>\n * </Watermark>\n * ```\n *\n * @example\n * ```tsx\n * // User tracking watermark\n * <Watermark\n *   content=\"user@example.com\"\n *   opacity={0.05}\n *   fontSize={14}\n * >\n *   <div>Sensitive data dashboard</div>\n * </Watermark>\n * ```\n */\nexport const Watermark = ({\n  content = 'Watermark',\n  children,\n  fontSize = 16,\n  rotate = -45,\n  opacity = 0.08,\n  gap = 100,\n  fullscreen = false,\n  className = '',\n  style = {},\n}: WatermarkProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [watermarkItems, setWatermarkItems] = useState<\n    Array<{ text: string; left: number; top: number }>\n  >([]);\n\n  useEffect(() => {\n    const generateWatermark = () => {\n      if (!containerRef.current) return;\n\n      const container = fullscreen ? document.body : containerRef.current;\n      const { offsetWidth: width, offsetHeight: height } = container;\n\n      if (width === 0 || height === 0) return;\n\n      // Calculate diagonal length for full coverage\n      const diagonal = Math.sqrt(width * width + height * height);\n\n      // Determine spacing based on fontSize and gap\n      const spacing = fontSize + gap;\n\n      // Calculate number of items needed\n      const columns = Math.ceil(diagonal / spacing);\n      const rows = Math.ceil(diagonal / spacing);\n\n      const items: Array<{ text: string; left: number; top: number }> = [];\n\n      // Convert content to string array\n      const contentArray = Array.isArray(content) ? content : [content];\n      const text = contentArray.join('\\n');\n\n      // Generate grid of watermark items\n      for (let i = 0; i < columns; i++) {\n        for (let j = 0; j < rows; j++) {\n          items.push({\n            text,\n            left: i * spacing,\n            top: j * spacing,\n          });\n        }\n      }\n\n      setWatermarkItems(items);\n    };\n\n    generateWatermark();\n\n    // Regenerate on window resize\n    const handleResize = () => {\n      generateWatermark();\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [content, fontSize, gap, fullscreen]);\n\n  const watermarkStyle: CSSProperties = {\n    opacity,\n  };\n\n  const textStyle: CSSProperties = {\n    fontSize: `${fontSize}px`,\n    transform: `rotate(${rotate}deg)`,\n  };\n\n  const watermarkLayer = (\n    <div\n      className={`${styles.watermark} ${fullscreen ? styles.watermarkFullscreen : ''}`}\n      style={watermarkStyle}\n      aria-hidden=\"true\"\n    >\n      {watermarkItems.map((item, index) => (\n        <span\n          key={index}\n          className={styles.watermarkText}\n          style={{\n            ...textStyle,\n            left: `${item.left}px`,\n            top: `${item.top}px`,\n            whiteSpace: Array.isArray(content) ? 'pre-line' : 'nowrap',\n          }}\n        >\n          {item.text}\n        </span>\n      ))}\n    </div>\n  );\n\n  if (fullscreen) {\n    // Render fullscreen watermark as a sibling to body\n    return (\n      <>\n        {watermarkLayer}\n        {children}\n      </>\n    );\n  }\n\n  // Render as wrapper container\n  return (\n    <div ref={containerRef} className={`${styles.watermarkContainer} ${className}`} style={style}>\n      {children}\n      {watermarkLayer}\n    </div>\n  );\n};\n\nWatermark.displayName = 'Watermark';\n"],"names":["Watermark","content","children","fontSize","rotate","opacity","gap","fullscreen","className","style","containerRef","useRef","watermarkItems","setWatermarkItems","useState","useEffect","generateWatermark","container","width","height","diagonal","spacing","columns","rows","items","text","i","j","handleResize","watermarkStyle","textStyle","watermarkLayer","jsx","styles","item","index","jsxs","Fragment"],"mappings":"gLA8DaA,EAAY,CAAC,CACxB,QAAAC,EAAU,YACV,SAAAC,EACA,SAAAC,EAAW,GACX,OAAAC,EAAS,IACT,QAAAC,EAAU,IACV,IAAAC,EAAM,IACN,WAAAC,EAAa,GACb,UAAAC,EAAY,GACZ,MAAAC,EAAQ,CAAA,CACV,IAAsB,CACpB,MAAMC,EAAeC,EAAAA,OAAuB,IAAI,EAC1C,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAE1C,CAAA,CAAE,EAEJC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAoB,IAAM,CAC9B,GAAI,CAACN,EAAa,QAAS,OAE3B,MAAMO,EAAYV,EAAa,SAAS,KAAOG,EAAa,QACtD,CAAE,YAAaQ,EAAO,aAAcC,GAAWF,EAErD,GAAIC,IAAU,GAAKC,IAAW,EAAG,OAGjC,MAAMC,EAAW,KAAK,KAAKF,EAAQA,EAAQC,EAASA,CAAM,EAGpDE,EAAUlB,EAAWG,EAGrBgB,EAAU,KAAK,KAAKF,EAAWC,CAAO,EACtCE,EAAO,KAAK,KAAKH,EAAWC,CAAO,EAEnCG,EAA4D,CAAA,EAI5DC,GADe,MAAM,QAAQxB,CAAO,EAAIA,EAAU,CAACA,CAAO,GACtC,KAAK;AAAA,CAAI,EAGnC,QAASyB,EAAI,EAAGA,EAAIJ,EAASI,IAC3B,QAASC,EAAI,EAAGA,EAAIJ,EAAMI,IACxBH,EAAM,KAAK,CACT,KAAAC,EACA,KAAMC,EAAIL,EACV,IAAKM,EAAIN,CAAA,CACV,EAILR,EAAkBW,CAAK,CACzB,EAEAR,EAAA,EAGA,MAAMY,EAAe,IAAM,CACzBZ,EAAA,CACF,EAEA,cAAO,iBAAiB,SAAUY,CAAY,EACvC,IAAM,OAAO,oBAAoB,SAAUA,CAAY,CAChE,EAAG,CAAC3B,EAASE,EAAUG,EAAKC,CAAU,CAAC,EAEvC,MAAMsB,EAAgC,CACpC,QAAAxB,CAAA,EAGIyB,EAA2B,CAC/B,SAAU,GAAG3B,CAAQ,KACrB,UAAW,UAAUC,CAAM,MAAA,EAGvB2B,EACJC,EAAAA,IAAC,MAAA,CACC,UAAW,GAAGC,EAAAA,QAAO,SAAS,IAAI1B,EAAa0B,EAAAA,QAAO,oBAAsB,EAAE,GAC9E,MAAOJ,EACP,cAAY,OAEX,SAAAjB,EAAe,IAAI,CAACsB,EAAMC,IACzBH,EAAAA,IAAC,OAAA,CAEC,UAAWC,EAAAA,QAAO,cAClB,MAAO,CACL,GAAGH,EACH,KAAM,GAAGI,EAAK,IAAI,KAClB,IAAK,GAAGA,EAAK,GAAG,KAChB,WAAY,MAAM,QAAQjC,CAAO,EAAI,WAAa,QAAA,EAGnD,SAAAiC,EAAK,IAAA,EATDC,CAAA,CAWR,CAAA,CAAA,EAIL,OAAI5B,EAGA6B,EAAAA,KAAAC,WAAA,CACG,SAAA,CAAAN,EACA7B,CAAA,EACH,EAMFkC,EAAAA,KAAC,MAAA,CAAI,IAAK1B,EAAc,UAAW,GAAGuB,EAAAA,QAAO,kBAAkB,IAAIzB,CAAS,GAAI,MAAAC,EAC7E,SAAA,CAAAP,EACA6B,CAAA,EACH,CAEJ,EAEA/B,EAAU,YAAc"}