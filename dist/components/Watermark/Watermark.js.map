{"version":3,"file":"Watermark.js","sources":["../../../src/components/Watermark/Watermark.tsx"],"sourcesContent":["import type { ReactNode, CSSProperties } from 'react';\nimport { useRef, useEffect, useState } from 'react';\nimport styles from './Watermark.module.css';\n\nexport interface WatermarkProps {\n  /** Watermark text content */\n  content?: string | string[];\n  /** Children to be watermarked */\n  children: ReactNode;\n  /** Font size in pixels */\n  fontSize?: number;\n  /** Rotation angle in degrees */\n  rotate?: number;\n  /** Text opacity (0-1) */\n  opacity?: number;\n  /** Gap between watermark texts in pixels */\n  gap?: number;\n  /** Apply watermark to entire viewport */\n  fullscreen?: boolean;\n  /** Additional CSS class */\n  className?: string;\n  /** Additional inline styles for container */\n  style?: CSSProperties;\n}\n\n/**\n * Watermark Component\n *\n * Add semi-transparent text overlay to protect content from unauthorized use.\n * Ideal for sensitive documents, copyright protection, and user tracking.\n *\n * @example\n * ```tsx\n * <Watermark content=\"CONFIDENTIAL\">\n *   <div>Your protected content here</div>\n * </Watermark>\n * ```\n *\n * @example\n * ```tsx\n * // Multi-line watermark\n * <Watermark\n *   content={['Internal Use Only', 'Do Not Distribute']}\n *   opacity={0.1}\n *   rotate={-45}\n * >\n *   <div>Protected document</div>\n * </Watermark>\n * ```\n *\n * @example\n * ```tsx\n * // User tracking watermark\n * <Watermark\n *   content=\"user@example.com\"\n *   opacity={0.05}\n *   fontSize={14}\n * >\n *   <div>Sensitive data dashboard</div>\n * </Watermark>\n * ```\n */\nexport const Watermark = ({\n  content = 'Watermark',\n  children,\n  fontSize = 16,\n  rotate = -45,\n  opacity = 0.08,\n  gap = 100,\n  fullscreen = false,\n  className = '',\n  style = {},\n}: WatermarkProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [watermarkItems, setWatermarkItems] = useState<\n    Array<{ text: string; left: number; top: number }>\n  >([]);\n\n  useEffect(() => {\n    const generateWatermark = () => {\n      if (!containerRef.current) return;\n\n      const container = fullscreen ? document.body : containerRef.current;\n      const { offsetWidth: width, offsetHeight: height } = container;\n\n      if (width === 0 || height === 0) return;\n\n      // Calculate diagonal length for full coverage\n      const diagonal = Math.sqrt(width * width + height * height);\n\n      // Determine spacing based on fontSize and gap\n      const spacing = fontSize + gap;\n\n      // Calculate number of items needed\n      const columns = Math.ceil(diagonal / spacing);\n      const rows = Math.ceil(diagonal / spacing);\n\n      const items: Array<{ text: string; left: number; top: number }> = [];\n\n      // Convert content to string array\n      const contentArray = Array.isArray(content) ? content : [content];\n      const text = contentArray.join('\\n');\n\n      // Generate grid of watermark items\n      for (let i = 0; i < columns; i++) {\n        for (let j = 0; j < rows; j++) {\n          items.push({\n            text,\n            left: i * spacing,\n            top: j * spacing,\n          });\n        }\n      }\n\n      setWatermarkItems(items);\n    };\n\n    generateWatermark();\n\n    // Regenerate on window resize\n    const handleResize = () => {\n      generateWatermark();\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [content, fontSize, gap, fullscreen]);\n\n  const watermarkStyle: CSSProperties = {\n    opacity,\n  };\n\n  const textStyle: CSSProperties = {\n    fontSize: `${fontSize}px`,\n    transform: `rotate(${rotate}deg)`,\n  };\n\n  const watermarkLayer = (\n    <div\n      className={`${styles.watermark} ${fullscreen ? styles.watermarkFullscreen : ''}`}\n      style={watermarkStyle}\n      aria-hidden=\"true\"\n    >\n      {watermarkItems.map((item, index) => (\n        <span\n          key={index}\n          className={styles.watermarkText}\n          style={{\n            ...textStyle,\n            left: `${item.left}px`,\n            top: `${item.top}px`,\n            whiteSpace: Array.isArray(content) ? 'pre-line' : 'nowrap',\n          }}\n        >\n          {item.text}\n        </span>\n      ))}\n    </div>\n  );\n\n  if (fullscreen) {\n    // Render fullscreen watermark as a sibling to body\n    return (\n      <>\n        {watermarkLayer}\n        {children}\n      </>\n    );\n  }\n\n  // Render as wrapper container\n  return (\n    <div ref={containerRef} className={`${styles.watermarkContainer} ${className}`} style={style}>\n      {children}\n      {watermarkLayer}\n    </div>\n  );\n};\n\nWatermark.displayName = 'Watermark';\n"],"names":["Watermark","content","children","fontSize","rotate","opacity","gap","fullscreen","className","style","containerRef","useRef","watermarkItems","setWatermarkItems","useState","useEffect","generateWatermark","container","width","height","diagonal","spacing","columns","rows","items","text","i","j","handleResize","watermarkStyle","textStyle","watermarkLayer","jsx","styles","item","index","jsxs","Fragment"],"mappings":";;;AA8DO,MAAMA,IAAY,CAAC;AAAA,EACxB,SAAAC,IAAU;AAAA,EACV,UAAAC;AAAA,EACA,UAAAC,IAAW;AAAA,EACX,QAAAC,IAAS;AAAA,EACT,SAAAC,IAAU;AAAA,EACV,KAAAC,IAAM;AAAA,EACN,YAAAC,IAAa;AAAA,EACb,WAAAC,IAAY;AAAA,EACZ,OAAAC,IAAQ,CAAA;AACV,MAAsB;AACpB,QAAMC,IAAeC,EAAuB,IAAI,GAC1C,CAACC,GAAgBC,CAAiB,IAAIC,EAE1C,CAAA,CAAE;AAEJ,EAAAC,EAAU,MAAM;AACd,UAAMC,IAAoB,MAAM;AAC9B,UAAI,CAACN,EAAa,QAAS;AAE3B,YAAMO,IAAYV,IAAa,SAAS,OAAOG,EAAa,SACtD,EAAE,aAAaQ,GAAO,cAAcC,MAAWF;AAErD,UAAIC,MAAU,KAAKC,MAAW,EAAG;AAGjC,YAAMC,IAAW,KAAK,KAAKF,IAAQA,IAAQC,IAASA,CAAM,GAGpDE,IAAUlB,IAAWG,GAGrBgB,IAAU,KAAK,KAAKF,IAAWC,CAAO,GACtCE,IAAO,KAAK,KAAKH,IAAWC,CAAO,GAEnCG,IAA4D,CAAA,GAI5DC,KADe,MAAM,QAAQxB,CAAO,IAAIA,IAAU,CAACA,CAAO,GACtC,KAAK;AAAA,CAAI;AAGnC,eAASyB,IAAI,GAAGA,IAAIJ,GAASI;AAC3B,iBAASC,IAAI,GAAGA,IAAIJ,GAAMI;AACxB,UAAAH,EAAM,KAAK;AAAA,YACT,MAAAC;AAAA,YACA,MAAMC,IAAIL;AAAA,YACV,KAAKM,IAAIN;AAAA,UAAA,CACV;AAIL,MAAAR,EAAkBW,CAAK;AAAA,IACzB;AAEA,IAAAR,EAAA;AAGA,UAAMY,IAAe,MAAM;AACzB,MAAAZ,EAAA;AAAA,IACF;AAEA,kBAAO,iBAAiB,UAAUY,CAAY,GACvC,MAAM,OAAO,oBAAoB,UAAUA,CAAY;AAAA,EAChE,GAAG,CAAC3B,GAASE,GAAUG,GAAKC,CAAU,CAAC;AAEvC,QAAMsB,IAAgC;AAAA,IACpC,SAAAxB;AAAA,EAAA,GAGIyB,IAA2B;AAAA,IAC/B,UAAU,GAAG3B,CAAQ;AAAA,IACrB,WAAW,UAAUC,CAAM;AAAA,EAAA,GAGvB2B,IACJ,gBAAAC;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,GAAGC,EAAO,SAAS,IAAI1B,IAAa0B,EAAO,sBAAsB,EAAE;AAAA,MAC9E,OAAOJ;AAAA,MACP,eAAY;AAAA,MAEX,UAAAjB,EAAe,IAAI,CAACsB,GAAMC,MACzB,gBAAAH;AAAA,QAAC;AAAA,QAAA;AAAA,UAEC,WAAWC,EAAO;AAAA,UAClB,OAAO;AAAA,YACL,GAAGH;AAAA,YACH,MAAM,GAAGI,EAAK,IAAI;AAAA,YAClB,KAAK,GAAGA,EAAK,GAAG;AAAA,YAChB,YAAY,MAAM,QAAQjC,CAAO,IAAI,aAAa;AAAA,UAAA;AAAA,UAGnD,UAAAiC,EAAK;AAAA,QAAA;AAAA,QATDC;AAAA,MAAA,CAWR;AAAA,IAAA;AAAA,EAAA;AAIL,SAAI5B,IAGA,gBAAA6B,EAAAC,GAAA,EACG,UAAA;AAAA,IAAAN;AAAA,IACA7B;AAAA,EAAA,GACH,IAMF,gBAAAkC,EAAC,OAAA,EAAI,KAAK1B,GAAc,WAAW,GAAGuB,EAAO,kBAAkB,IAAIzB,CAAS,IAAI,OAAAC,GAC7E,UAAA;AAAA,IAAAP;AAAA,IACA6B;AAAA,EAAA,GACH;AAEJ;AAEA/B,EAAU,cAAc;"}