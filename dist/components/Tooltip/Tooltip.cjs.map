{"version":3,"file":"Tooltip.cjs","sources":["../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useId } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Tooltip.module.css';\n\nexport interface TooltipProps {\n  content: React.ReactNode;\n  children: React.ReactElement;\n  position?: 'top' | 'bottom' | 'left' | 'right';\n  delay?: number;\n  rich?: boolean;\n  className?: string;\n  id?: string;\n}\n\nconst Tooltip = ({\n  content,\n  children,\n  position = 'top',\n  delay = 300,\n  rich = false,\n  className = '',\n  id,\n}: TooltipProps) => {\n  const generatedId = useId();\n  const tooltipId = id || `tooltip-${generatedId}`;\n  const [isVisible, setIsVisible] = useState(false);\n  const [tooltipPosition, setTooltipPosition] = useState({ top: 0, left: 0 });\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | undefined>(undefined);\n  const triggerRef = useRef<HTMLElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  const showTooltip = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    timeoutRef.current = setTimeout(() => {\n      setIsVisible(true);\n    }, delay);\n  };\n\n  const hideTooltip = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setIsVisible(false);\n  };\n\n  // Position tooltip relative to trigger\n  useEffect(() => {\n    if (!isVisible || !triggerRef.current || !tooltipRef.current) return;\n\n    const trigger = triggerRef.current;\n    const tooltip = tooltipRef.current;\n    const triggerRect = trigger.getBoundingClientRect();\n    const tooltipRect = tooltip.getBoundingClientRect();\n\n    let top = 0;\n    let left = 0;\n\n    switch (position) {\n      case 'top':\n        top = triggerRect.top - tooltipRect.height - 8;\n        left = triggerRect.left + triggerRect.width / 2 - tooltipRect.width / 2;\n        break;\n      case 'bottom':\n        top = triggerRect.bottom + 8;\n        left = triggerRect.left + triggerRect.width / 2 - tooltipRect.width / 2;\n        break;\n      case 'left':\n        top = triggerRect.top + triggerRect.height / 2 - tooltipRect.height / 2;\n        left = triggerRect.left - tooltipRect.width - 8;\n        break;\n      case 'right':\n        top = triggerRect.top + triggerRect.height / 2 - tooltipRect.height / 2;\n        left = triggerRect.right + 8;\n        break;\n    }\n\n    // Keep within viewport\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const margin = 8;\n\n    if (left < margin) left = margin;\n    if (left + tooltipRect.width > viewportWidth - margin) {\n      left = viewportWidth - tooltipRect.width - margin;\n    }\n    if (top < margin) top = margin;\n    if (top + tooltipRect.height > viewportHeight - margin) {\n      top = viewportHeight - tooltipRect.height - margin;\n    }\n\n    setTooltipPosition({ top, left });\n  }, [isVisible, position]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Clone child element and add event handlers\n  interface ChildEventHandlers {\n    onMouseEnter?: (e: React.MouseEvent) => void;\n    onMouseLeave?: (e: React.MouseEvent) => void;\n    onFocus?: (e: React.FocusEvent) => void;\n    onBlur?: (e: React.FocusEvent) => void;\n  }\n  const childProps = children.props as ChildEventHandlers;\n  const trigger = React.cloneElement(children, {\n    ref: triggerRef,\n    onMouseEnter: (e: React.MouseEvent) => {\n      showTooltip();\n      childProps.onMouseEnter?.(e);\n    },\n    onMouseLeave: (e: React.MouseEvent) => {\n      hideTooltip();\n      childProps.onMouseLeave?.(e);\n    },\n    onFocus: (e: React.FocusEvent) => {\n      showTooltip();\n      childProps.onFocus?.(e);\n    },\n    onBlur: (e: React.FocusEvent) => {\n      hideTooltip();\n      childProps.onBlur?.(e);\n    },\n    'aria-describedby': isVisible ? tooltipId : undefined,\n  } as React.HTMLAttributes<HTMLElement>);\n\n  const positionClass = position === 'top' ? styles.tooltipTop :\n                        position === 'right' ? styles.tooltipRight :\n                        position === 'left' ? styles.tooltipLeft :\n                        styles.tooltipBottom;\n\n  const richClass = rich ? styles.tooltipRich : '';\n\n  return (\n    <>\n      {trigger}\n      {isVisible && createPortal(\n        <div\n          ref={tooltipRef}\n          className={`${styles.tooltip} ${positionClass} ${richClass} ${className}`}\n          role=\"tooltip\"\n          id={tooltipId}\n          style={{\n            top: `${tooltipPosition.top}px`,\n            left: `${tooltipPosition.left}px`,\n          }}\n        >\n          {content}\n        </div>,\n        document.body\n      )}\n    </>\n  );\n};\n\nTooltip.displayName = 'Tooltip';\n\nexport { Tooltip };\n"],"names":["Tooltip","content","children","position","delay","rich","className","id","generatedId","useId","tooltipId","isVisible","setIsVisible","useState","tooltipPosition","setTooltipPosition","timeoutRef","useRef","triggerRef","tooltipRef","showTooltip","hideTooltip","useEffect","trigger","tooltip","triggerRect","tooltipRect","top","left","viewportWidth","viewportHeight","margin","childProps","React","e","positionClass","styles","richClass","jsxs","Fragment","createPortal","jsx"],"mappings":"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"}