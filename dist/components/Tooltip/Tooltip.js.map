{"version":3,"file":"Tooltip.js","sources":["../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useId } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Tooltip.module.css';\n\nexport interface TooltipProps {\n  content: React.ReactNode;\n  children: React.ReactElement;\n  position?: 'top' | 'bottom' | 'left' | 'right';\n  delay?: number;\n  rich?: boolean;\n  className?: string;\n  id?: string;\n}\n\nconst Tooltip = ({\n  content,\n  children,\n  position = 'top',\n  delay = 300,\n  rich = false,\n  className = '',\n  id,\n}: TooltipProps) => {\n  const generatedId = useId();\n  const tooltipId = id || `tooltip-${generatedId}`;\n  const [isVisible, setIsVisible] = useState(false);\n  const [tooltipPosition, setTooltipPosition] = useState({ top: 0, left: 0 });\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | undefined>(undefined);\n  const triggerRef = useRef<HTMLElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  const showTooltip = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    timeoutRef.current = setTimeout(() => {\n      setIsVisible(true);\n    }, delay);\n  };\n\n  const hideTooltip = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setIsVisible(false);\n  };\n\n  // Position tooltip relative to trigger\n  useEffect(() => {\n    if (!isVisible || !triggerRef.current || !tooltipRef.current) return;\n\n    const trigger = triggerRef.current;\n    const tooltip = tooltipRef.current;\n    const triggerRect = trigger.getBoundingClientRect();\n    const tooltipRect = tooltip.getBoundingClientRect();\n\n    let top = 0;\n    let left = 0;\n\n    switch (position) {\n      case 'top':\n        top = triggerRect.top - tooltipRect.height - 8;\n        left = triggerRect.left + triggerRect.width / 2 - tooltipRect.width / 2;\n        break;\n      case 'bottom':\n        top = triggerRect.bottom + 8;\n        left = triggerRect.left + triggerRect.width / 2 - tooltipRect.width / 2;\n        break;\n      case 'left':\n        top = triggerRect.top + triggerRect.height / 2 - tooltipRect.height / 2;\n        left = triggerRect.left - tooltipRect.width - 8;\n        break;\n      case 'right':\n        top = triggerRect.top + triggerRect.height / 2 - tooltipRect.height / 2;\n        left = triggerRect.right + 8;\n        break;\n    }\n\n    // Keep within viewport\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const margin = 8;\n\n    if (left < margin) left = margin;\n    if (left + tooltipRect.width > viewportWidth - margin) {\n      left = viewportWidth - tooltipRect.width - margin;\n    }\n    if (top < margin) top = margin;\n    if (top + tooltipRect.height > viewportHeight - margin) {\n      top = viewportHeight - tooltipRect.height - margin;\n    }\n\n    setTooltipPosition({ top, left });\n  }, [isVisible, position]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Clone child element and add event handlers\n  interface ChildEventHandlers {\n    onMouseEnter?: (e: React.MouseEvent) => void;\n    onMouseLeave?: (e: React.MouseEvent) => void;\n    onFocus?: (e: React.FocusEvent) => void;\n    onBlur?: (e: React.FocusEvent) => void;\n  }\n  const childProps = children.props as ChildEventHandlers;\n  const trigger = React.cloneElement(children, {\n    ref: triggerRef,\n    onMouseEnter: (e: React.MouseEvent) => {\n      showTooltip();\n      childProps.onMouseEnter?.(e);\n    },\n    onMouseLeave: (e: React.MouseEvent) => {\n      hideTooltip();\n      childProps.onMouseLeave?.(e);\n    },\n    onFocus: (e: React.FocusEvent) => {\n      showTooltip();\n      childProps.onFocus?.(e);\n    },\n    onBlur: (e: React.FocusEvent) => {\n      hideTooltip();\n      childProps.onBlur?.(e);\n    },\n    'aria-describedby': isVisible ? tooltipId : undefined,\n  } as React.HTMLAttributes<HTMLElement>);\n\n  const positionClass = position === 'top' ? styles.tooltipTop :\n                        position === 'right' ? styles.tooltipRight :\n                        position === 'left' ? styles.tooltipLeft :\n                        styles.tooltipBottom;\n\n  const richClass = rich ? styles.tooltipRich : '';\n\n  return (\n    <>\n      {trigger}\n      {isVisible && createPortal(\n        <div\n          ref={tooltipRef}\n          className={`${styles.tooltip} ${positionClass} ${richClass} ${className}`}\n          role=\"tooltip\"\n          id={tooltipId}\n          style={{\n            top: `${tooltipPosition.top}px`,\n            left: `${tooltipPosition.left}px`,\n          }}\n        >\n          {content}\n        </div>,\n        document.body\n      )}\n    </>\n  );\n};\n\nTooltip.displayName = 'Tooltip';\n\nexport { Tooltip };\n"],"names":["Tooltip","content","children","position","delay","rich","className","id","generatedId","useId","tooltipId","isVisible","setIsVisible","useState","tooltipPosition","setTooltipPosition","timeoutRef","useRef","triggerRef","tooltipRef","showTooltip","hideTooltip","useEffect","trigger","tooltip","triggerRect","tooltipRect","top","left","viewportWidth","viewportHeight","margin","childProps","React","e","positionClass","styles","richClass","jsxs","Fragment","createPortal","jsx"],"mappings":"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"}