{"version":3,"file":"OrderList.cjs","sources":["../../../src/components/OrderList/OrderList.tsx"],"sourcesContent":["import type { ReactNode, DragEvent } from 'react';\nimport { useState, useRef } from 'react';\nimport { ChevronUp, ChevronDown, GripVertical } from 'lucide-react';\nimport styles from './OrderList.module.css';\n\nexport interface OrderListItemProps {\n  /** Unique identifier for the item */\n  id?: string;\n  /** Item content */\n  children: ReactNode;\n  /** Leading icon */\n  icon?: ReactNode;\n  /** Trailing badge or status indicator */\n  badge?: ReactNode;\n  /** Whether the item is selected (when selectable) */\n  selected?: boolean;\n  /** Callback when selection changes */\n  onSelect?: (selected: boolean) => void;\n  /** Custom className */\n  className?: string;\n}\n\nexport interface OrderListProps {\n  /** List title */\n  title?: ReactNode;\n  /** Header actions */\n  actions?: ReactNode;\n  /** List items */\n  children: ReactNode;\n  /** Enable drag and drop */\n  draggable?: boolean;\n  /** Enable item selection with checkboxes */\n  selectable?: boolean;\n  /** Compact variant */\n  compact?: boolean;\n  /** Callback when order changes */\n  onReorder?: (items: ReactNode[]) => void;\n  /** Custom className */\n  className?: string;\n}\n\n/**\n * Order List Item Component\n *\n * Individual item in an OrderList that can be reordered.\n *\n * @example\n * ```tsx\n * <OrderList.Item icon={<CheckCircle />}>\n *   System Backup\n * </OrderList.Item>\n * ```\n */\nexport const OrderListItem = (_props: OrderListItemProps) => {\n  // This component is primarily for type safety and structure\n  // The actual rendering is handled by the parent OrderList\n  return null;\n};\n\nOrderListItem.displayName = 'OrderList.Item';\n\n/**\n * Order List Component\n *\n * A reorderable list with move up/down controls and optional drag-and-drop functionality.\n * Ideal for managing task priorities, automation rules, device order, and execution queues.\n *\n * @example\n * ```tsx\n * <OrderList title=\"Task Priority\" draggable>\n *   <OrderList.Item icon={<CheckCircle />}>System Backup</OrderList.Item>\n *   <OrderList.Item icon={<Shield />}>Security Update</OrderList.Item>\n *   <OrderList.Item icon={<Activity />}>Performance Check</OrderList.Item>\n * </OrderList>\n * ```\n *\n * @example\n * ```tsx\n * // With selection\n * <OrderList title=\"Device Priority\" selectable>\n *   <OrderList.Item icon={<Cpu />}>Main Controller</OrderList.Item>\n *   <OrderList.Item icon={<Thermometer />}>Temperature Sensor</OrderList.Item>\n * </OrderList>\n * ```\n */\nexport const OrderList = ({\n  title,\n  actions,\n  children,\n  draggable = false,\n  selectable = false,\n  compact = false,\n  onReorder,\n  className,\n}: OrderListProps) => {\n  // Convert children to array for manipulation\n  const childrenArray = Array.isArray(children) ? children : children ? [children] : [];\n\n  const [items, setItems] = useState<ReactNode[]>(childrenArray);\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const dragOverIndex = useRef<number | null>(null);\n\n  // Update items when children change\n  const currentItems = childrenArray.length > 0 ? childrenArray : items;\n\n  const containerClasses = [\n    styles.orderList,\n    draggable && styles.orderListDraggable,\n    selectable && styles.orderListSelectable,\n    compact && styles.orderListCompact,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const moveItem = (fromIndex: number, toIndex: number) => {\n    if (toIndex < 0 || toIndex >= currentItems.length) return;\n\n    const newItems = [...currentItems];\n    const [movedItem] = newItems.splice(fromIndex, 1);\n    newItems.splice(toIndex, 0, movedItem);\n\n    setItems(newItems);\n    onReorder?.(newItems);\n  };\n\n  const handleMoveUp = (index: number) => {\n    moveItem(index, index - 1);\n  };\n\n  const handleMoveDown = (index: number) => {\n    moveItem(index, index + 1);\n  };\n\n  // Drag and Drop handlers\n  const handleDragStart = (e: DragEvent<HTMLLIElement>, index: number) => {\n    setDraggedIndex(index);\n    e.currentTarget.classList.add(styles.orderListItemDragging);\n  };\n\n  const handleDragEnd = (e: DragEvent<HTMLLIElement>) => {\n    e.currentTarget.classList.remove(styles.orderListItemDragging);\n    setDraggedIndex(null);\n    dragOverIndex.current = null;\n  };\n\n  const handleDragOver = (e: DragEvent<HTMLLIElement>, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null || draggedIndex === index) return;\n\n    dragOverIndex.current = index;\n  };\n\n  const handleDrop = (e: DragEvent<HTMLLIElement>, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null) return;\n\n    moveItem(draggedIndex, index);\n    setDraggedIndex(null);\n    dragOverIndex.current = null;\n  };\n\n  return (\n    <div className={containerClasses}>\n      {(title || actions) && (\n        <div className={styles.orderListHeader}>\n          {title && <h3>{title}</h3>}\n          {actions && <div className={styles.orderListHeaderActions}>{actions}</div>}\n        </div>\n      )}\n      <ul className={styles.orderListItems}>\n        {currentItems.map((child: any, index) => {\n          const itemProps = child?.props || {};\n          const isFirst = index === 0;\n          const isLast = index === currentItems.length - 1;\n\n          return (\n            <li\n              key={itemProps.id || index}\n              className={styles.orderListItem}\n              data-index={index}\n              draggable={draggable}\n              onDragStart={draggable ? (e) => handleDragStart(e, index) : undefined}\n              onDragEnd={draggable ? handleDragEnd : undefined}\n              onDragOver={draggable ? (e) => handleDragOver(e, index) : undefined}\n              onDrop={draggable ? (e) => handleDrop(e, index) : undefined}\n            >\n              {draggable && (\n                <div className={styles.orderListItemDragHandle}>\n                  <GripVertical size={16} />\n                </div>\n              )}\n\n              {selectable && (\n                <label className={styles.orderListItemCheckbox}>\n                  <input\n                    type=\"checkbox\"\n                    className=\"checkbox\"\n                    checked={itemProps.selected || false}\n                    onChange={(e) => itemProps.onSelect?.(e.target.checked)}\n                  />\n                </label>\n              )}\n\n              <div className={styles.orderListItemContent}>\n                {itemProps.icon && <span className={styles.orderListItemIcon}>{itemProps.icon}</span>}\n                <span>{itemProps.children}</span>\n                {itemProps.badge && itemProps.badge}\n              </div>\n\n              <div className={styles.orderListItemControls}>\n                <button\n                  className={`${styles.orderListBtn} ${styles.orderListBtnUp}`}\n                  onClick={() => handleMoveUp(index)}\n                  disabled={isFirst}\n                  aria-label=\"Move up\"\n                  type=\"button\"\n                >\n                  <ChevronUp size={16} />\n                </button>\n                <button\n                  className={`${styles.orderListBtn} ${styles.orderListBtnDown}`}\n                  onClick={() => handleMoveDown(index)}\n                  disabled={isLast}\n                  aria-label=\"Move down\"\n                  type=\"button\"\n                >\n                  <ChevronDown size={16} />\n                </button>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nOrderList.displayName = 'OrderList';\n\n// Attach Item as static property\nOrderList.Item = OrderListItem;\n"],"names":["OrderListItem","_props","OrderList","title","actions","children","draggable","selectable","compact","onReorder","className","childrenArray","items","setItems","useState","draggedIndex","setDraggedIndex","dragOverIndex","useRef","currentItems","containerClasses","styles","moveItem","fromIndex","toIndex","newItems","movedItem","handleMoveUp","index","handleMoveDown","handleDragStart","e","handleDragEnd","handleDragOver","handleDrop","jsxs","jsx","child","itemProps","isFirst","isLast","GripVertical","ChevronUp","ChevronDown"],"mappings":"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"}