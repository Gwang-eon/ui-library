{"version":3,"file":"OrderList.js","sources":["../../../src/components/OrderList/OrderList.tsx"],"sourcesContent":["import type { ReactNode, DragEvent } from 'react';\nimport { useState, useRef } from 'react';\nimport { ChevronUp, ChevronDown, GripVertical } from 'lucide-react';\nimport styles from './OrderList.module.css';\n\nexport interface OrderListItemProps {\n  /** Unique identifier for the item */\n  id?: string;\n  /** Item content */\n  children: ReactNode;\n  /** Leading icon */\n  icon?: ReactNode;\n  /** Trailing badge or status indicator */\n  badge?: ReactNode;\n  /** Whether the item is selected (when selectable) */\n  selected?: boolean;\n  /** Callback when selection changes */\n  onSelect?: (selected: boolean) => void;\n  /** Custom className */\n  className?: string;\n}\n\nexport interface OrderListProps {\n  /** List title */\n  title?: ReactNode;\n  /** Header actions */\n  actions?: ReactNode;\n  /** List items */\n  children: ReactNode;\n  /** Enable drag and drop */\n  draggable?: boolean;\n  /** Enable item selection with checkboxes */\n  selectable?: boolean;\n  /** Compact variant */\n  compact?: boolean;\n  /** Callback when order changes */\n  onReorder?: (items: ReactNode[]) => void;\n  /** Custom className */\n  className?: string;\n}\n\n/**\n * Order List Item Component\n *\n * Individual item in an OrderList that can be reordered.\n *\n * @example\n * ```tsx\n * <OrderList.Item icon={<CheckCircle />}>\n *   System Backup\n * </OrderList.Item>\n * ```\n */\nexport const OrderListItem = (_props: OrderListItemProps) => {\n  // This component is primarily for type safety and structure\n  // The actual rendering is handled by the parent OrderList\n  return null;\n};\n\nOrderListItem.displayName = 'OrderList.Item';\n\n/**\n * Order List Component\n *\n * A reorderable list with move up/down controls and optional drag-and-drop functionality.\n * Ideal for managing task priorities, automation rules, device order, and execution queues.\n *\n * @example\n * ```tsx\n * <OrderList title=\"Task Priority\" draggable>\n *   <OrderList.Item icon={<CheckCircle />}>System Backup</OrderList.Item>\n *   <OrderList.Item icon={<Shield />}>Security Update</OrderList.Item>\n *   <OrderList.Item icon={<Activity />}>Performance Check</OrderList.Item>\n * </OrderList>\n * ```\n *\n * @example\n * ```tsx\n * // With selection\n * <OrderList title=\"Device Priority\" selectable>\n *   <OrderList.Item icon={<Cpu />}>Main Controller</OrderList.Item>\n *   <OrderList.Item icon={<Thermometer />}>Temperature Sensor</OrderList.Item>\n * </OrderList>\n * ```\n */\nexport const OrderList = ({\n  title,\n  actions,\n  children,\n  draggable = false,\n  selectable = false,\n  compact = false,\n  onReorder,\n  className,\n}: OrderListProps) => {\n  // Convert children to array for manipulation\n  const childrenArray = Array.isArray(children) ? children : children ? [children] : [];\n\n  const [items, setItems] = useState<ReactNode[]>(childrenArray);\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const dragOverIndex = useRef<number | null>(null);\n\n  // Update items when children change\n  const currentItems = childrenArray.length > 0 ? childrenArray : items;\n\n  const containerClasses = [\n    styles.orderList,\n    draggable && styles.orderListDraggable,\n    selectable && styles.orderListSelectable,\n    compact && styles.orderListCompact,\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const moveItem = (fromIndex: number, toIndex: number) => {\n    if (toIndex < 0 || toIndex >= currentItems.length) return;\n\n    const newItems = [...currentItems];\n    const [movedItem] = newItems.splice(fromIndex, 1);\n    newItems.splice(toIndex, 0, movedItem);\n\n    setItems(newItems);\n    onReorder?.(newItems);\n  };\n\n  const handleMoveUp = (index: number) => {\n    moveItem(index, index - 1);\n  };\n\n  const handleMoveDown = (index: number) => {\n    moveItem(index, index + 1);\n  };\n\n  // Drag and Drop handlers\n  const handleDragStart = (e: DragEvent<HTMLLIElement>, index: number) => {\n    setDraggedIndex(index);\n    e.currentTarget.classList.add(styles.orderListItemDragging);\n  };\n\n  const handleDragEnd = (e: DragEvent<HTMLLIElement>) => {\n    e.currentTarget.classList.remove(styles.orderListItemDragging);\n    setDraggedIndex(null);\n    dragOverIndex.current = null;\n  };\n\n  const handleDragOver = (e: DragEvent<HTMLLIElement>, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null || draggedIndex === index) return;\n\n    dragOverIndex.current = index;\n  };\n\n  const handleDrop = (e: DragEvent<HTMLLIElement>, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null) return;\n\n    moveItem(draggedIndex, index);\n    setDraggedIndex(null);\n    dragOverIndex.current = null;\n  };\n\n  return (\n    <div className={containerClasses}>\n      {(title || actions) && (\n        <div className={styles.orderListHeader}>\n          {title && <h3>{title}</h3>}\n          {actions && <div className={styles.orderListHeaderActions}>{actions}</div>}\n        </div>\n      )}\n      <ul className={styles.orderListItems}>\n        {currentItems.map((child: any, index) => {\n          const itemProps = child?.props || {};\n          const isFirst = index === 0;\n          const isLast = index === currentItems.length - 1;\n\n          return (\n            <li\n              key={itemProps.id || index}\n              className={styles.orderListItem}\n              data-index={index}\n              draggable={draggable}\n              onDragStart={draggable ? (e) => handleDragStart(e, index) : undefined}\n              onDragEnd={draggable ? handleDragEnd : undefined}\n              onDragOver={draggable ? (e) => handleDragOver(e, index) : undefined}\n              onDrop={draggable ? (e) => handleDrop(e, index) : undefined}\n            >\n              {draggable && (\n                <div className={styles.orderListItemDragHandle}>\n                  <GripVertical size={16} />\n                </div>\n              )}\n\n              {selectable && (\n                <label className={styles.orderListItemCheckbox}>\n                  <input\n                    type=\"checkbox\"\n                    className=\"checkbox\"\n                    checked={itemProps.selected || false}\n                    onChange={(e) => itemProps.onSelect?.(e.target.checked)}\n                  />\n                </label>\n              )}\n\n              <div className={styles.orderListItemContent}>\n                {itemProps.icon && <span className={styles.orderListItemIcon}>{itemProps.icon}</span>}\n                <span>{itemProps.children}</span>\n                {itemProps.badge && itemProps.badge}\n              </div>\n\n              <div className={styles.orderListItemControls}>\n                <button\n                  className={`${styles.orderListBtn} ${styles.orderListBtnUp}`}\n                  onClick={() => handleMoveUp(index)}\n                  disabled={isFirst}\n                  aria-label=\"Move up\"\n                  type=\"button\"\n                >\n                  <ChevronUp size={16} />\n                </button>\n                <button\n                  className={`${styles.orderListBtn} ${styles.orderListBtnDown}`}\n                  onClick={() => handleMoveDown(index)}\n                  disabled={isLast}\n                  aria-label=\"Move down\"\n                  type=\"button\"\n                >\n                  <ChevronDown size={16} />\n                </button>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nOrderList.displayName = 'OrderList';\n\n// Attach Item as static property\nOrderList.Item = OrderListItem;\n"],"names":["OrderListItem","_props","OrderList","title","actions","children","draggable","selectable","compact","onReorder","className","childrenArray","items","setItems","useState","draggedIndex","setDraggedIndex","dragOverIndex","useRef","currentItems","containerClasses","styles","moveItem","fromIndex","toIndex","newItems","movedItem","handleMoveUp","index","handleMoveDown","handleDragStart","e","handleDragEnd","handleDragOver","handleDrop","jsxs","jsx","child","itemProps","isFirst","isLast","GripVertical","ChevronUp","ChevronDown"],"mappings":"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"}