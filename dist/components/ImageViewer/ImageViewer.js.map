{"version":3,"file":"ImageViewer.js","sources":["../../../src/components/ImageViewer/ImageViewer.tsx"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport {\n  X,\n  ZoomIn,\n  ZoomOut,\n  RotateCcw,\n  RotateCw,\n  Maximize2,\n  ChevronLeft,\n  ChevronRight,\n} from 'lucide-react';\nimport styles from './ImageViewer.module.css';\n\nexport interface ImageViewerImage {\n  /** Image source URL */\n  src: string;\n  /** Alt text for accessibility */\n  alt: string;\n  /** Optional thumbnail URL for navigation strip */\n  thumbnail?: string;\n}\n\nexport interface ImageViewerProps {\n  /** Whether the viewer is open */\n  open: boolean;\n  /** Callback when viewer should close */\n  onClose: () => void;\n  /** Single image source (for single image mode) */\n  src?: string;\n  /** Single image alt text */\n  alt?: string;\n  /** Array of images for gallery mode */\n  images?: ImageViewerImage[];\n  /** Initial index for gallery mode */\n  initialIndex?: number;\n  /** Show toolbar with zoom/rotate controls */\n  toolbar?: boolean;\n  /** Show close button */\n  closable?: boolean;\n  /** Close viewer when clicking mask/backdrop */\n  maskClosable?: boolean;\n  /** Enable keyboard navigation */\n  keyboard?: boolean;\n  /** Show navigation arrows for gallery */\n  navigation?: boolean;\n  /** Show thumbnail strip for gallery */\n  thumbnails?: boolean;\n  /** Enable looping in gallery navigation */\n  loop?: boolean;\n  /** Minimum zoom level */\n  minZoom?: number;\n  /** Maximum zoom level */\n  maxZoom?: number;\n  /** Zoom step increment */\n  zoomStep?: number;\n  /** Callback when navigating in gallery */\n  onNavigate?: (index: number) => void;\n}\n\n/**\n * Image Viewer Component\n *\n * Full-screen image viewer with zoom, rotation, and gallery navigation.\n * Supports both single image and gallery modes with comprehensive controls.\n *\n * @example\n * ```tsx\n * // Single image\n * <ImageViewer\n *   open={isOpen}\n *   onClose={() => setIsOpen(false)}\n *   src=\"/device-photo.jpg\"\n *   alt=\"IoT Device\"\n * />\n *\n * // Gallery mode\n * <ImageViewer\n *   open={isOpen}\n *   onClose={() => setIsOpen(false)}\n *   images={[\n *     { src: '/image1.jpg', alt: 'Image 1' },\n *     { src: '/image2.jpg', alt: 'Image 2' }\n *   ]}\n *   navigation\n *   thumbnails\n * />\n * ```\n */\nexport const ImageViewer = ({\n  open,\n  onClose,\n  src,\n  alt = '',\n  images,\n  initialIndex = 0,\n  toolbar = true,\n  closable = true,\n  maskClosable = true,\n  keyboard = true,\n  navigation = true,\n  thumbnails = false,\n  loop = true,\n  minZoom = 0.1,\n  maxZoom = 5,\n  zoomStep = 0.2,\n  onNavigate,\n}: ImageViewerProps) => {\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [zoom, setZoom] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const imageRef = useRef<HTMLImageElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // Determine if in gallery mode\n  const isGallery = !!images && images.length > 0;\n  const currentImage = isGallery\n    ? images[currentIndex]\n    : { src: src || '', alt: alt || '' };\n\n  // Reset zoom and rotation when image changes\n  useEffect(() => {\n    if (open) {\n      setZoom(1);\n      setRotation(0);\n      setLoading(true);\n    }\n  }, [currentIndex, open]);\n\n  // Focus management\n  useEffect(() => {\n    if (open) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      // Prevent body scroll\n      document.body.style.overflow = 'hidden';\n    } else {\n      // Restore body scroll\n      document.body.style.overflow = '';\n      // Restore focus\n      if (previousFocusRef.current) {\n        previousFocusRef.current.focus();\n      }\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [open]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    if (!keyboard || !open) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'Escape':\n          onClose();\n          break;\n        case 'ArrowLeft':\n          if (isGallery && navigation) {\n            navigatePrevious();\n          }\n          break;\n        case 'ArrowRight':\n          if (isGallery && navigation) {\n            navigateNext();\n          }\n          break;\n        case '+':\n        case '=':\n          handleZoomIn();\n          break;\n        case '-':\n        case '_':\n          handleZoomOut();\n          break;\n        case 'r':\n        case 'R':\n          handleRotateRight();\n          break;\n        default:\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [keyboard, open, isGallery, navigation, currentIndex, zoom, rotation]);\n\n  // Handle zoom in\n  const handleZoomIn = useCallback(() => {\n    setZoom((prev) => Math.min(prev + zoomStep, maxZoom));\n  }, [zoomStep, maxZoom]);\n\n  // Handle zoom out\n  const handleZoomOut = useCallback(() => {\n    setZoom((prev) => Math.max(prev - zoomStep, minZoom));\n  }, [zoomStep, minZoom]);\n\n  // Handle rotate left\n  const handleRotateLeft = useCallback(() => {\n    setRotation((prev) => prev - 90);\n  }, []);\n\n  // Handle rotate right\n  const handleRotateRight = useCallback(() => {\n    setRotation((prev) => prev + 90);\n  }, []);\n\n  // Handle reset\n  const handleReset = useCallback(() => {\n    setZoom(1);\n    setRotation(0);\n  }, []);\n\n  // Navigate to next image\n  const navigateNext = useCallback(() => {\n    if (!isGallery) return;\n\n    const nextIndex = currentIndex + 1;\n    if (nextIndex < images.length) {\n      setCurrentIndex(nextIndex);\n      onNavigate?.(nextIndex);\n    } else if (loop) {\n      setCurrentIndex(0);\n      onNavigate?.(0);\n    }\n  }, [isGallery, currentIndex, images, loop, onNavigate]);\n\n  // Navigate to previous image\n  const navigatePrevious = useCallback(() => {\n    if (!isGallery) return;\n\n    const prevIndex = currentIndex - 1;\n    if (prevIndex >= 0) {\n      setCurrentIndex(prevIndex);\n      onNavigate?.(prevIndex);\n    } else if (loop) {\n      setCurrentIndex(images.length - 1);\n      onNavigate?.(images.length - 1);\n    }\n  }, [isGallery, currentIndex, images, loop, onNavigate]);\n\n  // Go to specific image\n  const goToImage = useCallback(\n    (index: number) => {\n      if (!isGallery || index < 0 || index >= images.length) return;\n      setCurrentIndex(index);\n      onNavigate?.(index);\n    },\n    [isGallery, images, onNavigate]\n  );\n\n  // Handle mask click\n  const handleMaskClick = () => {\n    if (maskClosable) {\n      onClose();\n    }\n  };\n\n  // Handle image load\n  const handleImageLoad = () => {\n    setLoading(false);\n  };\n\n  // Check if navigation buttons should be disabled\n  const isPrevDisabled = !loop && currentIndex === 0;\n  const isNextDisabled = !loop && isGallery && currentIndex === images.length - 1;\n\n  if (!open) return null;\n\n  const viewer = (\n    <div className={`${styles.imageViewer} ${styles.imageViewerOpen}`}>\n      <div className={styles.imageViewerMask} onClick={handleMaskClick} />\n\n      <div className={styles.imageViewerContent}>\n        {/* Close button */}\n        {closable && (\n          <button\n            className={styles.imageViewerClose}\n            onClick={onClose}\n            aria-label=\"Close image viewer\"\n            type=\"button\"\n          >\n            <X />\n          </button>\n        )}\n\n        {/* Toolbar */}\n        {toolbar && (\n          <div className={styles.imageViewerToolbar}>\n            {/* Gallery counter */}\n            {isGallery && (\n              <>\n                <span className={styles.imageViewerCounter}>\n                  {currentIndex + 1} / {images.length}\n                </span>\n                <div className={styles.imageViewerDivider} />\n              </>\n            )}\n\n            {/* Zoom out */}\n            <button\n              className={styles.imageViewerTool}\n              onClick={handleZoomOut}\n              aria-label=\"Zoom out\"\n              type=\"button\"\n              disabled={zoom <= minZoom}\n            >\n              <ZoomOut />\n            </button>\n\n            {/* Zoom level */}\n            <span className={styles.imageViewerZoomLevel} aria-live=\"polite\">\n              {Math.round(zoom * 100)}%\n            </span>\n\n            {/* Zoom in */}\n            <button\n              className={styles.imageViewerTool}\n              onClick={handleZoomIn}\n              aria-label=\"Zoom in\"\n              type=\"button\"\n              disabled={zoom >= maxZoom}\n            >\n              <ZoomIn />\n            </button>\n\n            <div className={styles.imageViewerDivider} />\n\n            {/* Rotate left */}\n            <button\n              className={styles.imageViewerTool}\n              onClick={handleRotateLeft}\n              aria-label=\"Rotate counterclockwise\"\n              type=\"button\"\n            >\n              <RotateCcw />\n            </button>\n\n            {/* Rotate right */}\n            <button\n              className={styles.imageViewerTool}\n              onClick={handleRotateRight}\n              aria-label=\"Rotate clockwise\"\n              type=\"button\"\n            >\n              <RotateCw />\n            </button>\n\n            <div className={styles.imageViewerDivider} />\n\n            {/* Reset */}\n            <button\n              className={styles.imageViewerTool}\n              onClick={handleReset}\n              aria-label=\"Reset zoom and rotation\"\n              type=\"button\"\n            >\n              <Maximize2 />\n            </button>\n          </div>\n        )}\n\n        {/* Navigation arrows */}\n        {isGallery && navigation && (\n          <>\n            <button\n              className={`${styles.imageViewerNav} ${styles.imageViewerPrev}`}\n              onClick={navigatePrevious}\n              disabled={isPrevDisabled}\n              aria-label=\"Previous image\"\n              type=\"button\"\n            >\n              <ChevronLeft />\n            </button>\n\n            <button\n              className={`${styles.imageViewerNav} ${styles.imageViewerNext}`}\n              onClick={navigateNext}\n              disabled={isNextDisabled}\n              aria-label=\"Next image\"\n              type=\"button\"\n            >\n              <ChevronRight />\n            </button>\n          </>\n        )}\n\n        {/* Main image */}\n        <div className={styles.imageViewerMain}>\n          {loading && <div className={styles.imageViewerLoading} />}\n          <img\n            ref={imageRef}\n            src={currentImage.src}\n            alt={currentImage.alt}\n            draggable={false}\n            onLoad={handleImageLoad}\n            style={{\n              transform: `scale(${zoom}) rotate(${rotation}deg)`,\n              display: loading ? 'none' : 'block',\n            }}\n          />\n        </div>\n\n        {/* Thumbnail strip */}\n        {isGallery && thumbnails && (\n          <div className={styles.imageViewerThumbnails}>\n            {images.map((image, index) => (\n              <img\n                key={index}\n                src={image.thumbnail || image.src}\n                alt={`Thumbnail ${index + 1}`}\n                className={`${styles.imageViewerThumbnail} ${\n                  index === currentIndex ? styles.imageViewerThumbnailActive : ''\n                }`}\n                onClick={() => goToImage(index)}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return createPortal(viewer, document.body);\n};\n\nImageViewer.displayName = 'ImageViewer';\n"],"names":["ImageViewer","open","onClose","src","alt","images","initialIndex","toolbar","closable","maskClosable","keyboard","navigation","thumbnails","loop","minZoom","maxZoom","zoomStep","onNavigate","currentIndex","setCurrentIndex","useState","zoom","setZoom","rotation","setRotation","loading","setLoading","imageRef","useRef","previousFocusRef","isGallery","currentImage","useEffect","handleKeyDown","e","navigatePrevious","navigateNext","handleZoomIn","handleZoomOut","handleRotateRight","useCallback","prev","handleRotateLeft","handleReset","nextIndex","prevIndex","goToImage","index","handleMaskClick","handleImageLoad","isPrevDisabled","isNextDisabled","viewer","jsxs","styles","jsx","X","Fragment","ZoomOut","ZoomIn","RotateCcw","RotateCw","Maximize2","ChevronLeft","ChevronRight","image","createPortal"],"mappings":"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"}