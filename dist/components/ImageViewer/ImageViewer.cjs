"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react/jsx-runtime"),s=require("react"),J=require("react-dom"),n=require("lucide-react"),a=require("./ImageViewer.module.css.cjs"),D=({open:u,onClose:x,src:E,alt:P="",images:r,initialIndex:p=0,toolbar:q=!0,closable:O=!0,maskClosable:Z=!0,keyboard:v=!0,navigation:b=!0,thumbnails:A=!1,loop:o=!0,minZoom:j=.1,maxZoom:k=5,zoomStep:h=.2,onNavigate:c})=>{const[i,m]=s.useState(p),[f,w]=s.useState(1),[C,g]=s.useState(0),[y,N]=s.useState(!0),F=s.useRef(null),V=s.useRef(null),l=!!r&&r.length>0,R=l?r[i]:{src:E||"",alt:P||""};s.useEffect(()=>{u&&(w(1),g(0),N(!0))},[i,u]),s.useEffect(()=>(u?(V.current=document.activeElement,document.body.style.overflow="hidden"):(document.body.style.overflow="",V.current&&V.current.focus()),()=>{document.body.style.overflow=""}),[u]),s.useEffect(()=>{if(!v||!u)return;const t=d=>{switch(d.key){case"Escape":x();break;case"ArrowLeft":l&&b&&M();break;case"ArrowRight":l&&b&&L();break;case"+":case"=":I();break;case"-":case"_":T();break;case"r":case"R":$();break}};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[v,u,l,b,i,f,C]);const I=s.useCallback(()=>{w(t=>Math.min(t+h,k))},[h,k]),T=s.useCallback(()=>{w(t=>Math.max(t-h,j))},[h,j]),S=s.useCallback(()=>{g(t=>t-90)},[]),$=s.useCallback(()=>{g(t=>t+90)},[]),_=s.useCallback(()=>{w(1),g(0)},[]),L=s.useCallback(()=>{if(!l)return;const t=i+1;t<r.length?(m(t),c?.(t)):o&&(m(0),c?.(0))},[l,i,r,o,c]),M=s.useCallback(()=>{if(!l)return;const t=i-1;t>=0?(m(t),c?.(t)):o&&(m(r.length-1),c?.(r.length-1))},[l,i,r,o,c]),G=s.useCallback(t=>{!l||t<0||t>=r.length||(m(t),c?.(t))},[l,r,c]),K=()=>{Z&&x()},X=()=>{N(!1)},z=!o&&i===0,B=!o&&l&&i===r.length-1;if(!u)return null;const H=e.jsxs("div",{className:`${a.default.imageViewer} ${a.default.imageViewerOpen}`,children:[e.jsx("div",{className:a.default.imageViewerMask,onClick:K}),e.jsxs("div",{className:a.default.imageViewerContent,children:[O&&e.jsx("button",{className:a.default.imageViewerClose,onClick:x,"aria-label":"Close image viewer",type:"button",children:e.jsx(n.X,{})}),q&&e.jsxs("div",{className:a.default.imageViewerToolbar,children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:a.default.imageViewerCounter,children:[i+1," / ",r.length]}),e.jsx("div",{className:a.default.imageViewerDivider})]}),e.jsx("button",{className:a.default.imageViewerTool,onClick:T,"aria-label":"Zoom out",type:"button",disabled:f<=j,children:e.jsx(n.ZoomOut,{})}),e.jsxs("span",{className:a.default.imageViewerZoomLevel,"aria-live":"polite",children:[Math.round(f*100),"%"]}),e.jsx("button",{className:a.default.imageViewerTool,onClick:I,"aria-label":"Zoom in",type:"button",disabled:f>=k,children:e.jsx(n.ZoomIn,{})}),e.jsx("div",{className:a.default.imageViewerDivider}),e.jsx("button",{className:a.default.imageViewerTool,onClick:S,"aria-label":"Rotate counterclockwise",type:"button",children:e.jsx(n.RotateCcw,{})}),e.jsx("button",{className:a.default.imageViewerTool,onClick:$,"aria-label":"Rotate clockwise",type:"button",children:e.jsx(n.RotateCw,{})}),e.jsx("div",{className:a.default.imageViewerDivider}),e.jsx("button",{className:a.default.imageViewerTool,onClick:_,"aria-label":"Reset zoom and rotation",type:"button",children:e.jsx(n.Maximize2,{})})]}),l&&b&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${a.default.imageViewerNav} ${a.default.imageViewerPrev}`,onClick:M,disabled:z,"aria-label":"Previous image",type:"button",children:e.jsx(n.ChevronLeft,{})}),e.jsx("button",{className:`${a.default.imageViewerNav} ${a.default.imageViewerNext}`,onClick:L,disabled:B,"aria-label":"Next image",type:"button",children:e.jsx(n.ChevronRight,{})})]}),e.jsxs("div",{className:a.default.imageViewerMain,children:[y&&e.jsx("div",{className:a.default.imageViewerLoading}),e.jsx("img",{ref:F,src:R.src,alt:R.alt,draggable:!1,onLoad:X,style:{transform:`scale(${f}) rotate(${C}deg)`,display:y?"none":"block"}})]}),l&&A&&e.jsx("div",{className:a.default.imageViewerThumbnails,children:r.map((t,d)=>e.jsx("img",{src:t.thumbnail||t.src,alt:`Thumbnail ${d+1}`,className:`${a.default.imageViewerThumbnail} ${d===i?a.default.imageViewerThumbnailActive:""}`,onClick:()=>G(d)},d))})]})]});return J.createPortal(H,document.body)};D.displayName="ImageViewer";exports.ImageViewer=D;
//# sourceMappingURL=ImageViewer.cjs.map
