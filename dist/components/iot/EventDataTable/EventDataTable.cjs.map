{"version":3,"file":"EventDataTable.cjs","sources":["../../../../src/components/iot/EventDataTable/EventDataTable.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Search, Filter, AlertCircle, AlertTriangle, Download, ChevronsUpDown, Eye, MoreHorizontal } from 'lucide-react';\nimport styles from './EventDataTable.module.css';\n\nexport interface EventData {\n  id: string;\n  time: string;\n  severity: 'critical' | 'warning' | 'info';\n  eventType: {\n    icon: string;\n    label: string;\n  };\n  device: {\n    id: string;\n    type: string;\n  };\n  message: string;\n  location: string;\n}\n\nexport interface EventDataTableProps {\n  /** Array of event data */\n  events: EventData[];\n  /** Enable search functionality */\n  searchable?: boolean;\n  /** Enable filtering by severity */\n  filterable?: boolean;\n  /** Enable export functionality */\n  exportable?: boolean;\n  /** Enable row selection */\n  selectable?: boolean;\n  /** Callback when row is selected */\n  onSelect?: (selectedIds: string[]) => void;\n  /** Callback when view button is clicked */\n  onView?: (event: EventData) => void;\n  /** Callback when export is clicked */\n  onExport?: () => void;\n  /** Custom class name */\n  className?: string;\n}\n\nexport const EventDataTable: React.FC<EventDataTableProps> = ({\n  events,\n  searchable = true,\n  filterable = true,\n  exportable = true,\n  selectable = true,\n  onSelect,\n  onView,\n  onExport,\n  className,\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedFilter, setSelectedFilter] = useState<'all' | 'critical' | 'warning' | 'info'>('all');\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [sortColumn, setSortColumn] = useState<'time' | 'severity' | null>(null);\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n\n  // Filter events\n  const filteredEvents = events.filter((event) => {\n    const matchesSearch = searchQuery === '' ||\n      event.eventType.label.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      event.device.id.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      event.message.toLowerCase().includes(searchQuery.toLowerCase());\n\n    const matchesFilter = selectedFilter === 'all' || event.severity === selectedFilter;\n\n    return matchesSearch && matchesFilter;\n  });\n\n  // Sort events\n  const sortedEvents = [...filteredEvents].sort((a, b) => {\n    if (!sortColumn) return 0;\n\n    if (sortColumn === 'time') {\n      return sortDirection === 'asc'\n        ? a.time.localeCompare(b.time)\n        : b.time.localeCompare(a.time);\n    }\n\n    if (sortColumn === 'severity') {\n      const severityOrder = { critical: 3, warning: 2, info: 1 };\n      return sortDirection === 'asc'\n        ? severityOrder[a.severity] - severityOrder[b.severity]\n        : severityOrder[b.severity] - severityOrder[a.severity];\n    }\n\n    return 0;\n  });\n\n  const handleSort = (column: 'time' | 'severity') => {\n    if (sortColumn === column) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortDirection('desc');\n    }\n  };\n\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedIds(new Set(sortedEvents.map(e => e.id)));\n      onSelect?.(sortedEvents.map(e => e.id));\n    } else {\n      setSelectedIds(new Set());\n      onSelect?.([]);\n    }\n  };\n\n  const handleSelectRow = (id: string, checked: boolean) => {\n    const newSelected = new Set(selectedIds);\n    if (checked) {\n      newSelected.add(id);\n    } else {\n      newSelected.delete(id);\n    }\n    setSelectedIds(newSelected);\n    onSelect?.(Array.from(newSelected));\n  };\n\n  const getSeverityBadgeClass = (severity: string) => {\n    switch (severity) {\n      case 'critical': return styles.badgeError;\n      case 'warning': return styles.badgeWarning;\n      case 'info': return styles.badgeSuccess;\n      default: return '';\n    }\n  };\n\n  return (\n    <div className={`${styles.eventDataTable} ${className || ''}`}>\n      {/* Table Controls */}\n      {(searchable || filterable || exportable) && (\n        <div className={styles.tableControls}>\n          <div className={styles.tableControlsLeft}>\n            {searchable && (\n              <div className={styles.searchGroup}>\n                <Search className={styles.searchIcon} size={16} />\n                <input\n                  type=\"text\"\n                  className={styles.searchInput}\n                  placeholder=\"Search events...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                />\n              </div>\n            )}\n          </div>\n\n          <div className={styles.tableControlsRight}>\n            {filterable && (\n              <div className={styles.filterGroup}>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'all' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('all')}\n                >\n                  <Filter size={14} />\n                  All Events\n                </button>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'critical' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('critical')}\n                >\n                  <AlertCircle size={14} />\n                  Errors\n                </button>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'warning' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('warning')}\n                >\n                  <AlertTriangle size={14} />\n                  Warnings\n                </button>\n              </div>\n            )}\n            {exportable && (\n              <button className={styles.exportBtn} onClick={onExport}>\n                <Download size={14} />\n                Export\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Event Table */}\n      <div className={styles.tableContainer}>\n        <table className={styles.table}>\n          <thead>\n            <tr>\n              {selectable && (\n                <th className={styles.checkboxCell}>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedIds.size === sortedEvents.length && sortedEvents.length > 0}\n                    onChange={(e) => handleSelectAll(e.target.checked)}\n                  />\n                </th>\n              )}\n              <th className={styles.sortableHeader} onClick={() => handleSort('time')}>\n                <div className={styles.headerContent}>\n                  <span>Time</span>\n                  <ChevronsUpDown size={14} />\n                </div>\n              </th>\n              <th className={styles.sortableHeader} onClick={() => handleSort('severity')}>\n                <div className={styles.headerContent}>\n                  <span>Severity</span>\n                  <ChevronsUpDown size={14} />\n                </div>\n              </th>\n              <th>Event Type</th>\n              <th>Device</th>\n              <th>Message</th>\n              <th>Location</th>\n              <th className={styles.actionsHeader}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedEvents.map((event) => (\n              <tr key={event.id}>\n                {selectable && (\n                  <td className={styles.checkboxCell}>\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedIds.has(event.id)}\n                      onChange={(e) => handleSelectRow(event.id, e.target.checked)}\n                    />\n                  </td>\n                )}\n                <td>{event.time}</td>\n                <td>\n                  <span className={`${styles.badge} ${getSeverityBadgeClass(event.severity)}`}>\n                    {event.severity.charAt(0).toUpperCase() + event.severity.slice(1)}\n                  </span>\n                </td>\n                <td>\n                  <div className={styles.eventType}>\n                    <span className={styles.eventIcon}>\n                      {/* Icon placeholder - in real use, render actual icon */}\n                      {event.eventType.icon}\n                    </span>\n                    <span>{event.eventType.label}</span>\n                  </div>\n                </td>\n                <td>\n                  <div className={styles.deviceInfo}>\n                    <div className={styles.deviceId}>{event.device.id}</div>\n                    <div className={styles.deviceType}>{event.device.type}</div>\n                  </div>\n                </td>\n                <td>{event.message}</td>\n                <td>{event.location}</td>\n                <td>\n                  <div className={styles.actions}>\n                    <button\n                      className={styles.actionBtn}\n                      onClick={() => onView?.(event)}\n                      aria-label=\"View details\"\n                    >\n                      <Eye size={14} />\n                    </button>\n                    <button\n                      className={styles.actionBtn}\n                      aria-label=\"More options\"\n                    >\n                      <MoreHorizontal size={14} />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default EventDataTable;\n"],"names":["EventDataTable","events","searchable","filterable","exportable","selectable","onSelect","onView","onExport","className","searchQuery","setSearchQuery","useState","selectedFilter","setSelectedFilter","selectedIds","setSelectedIds","sortColumn","setSortColumn","sortDirection","setSortDirection","sortedEvents","event","matchesSearch","matchesFilter","a","b","severityOrder","handleSort","column","handleSelectAll","checked","e","handleSelectRow","id","newSelected","getSeverityBadgeClass","severity","styles","jsxs","jsx","Search","Filter","AlertCircle","AlertTriangle","Download","ChevronsUpDown","Eye","MoreHorizontal"],"mappings":"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"}