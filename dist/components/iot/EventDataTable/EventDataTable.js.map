{"version":3,"file":"EventDataTable.js","sources":["../../../../src/components/iot/EventDataTable/EventDataTable.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Search, Filter, AlertCircle, AlertTriangle, Download, ChevronsUpDown, Eye, MoreHorizontal } from 'lucide-react';\nimport styles from './EventDataTable.module.css';\n\nexport interface EventData {\n  id: string;\n  time: string;\n  severity: 'critical' | 'warning' | 'info';\n  eventType: {\n    icon: string;\n    label: string;\n  };\n  device: {\n    id: string;\n    type: string;\n  };\n  message: string;\n  location: string;\n}\n\nexport interface EventDataTableProps {\n  /** Array of event data */\n  events: EventData[];\n  /** Enable search functionality */\n  searchable?: boolean;\n  /** Enable filtering by severity */\n  filterable?: boolean;\n  /** Enable export functionality */\n  exportable?: boolean;\n  /** Enable row selection */\n  selectable?: boolean;\n  /** Callback when row is selected */\n  onSelect?: (selectedIds: string[]) => void;\n  /** Callback when view button is clicked */\n  onView?: (event: EventData) => void;\n  /** Callback when export is clicked */\n  onExport?: () => void;\n  /** Custom class name */\n  className?: string;\n}\n\nexport const EventDataTable: React.FC<EventDataTableProps> = ({\n  events,\n  searchable = true,\n  filterable = true,\n  exportable = true,\n  selectable = true,\n  onSelect,\n  onView,\n  onExport,\n  className,\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedFilter, setSelectedFilter] = useState<'all' | 'critical' | 'warning' | 'info'>('all');\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [sortColumn, setSortColumn] = useState<'time' | 'severity' | null>(null);\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n\n  // Filter events\n  const filteredEvents = events.filter((event) => {\n    const matchesSearch = searchQuery === '' ||\n      event.eventType.label.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      event.device.id.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      event.message.toLowerCase().includes(searchQuery.toLowerCase());\n\n    const matchesFilter = selectedFilter === 'all' || event.severity === selectedFilter;\n\n    return matchesSearch && matchesFilter;\n  });\n\n  // Sort events\n  const sortedEvents = [...filteredEvents].sort((a, b) => {\n    if (!sortColumn) return 0;\n\n    if (sortColumn === 'time') {\n      return sortDirection === 'asc'\n        ? a.time.localeCompare(b.time)\n        : b.time.localeCompare(a.time);\n    }\n\n    if (sortColumn === 'severity') {\n      const severityOrder = { critical: 3, warning: 2, info: 1 };\n      return sortDirection === 'asc'\n        ? severityOrder[a.severity] - severityOrder[b.severity]\n        : severityOrder[b.severity] - severityOrder[a.severity];\n    }\n\n    return 0;\n  });\n\n  const handleSort = (column: 'time' | 'severity') => {\n    if (sortColumn === column) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortDirection('desc');\n    }\n  };\n\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedIds(new Set(sortedEvents.map(e => e.id)));\n      onSelect?.(sortedEvents.map(e => e.id));\n    } else {\n      setSelectedIds(new Set());\n      onSelect?.([]);\n    }\n  };\n\n  const handleSelectRow = (id: string, checked: boolean) => {\n    const newSelected = new Set(selectedIds);\n    if (checked) {\n      newSelected.add(id);\n    } else {\n      newSelected.delete(id);\n    }\n    setSelectedIds(newSelected);\n    onSelect?.(Array.from(newSelected));\n  };\n\n  const getSeverityBadgeClass = (severity: string) => {\n    switch (severity) {\n      case 'critical': return styles.badgeError;\n      case 'warning': return styles.badgeWarning;\n      case 'info': return styles.badgeSuccess;\n      default: return '';\n    }\n  };\n\n  return (\n    <div className={`${styles.eventDataTable} ${className || ''}`}>\n      {/* Table Controls */}\n      {(searchable || filterable || exportable) && (\n        <div className={styles.tableControls}>\n          <div className={styles.tableControlsLeft}>\n            {searchable && (\n              <div className={styles.searchGroup}>\n                <Search className={styles.searchIcon} size={16} />\n                <input\n                  type=\"text\"\n                  className={styles.searchInput}\n                  placeholder=\"Search events...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                />\n              </div>\n            )}\n          </div>\n\n          <div className={styles.tableControlsRight}>\n            {filterable && (\n              <div className={styles.filterGroup}>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'all' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('all')}\n                >\n                  <Filter size={14} />\n                  All Events\n                </button>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'critical' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('critical')}\n                >\n                  <AlertCircle size={14} />\n                  Errors\n                </button>\n                <button\n                  className={`${styles.filterBtn} ${selectedFilter === 'warning' ? styles.filterBtnActive : ''}`}\n                  onClick={() => setSelectedFilter('warning')}\n                >\n                  <AlertTriangle size={14} />\n                  Warnings\n                </button>\n              </div>\n            )}\n            {exportable && (\n              <button className={styles.exportBtn} onClick={onExport}>\n                <Download size={14} />\n                Export\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Event Table */}\n      <div className={styles.tableContainer}>\n        <table className={styles.table}>\n          <thead>\n            <tr>\n              {selectable && (\n                <th className={styles.checkboxCell}>\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedIds.size === sortedEvents.length && sortedEvents.length > 0}\n                    onChange={(e) => handleSelectAll(e.target.checked)}\n                  />\n                </th>\n              )}\n              <th className={styles.sortableHeader} onClick={() => handleSort('time')}>\n                <div className={styles.headerContent}>\n                  <span>Time</span>\n                  <ChevronsUpDown size={14} />\n                </div>\n              </th>\n              <th className={styles.sortableHeader} onClick={() => handleSort('severity')}>\n                <div className={styles.headerContent}>\n                  <span>Severity</span>\n                  <ChevronsUpDown size={14} />\n                </div>\n              </th>\n              <th>Event Type</th>\n              <th>Device</th>\n              <th>Message</th>\n              <th>Location</th>\n              <th className={styles.actionsHeader}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedEvents.map((event) => (\n              <tr key={event.id}>\n                {selectable && (\n                  <td className={styles.checkboxCell}>\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedIds.has(event.id)}\n                      onChange={(e) => handleSelectRow(event.id, e.target.checked)}\n                    />\n                  </td>\n                )}\n                <td>{event.time}</td>\n                <td>\n                  <span className={`${styles.badge} ${getSeverityBadgeClass(event.severity)}`}>\n                    {event.severity.charAt(0).toUpperCase() + event.severity.slice(1)}\n                  </span>\n                </td>\n                <td>\n                  <div className={styles.eventType}>\n                    <span className={styles.eventIcon}>\n                      {/* Icon placeholder - in real use, render actual icon */}\n                      {event.eventType.icon}\n                    </span>\n                    <span>{event.eventType.label}</span>\n                  </div>\n                </td>\n                <td>\n                  <div className={styles.deviceInfo}>\n                    <div className={styles.deviceId}>{event.device.id}</div>\n                    <div className={styles.deviceType}>{event.device.type}</div>\n                  </div>\n                </td>\n                <td>{event.message}</td>\n                <td>{event.location}</td>\n                <td>\n                  <div className={styles.actions}>\n                    <button\n                      className={styles.actionBtn}\n                      onClick={() => onView?.(event)}\n                      aria-label=\"View details\"\n                    >\n                      <Eye size={14} />\n                    </button>\n                    <button\n                      className={styles.actionBtn}\n                      aria-label=\"More options\"\n                    >\n                      <MoreHorizontal size={14} />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default EventDataTable;\n"],"names":["EventDataTable","events","searchable","filterable","exportable","selectable","onSelect","onView","onExport","className","searchQuery","setSearchQuery","useState","selectedFilter","setSelectedFilter","selectedIds","setSelectedIds","sortColumn","setSortColumn","sortDirection","setSortDirection","sortedEvents","event","matchesSearch","matchesFilter","a","b","severityOrder","handleSort","column","handleSelectAll","checked","e","handleSelectRow","id","newSelected","getSeverityBadgeClass","severity","styles","jsxs","jsx","Search","Filter","AlertCircle","AlertTriangle","Download","ChevronsUpDown","Eye","MoreHorizontal"],"mappings":"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"}