{"version":3,"file":"BackTop.js","sources":["../../../src/components/BackTop/BackTop.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { ArrowUp } from 'lucide-react';\nimport styles from './BackTop.module.css';\n\nexport interface BackTopProps {\n  /** Scroll threshold in pixels before button appears */\n  threshold?: number;\n  /** Duration of scroll animation in milliseconds */\n  duration?: number;\n  /** Size variant */\n  size?: 'sm' | 'md' | 'lg';\n  /** Visual variant */\n  variant?: 'default' | 'primary' | 'outline';\n  /** Position on screen */\n  position?: 'right' | 'left';\n  /** Show text label with icon */\n  showText?: boolean;\n  /** Text label to display */\n  text?: string;\n  /** Target element to scroll (defaults to window) */\n  target?: () => HTMLElement | Window | null;\n  /** Callback when button is clicked */\n  onClick?: () => void;\n  /** Additional CSS class */\n  className?: string;\n  /** Inline styles */\n  style?: React.CSSProperties;\n  /** Children (icon override) */\n  children?: React.ReactNode;\n}\n\n/**\n * BackTop Component\n *\n * Button to scroll back to the top of the page when user scrolls down.\n * Appears after scrolling past a threshold and smoothly scrolls to top when clicked.\n *\n * @example\n * ```tsx\n * <BackTop />\n * <BackTop threshold={300} showText text=\"Top\" />\n * <BackTop variant=\"primary\" size=\"lg\" />\n * ```\n */\nexport const BackTop: React.FC<BackTopProps> = ({\n  threshold = 400,\n  duration: _duration = 450,\n  size = 'md',\n  variant = 'default',\n  position = 'right',\n  showText = false,\n  text = 'Top',\n  target,\n  onClick,\n  className,\n  style,\n  children,\n}) => {\n  const [visible, setVisible] = useState(false);\n  const rafRef = useRef<number | null>(null);\n\n  const getScrollTop = useCallback(() => {\n    const targetElement = target?.();\n    if (!targetElement) {\n      return window.pageYOffset || document.documentElement.scrollTop;\n    }\n    if (targetElement === window) {\n      return window.pageYOffset || document.documentElement.scrollTop;\n    }\n    return (targetElement as HTMLElement).scrollTop;\n  }, [target]);\n\n  const handleScroll = useCallback(() => {\n    if (rafRef.current !== null) {\n      cancelAnimationFrame(rafRef.current);\n    }\n\n    rafRef.current = requestAnimationFrame(() => {\n      const scrollTop = getScrollTop();\n      setVisible(scrollTop > threshold);\n    });\n  }, [threshold, getScrollTop]);\n\n  const scrollToTop = useCallback(() => {\n    onClick?.();\n\n    const targetElement = target?.();\n    const scrollElement = !targetElement || targetElement === window\n      ? window\n      : (targetElement as HTMLElement);\n\n    // Check for reduced motion preference\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n    if (prefersReducedMotion) {\n      // Instant scroll for reduced motion\n      if (scrollElement === window) {\n        window.scrollTo(0, 0);\n      } else {\n        (scrollElement as HTMLElement).scrollTop = 0;\n      }\n      return;\n    }\n\n    // Smooth scroll\n    if (scrollElement === window) {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    } else {\n      (scrollElement as HTMLElement).scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  }, [target, onClick]);\n\n  useEffect(() => {\n    const targetElement = target?.() || window;\n    const scrollElement = targetElement === window ? window : (targetElement as HTMLElement);\n\n    handleScroll(); // Initial check\n    scrollElement.addEventListener('scroll', handleScroll, { passive: true });\n\n    return () => {\n      scrollElement.removeEventListener('scroll', handleScroll);\n      if (rafRef.current !== null) {\n        cancelAnimationFrame(rafRef.current);\n      }\n    };\n  }, [target, handleScroll]);\n\n  const buttonClasses = [\n    styles.backtop,\n    visible && styles.visible,\n    size !== 'md' && styles[size],\n    variant !== 'default' && styles[variant],\n    position === 'left' && styles.left,\n    showText && styles.withText,\n    className,\n  ].filter(Boolean).join(' ');\n\n  return (\n    <button\n      className={buttonClasses}\n      style={style}\n      onClick={scrollToTop}\n      aria-label=\"Back to top\"\n      aria-hidden={!visible}\n      type=\"button\"\n    >\n      {children || <ArrowUp aria-hidden=\"true\" />}\n      {showText && <span>{text}</span>}\n    </button>\n  );\n};\n\nBackTop.displayName = 'BackTop';\n"],"names":["BackTop","threshold","_duration","size","variant","position","showText","text","target","onClick","className","style","children","visible","setVisible","useState","rafRef","useRef","getScrollTop","useCallback","targetElement","handleScroll","scrollTop","scrollToTop","scrollElement","useEffect","buttonClasses","styles","jsxs","jsx","ArrowUp"],"mappings":";;;;AA4CO,MAAMA,IAAkC,CAAC;AAAA,EAC9C,WAAAC,IAAY;AAAA,EACZ,UAAUC,IAAY;AAAA,EACtB,MAAAC,IAAO;AAAA,EACP,SAAAC,IAAU;AAAA,EACV,UAAAC,IAAW;AAAA,EACX,UAAAC,IAAW;AAAA,EACX,MAAAC,IAAO;AAAA,EACP,QAAAC;AAAA,EACA,SAAAC;AAAA,EACA,WAAAC;AAAA,EACA,OAAAC;AAAA,EACA,UAAAC;AACF,MAAM;AACJ,QAAM,CAACC,GAASC,CAAU,IAAIC,EAAS,EAAK,GACtCC,IAASC,EAAsB,IAAI,GAEnCC,IAAeC,EAAY,MAAM;AACrC,UAAMC,IAAgBZ,IAAA;AAItB,WAHI,CAACY,KAGDA,MAAkB,SACb,OAAO,eAAe,SAAS,gBAAgB,YAEhDA,EAA8B;AAAA,EACxC,GAAG,CAACZ,CAAM,CAAC,GAELa,IAAeF,EAAY,MAAM;AACrC,IAAIH,EAAO,YAAY,QACrB,qBAAqBA,EAAO,OAAO,GAGrCA,EAAO,UAAU,sBAAsB,MAAM;AAC3C,YAAMM,IAAYJ,EAAA;AAClB,MAAAJ,EAAWQ,IAAYrB,CAAS;AAAA,IAClC,CAAC;AAAA,EACH,GAAG,CAACA,GAAWiB,CAAY,CAAC,GAEtBK,IAAcJ,EAAY,MAAM;AACpC,IAAAV,IAAA;AAEA,UAAMW,IAAgBZ,IAAA,GAChBgB,IAAgB,CAACJ,KAAiBA,MAAkB,SACtD,SACCA;AAKL,QAF6B,OAAO,WAAW,kCAAkC,EAAE,SAEzD;AAExB,MAAII,MAAkB,SACpB,OAAO,SAAS,GAAG,CAAC,IAEnBA,EAA8B,YAAY;AAE7C;AAAA,IACF;AAGA,IAAIA,MAAkB,SACpB,OAAO,SAAS,EAAE,KAAK,GAAG,UAAU,UAAU,IAE7CA,EAA8B,SAAS,EAAE,KAAK,GAAG,UAAU,UAAU;AAAA,EAE1E,GAAG,CAAChB,GAAQC,CAAO,CAAC;AAEpB,EAAAgB,EAAU,MAAM;AACd,UAAML,IAAgBZ,SAAc,QAC9BgB,IAAgBJ,MAAkB,SAAS,SAAUA;AAE3D,WAAAC,EAAA,GACAG,EAAc,iBAAiB,UAAUH,GAAc,EAAE,SAAS,IAAM,GAEjE,MAAM;AACX,MAAAG,EAAc,oBAAoB,UAAUH,CAAY,GACpDL,EAAO,YAAY,QACrB,qBAAqBA,EAAO,OAAO;AAAA,IAEvC;AAAA,EACF,GAAG,CAACR,GAAQa,CAAY,CAAC;AAEzB,QAAMK,IAAgB;AAAA,IACpBC,EAAO;AAAA,IACPd,KAAWc,EAAO;AAAA,IAClBxB,MAAS,QAAQwB,EAAOxB,CAAI;AAAA,IAC5BC,MAAY,aAAauB,EAAOvB,CAAO;AAAA,IACvCC,MAAa,UAAUsB,EAAO;AAAA,IAC9BrB,KAAYqB,EAAO;AAAA,IACnBjB;AAAA,EAAA,EACA,OAAO,OAAO,EAAE,KAAK,GAAG;AAE1B,SACE,gBAAAkB;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAWF;AAAA,MACX,OAAAf;AAAA,MACA,SAASY;AAAA,MACT,cAAW;AAAA,MACX,eAAa,CAACV;AAAA,MACd,MAAK;AAAA,MAEJ,UAAA;AAAA,QAAAD,KAAY,gBAAAiB,EAACC,GAAA,EAAQ,eAAY,OAAA,CAAO;AAAA,QACxCxB,KAAY,gBAAAuB,EAAC,QAAA,EAAM,UAAAtB,EAAA,CAAK;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAG/B;AAEAP,EAAQ,cAAc;"}