/* Knob Component Styles */

/* ========================================
   BASE KNOB
   ======================================== */

.knob {
  width: 150px;
  height: 150px;
  position: relative;
  cursor: pointer;
  user-select: none;
  touch-action: none;
  transition:
    filter var(--duration-fast),
    transform var(--duration-fast);
}

.knob:not(.knob--readonly):not(.knob--disabled):hover {
  filter: brightness(1.05);
}

.knob:not(.knob--readonly):not(.knob--disabled):active,
.knob-dragging {
  transform: scale(0.98);
}

.knob:focus-visible {
  outline: 2px solid var(--color-primary-500);
  outline-offset: 4px;
  border-radius: 50%;
}

/* ========================================
   SVG
   ======================================== */

.knob-svg {
  width: 100%;
  height: 100%;
}

/* ========================================
   TRACK & PROGRESS
   ======================================== */

.knob-track {
  fill: none;
  stroke: var(--border-default);
  stroke-width: 12;
  transition: stroke var(--duration-fast);
}

.knob-progress {
  fill: none;
  stroke: var(--color-primary-500);
  stroke-width: 12;
  stroke-linecap: round;
  transition:
    stroke-dashoffset var(--duration-base) var(--ease-out),
    stroke var(--duration-fast);
}

/* ========================================
   HANDLE (DRAGGABLE POINTER)
   ======================================== */

.knob-handle {
  fill: var(--color-primary-500);
  stroke: var(--surface-primary);
  stroke-width: 3;
  cursor: grab;
  transition:
    fill var(--duration-fast),
    r var(--duration-fast);
}

.knob:not(.knob--readonly):not(.knob--disabled):hover .knob-handle {
  r: 10;
}

.knob-dragging .knob-handle {
  cursor: grabbing;
  r: 10;
}

/* ========================================
   TEXT ELEMENTS
   ======================================== */

.knob-value {
  font-size: var(--font-size-display-small);
  font-weight: var(--font-weight-bold);
  fill: var(--text-primary);
  transition: fill var(--duration-fast);
}

.knob-label {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  fill: var(--text-tertiary);
  transition: fill var(--duration-fast);
}

.knob-min-label,
.knob-max-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  fill: var(--text-tertiary);
  transition: fill var(--duration-fast);
}

/* ========================================
   SIZES
   ======================================== */

.knob--sm {
  width: 100px;
  height: 100px;
}

.knob--sm .knob-track,
.knob--sm .knob-progress {
  stroke-width: 10;
}

.knob--sm .knob-value {
  font-size: var(--font-size-heading-2);
}

.knob--sm .knob-label {
  font-size: var(--font-size-sm);
}

.knob--lg {
  width: 200px;
  height: 200px;
}

.knob--lg .knob-track,
.knob--lg .knob-progress {
  stroke-width: 14;
}

.knob--lg .knob-value {
  font-size: var(--font-size-display-large);
}

.knob--lg .knob-label {
  font-size: var(--font-size-heading-4);
}

/* ========================================
   VARIANTS
   ======================================== */

.knob--primary .knob-progress {
  stroke: var(--color-primary-500);
}

.knob--primary .knob-handle {
  fill: var(--color-primary-500);
}

.knob--success .knob-progress {
  stroke: var(--color-success-500);
}

.knob--success .knob-handle {
  fill: var(--color-success-500);
}

.knob--warning .knob-progress {
  stroke: var(--color-warning-500);
}

.knob--warning .knob-handle {
  fill: var(--color-warning-500);
}

.knob--error .knob-progress {
  stroke: var(--color-error-500);
}

.knob--error .knob-handle {
  fill: var(--color-error-500);
}

/* ========================================
   STATES
   ======================================== */

.knob--readonly,
.knob--disabled {
  cursor: default;
  pointer-events: none;
}

.knob--disabled {
  opacity: 0.5;
}

.knob--disabled .knob-value,
.knob--disabled .knob-label,
.knob--disabled .knob-min-label,
.knob--disabled .knob-max-label {
  fill: var(--text-disabled);
}

.knob--disabled .knob-track {
  stroke: var(--border-subtle);
}

.knob--disabled .knob-progress {
  stroke: var(--text-disabled);
}

.knob--disabled .knob-handle {
  fill: var(--text-disabled);
  stroke: var(--text-disabled);
  cursor: not-allowed;
}

.knob--readonly .knob-handle {
  cursor: default;
}

/* ========================================
   DARK MODE
   ======================================== */

:global([data-theme="dark"]) .knob-track,
:global(.dark) .knob-track {
  stroke: var(--text-secondary);
}

:global([data-theme="dark"]) .knob-value,
:global(.dark) .knob-value {
  fill: var(--text-primary);
}

:global([data-theme="dark"]) .knob-label,
:global(.dark) .knob-label,
:global([data-theme="dark"]) .knob-min-label,
:global(.dark) .knob-min-label,
:global([data-theme="dark"]) .knob-max-label,
:global(.dark) .knob-max-label {
  fill: var(--text-tertiary);
}

:global([data-theme="dark"]) .knob--primary .knob-progress,
:global(.dark) .knob--primary .knob-progress {
  stroke: var(--color-primary-400);
}

:global([data-theme="dark"]) .knob--primary .knob-handle,
:global(.dark) .knob--primary .knob-handle {
  fill: var(--color-primary-400);
}

:global([data-theme="dark"]) .knob--success .knob-progress,
:global(.dark) .knob--success .knob-progress {
  stroke: var(--color-success-400);
}

:global([data-theme="dark"]) .knob--success .knob-handle,
:global(.dark) .knob--success .knob-handle {
  fill: var(--color-success-400);
}

:global([data-theme="dark"]) .knob--warning .knob-progress,
:global(.dark) .knob--warning .knob-progress {
  stroke: var(--color-warning-400);
}

:global([data-theme="dark"]) .knob--warning .knob-handle,
:global(.dark) .knob--warning .knob-handle {
  fill: var(--color-warning-400);
}

:global([data-theme="dark"]) .knob--error .knob-progress,
:global(.dark) .knob--error .knob-progress {
  stroke: var(--color-error-400);
}

:global([data-theme="dark"]) .knob--error .knob-handle,
:global(.dark) .knob--error .knob-handle {
  fill: var(--color-error-400);
}

:global([data-theme="dark"]) .knob-handle,
:global(.dark) .knob-handle {
  stroke: var(--surface-primary);
}

/* ========================================
   RESPONSIVE
   ======================================== */

@media (max-width: 768px) {
  .knob {
    width: 120px;
    height: 120px;
  }

  .knob--sm {
    width: 80px;
    height: 80px;
  }

  .knob--lg {
    width: 160px;
    height: 160px;
  }
}

/* ========================================
   REDUCED MOTION
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .knob,
  .knob-progress,
  .knob-value,
  .knob-label,
  .knob-handle {
    transition: none;
  }

  .knob:not(.knob--readonly):not(.knob--disabled):active {
    animation: none;
  }
}

/* ========================================
   HIGH CONTRAST
   ======================================== */

@media (prefers-contrast: high) {
  .knob-track {
    stroke-width: 14;
  }

  .knob-progress {
    stroke-width: 14;
  }

  .knob-value {
    font-weight: var(--font-weight-black);
  }

  .knob-handle {
    stroke-width: 4;
  }
}

/* ========================================
   PRINT
   ======================================== */

@media print {
  .knob {
    filter: none !important;
    transform: none !important;
  }

  .knob-progress {
    stroke: #000 !important;
  }

  .knob-handle {
    fill: #000 !important;
  }
}
